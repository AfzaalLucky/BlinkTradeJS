{"version":3,"sources":["webpack:///webpack/bootstrap 5bea16de14f6649c76d2","webpack:///./src/index.js","webpack:///./src/constants/brokers.js","webpack:///./src/ws.js","webpack:///external \"nodeify\"","webpack:///external \"eventemitter2\"","webpack:///./src/listener.js","webpack:///./src/constants/messages.js","webpack:///external \"ramda\"","webpack:///./src/constants/requestTypes.js","webpack:///./src/constants/actionTypes.js","webpack:///./src/constants/events.js","webpack:///./src/util/utils.js","webpack:///./src/trade.js","webpack:///./src/transports/websocket.js","webpack:///external \"fingerprintjs2\"","webpack:///./src/transports/transport.js","webpack:///./src/constants/common.js","webpack:///external \"ws\"","webpack:///./src/util/macaddress.js","webpack:///external \"macaddress\"","webpack:///./src/util/hash32.js","webpack:///./src/util/stun.js","webpack:///external \"ip\"","webpack:///external \"dgram\"","webpack:///external \"os\"","webpack:///./src/rest.js","webpack:///./src/transports/rest.js","webpack:///external \"url\"","webpack:///external \"sjcl\"","webpack:///external \"fetch-ponyfill\""],"names":["Brokers","BlinkTradeWS","BlinkTradeRest","SURBITCOIN","VBTC","FOXBIT","TESTNET","URDUBIT","CHILEBIT","params","transport","session","callback","connect","disconnect","msg","sendMessageAsPromise","d","Date","MsgType","HEARTBEAT","TestReqID","getTime","SendTime","extend","Promise","resolve","reject","send","then","data","Latency","now","catch","nodeify","username","password","secondFactor","brokerId","userAgent","isNode","UserAgent","window","navigator","UserAgentLanguage","language","UserAgentPlatform","platform","UserAgentTimezoneOffset","getTimezoneOffset","os","require","type","release","arch","LOGIN","UserReqID","BrokerID","Username","Password","UserReqTyp","SecondFactor","UserStatus","LOGOUT","Profile","VerificationData","profile","emitterPromise","BALANCE","balance","eventEmitter","emit","symbols","SECURITY_STATUS_SUBSCRIBE","SecurityStatusReqID","SubscriptionRequestType","Instruments","formatTicker","SellVolume","LowPx","LastPx","BestAsk","HighPx","BuyVolume","BestBid","ticker","Market","Symbol","sendMessage","MD_FULL_REFRESH","MDReqID","MarketDepth","MDUpdateType","MDEntryTypes","subscribeEvent","MDBkTyp","MDIncGrp","map","dataOrder","index","order","MDEntryPositionNo","price","MDEntryPx","size","MDEntrySize","side","MDEntryType","userId","UserID","orderId","OrderID","symbol","time","MDEntryDate","MDEntryTime","toString","orderbookEvent","ORDERBOOK","MDUpdateAction","bidOfferData","tradeEvent","TRADES","tradeData","level","err","event","EXECUTION_REPORT","ExecType","since","filter","page","Page","pageSize","PageSize","TRADE_HISTORY","TradeHistoryReqID","length","Filter","Since","format","currency","value","depositMethodId","deposit","requestDeposit","ClOrdID","amount","method","withdraw","requestWithdraw","getListeners","generateRequestId","getListener","getRequest","setRequest","deleteRequest","getEventEmitter","registerEventEmitter","registerListener","store","Map","emitters","listeners","parseInt","String","Math","random","msgType","getKey","messages","key","get","promise","set","delete","reqs","actions","msgToAction","MsgActionReq","BE","V","x","SECURITY_LIST","SecurityReqID","e","D","ORDER_SEND","F","ORDER_CANCEL","U0","SIGNUP","U2","BalanceReqID","U6","WITHDRAW_REQUEST","WithdrawReqID","U4","ORDER_HISTORY","OrdersReqID","U18","DEPOSIT_REQUEST","DepositReqID","U20","DEPOSIT_METHODS","DepositMethodReqID","U24","WITHDRAW_CONFIRM","U26","WITHDRAW_LIST","WithdrawListReqID","U28","BROKER_LIST","BrokerListReqID","U30","DEPOSIT_LIST","DepositListReqID","U32","U34","LEDGER_LIST","LedgerListReqID","U38","PROFILE_UPDATE","UpdateReqID","U50","API_KEY_LIST","APIKeyListReqID","U52","API_KEY_CREATE","APIKeyCreateReqID","U54","API_KEY_REVOKE","APIKeyRevokeReqID","U70","WITHDRAW_CANCEL","WithdrawCancelReqID","U78","WITHDRAW_COMMENT","B0","DEPOSIT_PROCESS","ProcessDepositReqID","B2","CUSTOMER_LIST","CustomerListReqID","B4","KYC_REQUEST","CustomerReqID","B6","WITHDRAW_PROCESS","ProcessWithdrawReqID","B8","KYC_VERIFY","VerifyCustomerReqID","MsgActionRes","BF","W","X","MD_INCREMENT","y","f","U3","U7","U5","U9","WITHDRAW_REFRESH","U19","U21","U23","DEPOSIT_REFRESH","U25","U27","U29","U31","U33","U35","U39","U51","U53","U55","U71","U79","B1","B3","B5","B9","B7","B11","CUSTOMER_REFRESH","ActionMsgReq","ActionMsgRes","ReqID","ResetPasswordReqID","EnableTwoFactorReqID","TradersRankReqID","PositionReqID","SECURITY_STATUS_UPDATE","SECURITY_STATUS_UNSUBSCRIBE","MD_TRADES","MD_TRADES_UNSUBSCRIBE","MD_UNSUBSCRIBE","MD_OPENING","OB_NEW_ORDER","OB_UPDATE_ORDER","OB_DELETE_ORDER","OB_DELETE_ORDERS_THRU","EXECUTION_REPORT_NEW","EXECUTION_REPORT_PARTIAL","EXECUTION_REPORT_EXECUTION","EXECUTION_REPORT_CANCELED","EXECUTION_REPORT_REJECTED","TRADE_NEW","LOGIN_REQUIRED","LOGIN_CLOSE","CHANGE_PASSWORD","WITHDRAW_FILTER","WITHDRAW_SET_NEW_VISIBLE","DEPOSIT_FILTER","DEPOSIT_SET_NEW_VISIBLE","LEDGER_FILTER","ORDER_BOOK_TRADE_NEW","ORDER_BOOK_NEW_ORDER","ORDER_BOOK_UPDATE_ORDER","ORDER_BOOK_DELETE_ORDER","ORDER_BOOK_DELETE_ORDERS_THRU","EVENTS","formatColumns","field","list","Columns","formatTradeHistory","TradeHistoryGrp","formatOrderBook","MDFullGrp","reduce","prev","push","bids","asks","TradeBase","clientId","ClientID","Side","OrdType","Price","OrderQty","param","status","StatusList","reqId","Method","Amount","Currency","Data","WithdrawID","withdrawId","confirmationToken","CONFIRM_WITHDRAW","ConfirmationToken","CANCEL_WITHDRAW","DepositMethodID","Value","WebSocketTransport","stun","local","public","getStun","getFingerPrint","fingerPrint","headers","wildcard","delimiter","request","WebSocket","socket","endpoint","onopen","onOpen","bind","onclose","onClose","onerror","onError","onmessage","onMessage","close","connected","error","readyState","STUNTIP","FingerPrint","JSON","stringify","parse","Error","Detail","Description","emitter","listener","dispatchPromise","dispatchEventEmitters","dispatchListeners","customFingerprint","getMac","macAddress","isBrowser","abs","encodeByteArray","on","onAny","offAny","once","many","times","removeListener","removeAllListeners","events","Base","env","url","prod","testnet","document","ws","rest","all","hashCode","str","hash","i","charCodeAt","macAddresses","Object","keys","forEach","iface","mac","SEED32","CONSTANT32","mix32_","mix","a","b","c","toSigned_","n","wordAt_","bytes","offset","seed","keylen","stunIp","addIPAddress","ipAddress","match","indexOf","createSocket","STUN_HEADER_LENGTH","stunRequest","Buffer","STUN_METHOD_REQUEST","STUN_BINDING_CLASS","STUN_MAGIC_COOKIE","STUN_TID_MAX","pow","STUN_ATTR_MAPPED_ADDRESS","STUN_ATTR_XOR_MAPPED_ADDRESS","STUN_ATTR_XOR_MAPPED_ADDRESS_ALT","stunTxId","stunServers","writeUInt16BE","writeUInt32BE","xor","tmp","len","block","readUInt8","bit1","bit2","msgHeader","slice","msgAttrs","attrType","readUInt16BE","attrBuffLength","blockOut","family","address","magic","tid","xaddr","addr","concat","port","host","path","fetchTrade","fetchPublic","limit","fetch","RestTransport","secret","body","timeStamp","hexKey","codec","utf8String","toBits","hmac","misc","sha256","Signature","hex","fromBits","encrypt","Nonce","APIKey","api","response","json","Status","Responses"],"mappings":"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","file":"blinktrade.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5bea16de14f6649c76d2","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport Brokers from './constants/brokers';\nimport BlinkTradeWS from './ws';\nimport BlinkTradeRest from './rest';\n\nexport {\n  Brokers,\n  BlinkTradeWS,\n  BlinkTradeRest,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default {\n  SURBITCOIN: 1,\n  VBTC: 3,\n  FOXBIT: 4,\n  TESTNET: 5,\n  URDUBIT: 8,\n  CHILEBIT: 9,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/brokers.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\nimport {\n  registerListener,\n  generateRequestId,\n  registerEventEmitter,\n} from './listener';\n\nimport {\n  EVENTS,\n  BALANCE,\n  DEPOSIT_REFRESH,\n  WITHDRAW_REFRESH,\n  EXECUTION_REPORT,\n} from './constants/events';\n\nimport { ActionMsgReq } from './constants/messages';\nimport { formatOrderBook, formatTradeHistory } from './util/utils';\n\nimport TradeBase from './trade';\nimport WebSocketTransport from './transports/websocket';\n\nclass BlinkTradeWS extends TradeBase {\n  /**\n   * Session to store login information\n   */\n  session: Object;\n\n  transport: Object;\n\n  constructor(params?: BlinkTradeBase) {\n    super(params);\n\n    this.transport = params.transport || new WebSocketTransport(params);\n    this.session = {};\n  }\n\n  connect(callback?: Function) {\n    return this.transport.connect(callback);\n  }\n\n  disconnect() {\n    return this.transport.disconnect();\n  }\n\n  send(msg: Message): Promise<Object> {\n    return this.transport.sendMessageAsPromise(msg);\n  }\n\n  heartbeat(callback?: Function): Promise<Object> {\n    const d = new Date();\n    const msg: Object = {\n      MsgType: ActionMsgReq.HEARTBEAT,\n      TestReqID: d.getTime(),\n      SendTime: d.getTime(),\n    };\n\n    return nodeify.extend(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        return resolve({\n          ...data,\n          Latency: new Date(Date.now()) - data.SendTime,\n        });\n      }).catch(reject);\n    })).nodeify(callback);\n  }\n\n  login({ username, password, secondFactor, brokerId }: {\n    username: string,\n    password: string,\n    secondFactor?: string,\n    brokerId?: number,\n  }, callback?: Function): Promise<Object> {\n    let userAgent;\n    if (!this.isNode) {\n      userAgent = {\n        UserAgent: window.navigator.userAgent,\n        UserAgentLanguage: window.navigator.language,\n        UserAgentPlatform: window.navigator.platform,\n        UserAgentTimezoneOffset: new Date().getTimezoneOffset(),\n      };\n    } else {\n      const os = require('os');\n      userAgent = {\n        UserAgent: `${os.type()} ${os.release()}`,\n        UserAgentLanguage: 'en_US',\n        UserAgentPlatform: `${os.platform()} (${os.arch()})`,\n        UserAgentTimezoneOffset: new Date().getTimezoneOffset(),\n      };\n    }\n\n    const msg: Object = {\n      MsgType: ActionMsgReq.LOGIN,\n      UserReqID: generateRequestId(),\n      BrokerID: brokerId || this.brokerId,\n      Username: username,\n      Password: password,\n      UserReqTyp: '1',\n      ...userAgent,\n    };\n\n    if (secondFactor) {\n      msg.SecondFactor = secondFactor;\n    }\n\n    return nodeify.extend(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        if (data.UserStatus === 1) {\n          this.session = data;\n          return resolve(data);\n        }\n\n        return reject(data);\n      }).catch(reject);\n    })).nodeify(callback);\n  }\n\n  logout(callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.LOGOUT,\n      BrokerID: this.brokerId,\n      UserReqID: generateRequestId(),\n      Username: this.session.Username,\n      UserReqTyp: '2',\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  profile(callback?: Function): Promise<Object> {\n    const { VerificationData, ...profile } = this.session.Profile;\n    return nodeify.extend(Promise.resolve(profile)).nodeify(callback);\n  }\n\n  balance(callback?: Function): PromiseEmitter<Object> {\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return super.balance(callback).then((data) => {\n        registerListener(ActionMsgReq.BALANCE, (balance) => {\n          callback && callback(null, balance);\n          return this.transport.eventEmitter.emit(BALANCE, balance);\n        });\n        return resolve(data);\n      }).catch(reject);\n    }));\n  }\n\n  subscribeTicker(symbols: Array<string>, callback?: Function): PromiseEmitter<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n      SecurityStatusReqID: generateRequestId(),\n      SubscriptionRequestType: '1',\n      Instruments: symbols,\n    };\n\n    const formatTicker = (data) => {\n      return {\n        ...data,\n        SellVolume: data.SellVolume / 1e8,\n        LowPx: data.LowPx / 1e8,\n        LastPx: data.LastPx / 1e8,\n        BestAsk: data.BestAsk / 1e8,\n        HighPx: data.HighPx / 1e8,\n        BuyVolume: data.BuyVolume / 1e8,\n        BestBid: data.BestBid / 1e8,\n      };\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        resolve(formatTicker(data));\n        registerEventEmitter('SecurityStatusReqID', data.SecurityStatusReqID, (ticker) => {\n          callback && callback(null, formatTicker(ticker));\n          return this.transport.eventEmitter.emit(`${ticker.Market}:${ticker.Symbol}`, formatTicker(ticker));\n        });\n      }).catch(reject);\n    }), callback);\n  }\n\n  unSubscribeTicker(SecurityStatusReqID: number): number {\n    const msg = {\n      MsgType: ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n      SecurityStatusReqID,\n      SubscriptionRequestType: '2',\n    };\n\n    this.transport.sendMessage(msg);\n    return SecurityStatusReqID;\n  }\n\n  subscribeOrderbook(symbols: Array<string>, callback?: Function): PromiseEmitter<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.MD_FULL_REFRESH,\n      MDReqID: generateRequestId(),\n      SubscriptionRequestType: '1',\n      MarketDepth: 0,\n      MDUpdateType: '1', // Incremental refresh\n      MDEntryTypes: ['0', '1', '2'],\n      Instruments: symbols,\n    };\n\n    const subscribeEvent = (data) => {\n      if (data.MDBkTyp === '3') {\n        data.MDIncGrp.map(order => {\n          const dataOrder = {\n            index: order.MDEntryPositionNo,\n            price: order.MDEntryPx / 1e8,\n            size: order.MDEntrySize / 1e8,\n            side: order.MDEntryType === '0' ? 'buy' : 'sell',\n            userId: order.UserID,\n            orderId: order.OrderID,\n            symbol: order.Symbol,\n            time: new Date(`${order.MDEntryDate} ${order.MDEntryTime}`).toString(),\n          };\n\n          switch (order.MDEntryType) {\n            case '0':\n            case '1':\n              const orderbookEvent = `OB:${EVENTS.ORDERBOOK[order.MDUpdateAction]}`;\n              const bidOfferData = { ...dataOrder, type: orderbookEvent };\n\n              callback && callback(null, bidOfferData);\n              return this.transport.eventEmitter.emit(orderbookEvent, bidOfferData);\n            case '2':\n              const tradeEvent = `OB:${EVENTS.TRADES[order.MDUpdateAction]}`;\n              const tradeData = { ...dataOrder, type: tradeEvent };\n\n              callback && callback(null, tradeData);\n              return this.transport.eventEmitter.emit(tradeEvent, tradeData);\n            case '4':\n              break;\n            default:\n              return null;\n          }\n          return null;\n        });\n      }\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        registerEventEmitter('MDReqID', data.MDReqID, subscribeEvent);\n        return resolve(formatOrderBook(data, this.level));\n      }).catch(err => reject(err));\n    }), callback);\n  }\n\n  unSubscribeOrderbook(MDReqID: number): number {\n    const msg = {\n      MsgType: ActionMsgReq.MD_FULL_REFRESH,\n      MDReqID,\n      MarketDepth: 0,\n      SubscriptionRequestType: '2',\n    };\n\n    this.transport.sendMessage(msg);\n    return MDReqID;\n  }\n\n  executionReport(callback?: Function): EventEmitter {\n    registerListener('8', (data) => {\n      callback && callback(data);\n      const event = EVENTS.EXECUTION_REPORT[data.ExecType];\n      return this.transport.eventEmitter.emit(`${EXECUTION_REPORT}:${event}`, data);\n    });\n\n    return this.transport.eventEmitter;\n  }\n\n  tradeHistory({ since, filter, page: Page = 0, pageSize: PageSize = 80 }: {\n    since?: number,\n    filter?: Array<string>,\n    page?: number,\n    pageSize?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg: Object = {\n      MsgType: ActionMsgReq.TRADE_HISTORY,\n      TradeHistoryReqID: generateRequestId(),\n      Page,\n      PageSize,\n    };\n\n    if (filter && filter.length > 0) {\n      msg.Filter = filter;\n    }\n\n    if (since && typeof since === 'number') {\n      msg.Since = since;\n    }\n\n    const format = formatTradeHistory(this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestDeposit({ currency = 'BTC', value, depositMethodId }: {\n    value?: number,\n    currency?: string,\n    depositMethodId?: number,\n  } = {}, callback?: Function): PromiseEmitter<Object> {\n    const subscribeEvent = (deposit) => {\n      callback && callback(null, deposit);\n      return this.transport.eventEmitter.emit(DEPOSIT_REFRESH, deposit);\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.requestDeposit({ currency, value, depositMethodId }).then(deposit => {\n        registerEventEmitter('ClOrdID', deposit.ClOrdID, subscribeEvent);\n        return resolve(deposit);\n      }).catch(reject);\n    }), callback);\n  }\n\n  onDepositRefresh(callback?: Function): Promise<Object> {\n    return new Promise((resolve) => {\n      registerListener('U23', (deposit) => {\n        callback && callback(deposit);\n        return resolve(deposit);\n      });\n    });\n  }\n\n  requestWithdraw({ amount, data, currency = 'BTC', method = 'bitcoin' }: {\n    data: Object,\n    amount: number,\n    method?: string,\n    currency?: string,\n  }, callback?: Function): PromiseEmitter<Object> {\n    const subscribeEvent = (withdraw) => {\n      callback && callback(null, withdraw);\n      return this.transport.eventEmitter.emit(WITHDRAW_REFRESH, withdraw);\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.requestWithdraw({ amount, data, currency, method }).then(withdraw => {\n        registerEventEmitter('ClOrdID', withdraw.ClOrdID, subscribeEvent);\n        return resolve(withdraw);\n      }).catch(reject);\n    }), callback);\n  }\n\n  onWithdrawRefresh(callback?: Function): Promise<Object> {\n    return new Promise((resolve) => {\n      registerListener('U9', (withdraw) => {\n        callback && callback(withdraw);\n        return resolve(withdraw);\n      });\n    });\n  }\n}\n\nexport default BlinkTradeWS;\n\n\n\n// WEBPACK FOOTER //\n// ./src/ws.js","module.exports = require(\"nodeify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nodeify\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"eventemitter2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter2\"\n// module id = 4\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport { MsgActionReq, MsgActionRes } from './constants/messages';\n\nconst store = new Map();\nconst emitters = new Map();\nconst listeners = new Map();\n\nexport function getListeners() {\n  return listeners;\n}\n\nexport function generateRequestId(): number {\n  return parseInt(String(1e7 * Math.random()), 10);\n}\n\nexport function getListener(msgType: string): Function {\n  return listeners[msgType];\n}\n\nfunction getKey(messages: MsgTypes, msg: Object): string {\n  const key = messages[msg.MsgType][1];\n  const value = msg[key];\n  return key + ':' + value;\n}\n\nexport function getRequest(msg: Message): ?ResolveReject {\n  return store.get(getKey(MsgActionRes, msg));\n}\n\nexport function setRequest(msg: Message, promise: ResolveReject): void {\n  store.set(getKey(MsgActionReq, msg), promise);\n}\n\nexport function deleteRequest(msg: Message): void {\n  store.delete(getKey(MsgActionRes, msg));\n}\n\nexport function getEventEmitter(msg: Message): ?Function {\n  return emitters.get(getKey(MsgActionRes, msg));\n}\n\nexport function registerEventEmitter(key: string, value: number, callback: Function): Object {\n  emitters.set(key + ':' + value, callback);\n}\n\nexport function registerListener(msgType: string, callback: Function): void {\n  listeners.set(msgType, callback);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/listener.js","import { map, head, compose, invertObj } from 'ramda';\nimport * as reqs from './requestTypes';\nimport * as actions from './actionTypes';\n\nconst msgToAction = compose(invertObj, map(head));\n\nexport const MsgActionReq = {\n  1:   [actions.HEARTBEAT, reqs.TestReqID],\n  BE:  [actions.LOGIN, reqs.UserReqID],\n  V:   [actions.MD_FULL_REFRESH, reqs.MDReqID],\n  x:   [actions.SECURITY_LIST, reqs.SecurityReqID],\n  e:   [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n  D:   [actions.ORDER_SEND, reqs.ClOrdID],\n  F:   [actions.ORDER_CANCEL, reqs.ClOrdID],\n  U0:  [actions.SIGNUP, reqs.UserReqID],\n  U2:  [actions.BALANCE, reqs.BalanceReqID],\n  U6:  [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n  U4:  [actions.ORDER_HISTORY, reqs.OrdersReqID],\n  U18: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n  U20: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n  U24: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n  U26: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n  U28: [actions.BROKER_LIST, reqs.BrokerListReqID],\n  U30: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n  U32: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n  U34: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n  U38: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n  U50: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n  U52: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n  U54: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n  U70: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n  U78: [actions.WITHDRAW_COMMENT, reqs.WithdrawReqID],\n  B0:  [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n  B2:  [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n  B4:  [actions.KYC_REQUEST, reqs.CustomerReqID],\n  B6:  [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n  B8:  [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n};\n\nexport const MsgActionRes = {\n  0:   [actions.HEARTBEAT, reqs.TestReqID],\n  BF:  [actions.LOGIN, reqs.UserReqID],\n  W:   [actions.MD_FULL_REFRESH, reqs.MDReqID],\n  X:   [actions.MD_INCREMENT, reqs.MDReqID],\n  8:   [actions.EXECUTION_REPORT, reqs.ClOrdID],\n  y:   [actions.SECURITY_LIST, reqs.SecurityReqID],\n  f:   [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n  U3:  [actions.BALANCE, reqs.BalanceReqID],\n  U7:  [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n  U5:  [actions.ORDER_HISTORY, reqs.OrdersReqID],\n  U9:  [actions.WITHDRAW_REFRESH, reqs.WithdrawReqID],\n  U19: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n  U21: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n  U23: [actions.DEPOSIT_REFRESH, reqs.DepositReqID],\n  U25: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n  U27: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n  U29: [actions.BROKER_LIST, reqs.BrokerListReqID],\n  U31: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n  U33: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n  U35: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n  U39: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n  U51: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n  U53: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n  U55: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n  U71: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n  U79: [actions.WITHDRAW_COMMENT, reqs.WithdrawCancelReqID],\n  B1:  [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n  B3:  [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n  B5:  [actions.KYC_REQUEST, reqs.CustomerReqID],\n  B9:  [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n  B7:  [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n  B11: [actions.CUSTOMER_REFRESH],\n};\n\nexport const ActionMsgReq = msgToAction(MsgActionReq);\nexport const ActionMsgRes = msgToAction(MsgActionRes);\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/messages.js","module.exports = require(\"ramda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 7\n// module chunks = 0","export const ReqID = 'ReqID';\nexport const TestReqID = 'TestReqID';\nexport const UserReqID = 'UserReqID';\nexport const SecurityReqID = 'SecurityReqID';\nexport const ResetPasswordReqID = 'ResetPasswordReqID';\nexport const DepositReqID = 'DepositReqID';\nexport const WithdrawReqID = 'WithdrawReqID';\nexport const BalanceReqID = 'BalanceReqID';\nexport const OrdersReqID = 'OrdersReqID';\nexport const EnableTwoFactorReqID = 'EnableTwoFactorReqID';\nexport const DepositMethodReqID = 'DepositMethodReqID';\nexport const WithdrawListReqID = 'WithdrawListReqID';\nexport const WithdrawCancelReqID = 'WithdrawCancelReqID';\nexport const BrokerListReqID = 'BrokerListReqID';\nexport const DepositListReqID = 'DepositListReqID';\nexport const TradeHistoryReqID = 'TradeHistoryReqID';\nexport const LedgerListReqID = 'LedgerListReqID';\nexport const TradersRankReqID = 'TradersRankReqID';\nexport const UpdateReqID = 'UpdateReqID';\nexport const PositionReqID = 'PositionReqID';\nexport const SecurityStatusReqID = 'SecurityStatusReqID';\nexport const APIKeyListReqID = 'APIKeyListReqID';\nexport const APIKeyCreateReqID = 'APIKeyCreateReqID';\nexport const APIKeyRevokeReqID = 'APIKeyRevokeReqID';\nexport const ProcessDepositReqID = 'ProcessDepositReqID';\nexport const CustomerListReqID = 'CustomerListReqID';\nexport const CustomerReqID = 'CustomerReqID';\nexport const ProcessWithdrawReqID = 'ProcessWithdrawReqID';\nexport const VerifyCustomerReqID = 'VerifyCustomerReqID';\nexport const MDReqID = 'MDReqID';\nexport const ClOrdID = 'ClOrdID';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/requestTypes.js","export const HEARTBEAT = 'HEARTBEAT';\n\nexport const BROKER_LIST = 'BROKER_LIST';\n\nexport const SECURITY_LIST = 'SECURITY_LIST';\nexport const SECURITY_STATUS_UPDATE = 'SECURITY_STATUS_UPDATE';\nexport const SECURITY_STATUS_SUBSCRIBE = 'SECURITY_STATUS_SUBSCRIBE';\nexport const SECURITY_STATUS_UNSUBSCRIBE = 'SECURITY_STATUS_UNSUBSCRIBE';\n\nexport const MD_TRADES = 'MD_TRADES';\nexport const MD_TRADES_UNSUBSCRIBE = 'MD_TRADES_UNSUBSCRIBE';\nexport const MD_INCREMENT = 'MD_INCREMENT';\nexport const MD_FULL_REFRESH = 'MD_FULL_REFRESH';\nexport const MD_UNSUBSCRIBE = 'MD_UNSUBSCRIBE';\nexport const MD_OPENING = 'MD_OPENING';\n\nexport const OB_NEW_ORDER = 'OB_NEW_ORDER';\nexport const OB_UPDATE_ORDER = 'OB_UPDATE_ORDER';\nexport const OB_DELETE_ORDER = 'OB_DELETE_ORDER';\nexport const OB_DELETE_ORDERS_THRU = 'OB_DELETE_ORDERS_THRU';\n\nexport const EXECUTION_REPORT = 'EXECUTION_REPORT';\nexport const EXECUTION_REPORT_NEW = 'EXECUTION_REPORT_NEW';\nexport const EXECUTION_REPORT_PARTIAL = 'EXECUTION_REPORT_PARTIAL';\nexport const EXECUTION_REPORT_EXECUTION = 'EXECUTION_REPORT_EXECUTION';\nexport const EXECUTION_REPORT_CANCELED = 'EXECUTION_REPORT_CANCELED';\nexport const EXECUTION_REPORT_REJECTED = 'EXECUTION_REPORT_REJECTED';\n\nexport const ORDER_HISTORY = 'ORDER_HISTORY';\n\nexport const ORDER_SEND = 'ORDER_SEND';\nexport const ORDER_CANCEL = 'ORDER_CANCEL';\n\nexport const TRADE_NEW = 'TRADE_NEW';\nexport const TRADE_HISTORY = 'TRADE_HISTORY';\n\nexport const TRADES = 'TRADES';\n\nexport const SIGNUP = 'SIGNUP';\n\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const LOGIN_REQUIRED = 'LOGIN_REQUIRED';\nexport const LOGIN_CLOSE = 'LOGIN_CLOSE';\n\nexport const CHANGE_PASSWORD = 'CHANGE_PASSWORD';\n\nexport const BALANCE = 'BALANCE';\n\nexport const PROFILE_UPDATE = 'PROFILE_UPDATE';\n\nexport const WITHDRAW_LIST = 'WITHDRAW_LIST';\nexport const WITHDRAW_CANCEL = 'WITHDRAW_CANCEL';\nexport const WITHDRAW_FILTER = 'WITHDRAW_FILTER';\nexport const WITHDRAW_REFRESH = 'WITHDRAW_REFRESH';\nexport const WITHDRAW_PROCESS = 'WITHDRAW_PROCESS';\nexport const WITHDRAW_CONFIRM = 'WITHDRAW_CONFIRM';\nexport const WITHDRAW_COMMENT = 'WITHDRAW_COMMENT';\nexport const WITHDRAW_REQUEST = 'WITHDRAW_REQUEST';\nexport const WITHDRAW_SET_NEW_VISIBLE = 'WITHDRAW_SET_NEW_VISIBLE';\n\nexport const DEPOSIT_LIST = 'DEPOSIT_LIST';\nexport const DEPOSIT_FILTER = 'DEPOSIT_FILTER';\nexport const DEPOSIT_REFRESH = 'DEPOSIT_REFRESH';\nexport const DEPOSIT_PROCESS = 'DEPOSIT_PROCESS';\nexport const DEPOSIT_REQUEST = 'DEPOSIT_REQUEST';\nexport const DEPOSIT_METHODS = 'DEPOSIT_METHODS';\nexport const DEPOSIT_SET_NEW_VISIBLE = 'DEPOSIT_SET_NEW_VISIBLE';\n\nexport const LEDGER_LIST = 'LEDGER_LIST';\nexport const LEDGER_FILTER = 'LEDGER_FILTER';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.js","export const ORDER_BOOK_TRADE_NEW = 'TRADE_NEW';\nexport const ORDER_BOOK_NEW_ORDER = 'NEW_ORDER';\nexport const ORDER_BOOK_UPDATE_ORDER = 'UPDATE_ORDER';\nexport const ORDER_BOOK_DELETE_ORDER = 'DELETE_ORDER';\nexport const ORDER_BOOK_DELETE_ORDERS_THRU = 'DELETE_ORDERS_THRU';\n\nexport const EXECUTION_REPORT = 'EXECUTION_REPORT';\nexport const EXECUTION_REPORT_NEW = 'NEW';\nexport const EXECUTION_REPORT_PARTIAL = 'PARTIAL';\nexport const EXECUTION_REPORT_EXECUTION = 'EXECUTION';\nexport const EXECUTION_REPORT_CANCELED = 'CANCELED';\nexport const EXECUTION_REPORT_REJECTED = 'REJECTED';\n\n/* eslint-disable quote-props */\nexport const EVENTS = {\n  ORDERBOOK: {\n    '0': ORDER_BOOK_NEW_ORDER,\n    '1': ORDER_BOOK_UPDATE_ORDER,\n    '2': ORDER_BOOK_DELETE_ORDER,\n    '3': ORDER_BOOK_DELETE_ORDERS_THRU,\n  },\n  TRADES: {\n    '0': ORDER_BOOK_TRADE_NEW,\n  },\n  EXECUTION_REPORT: {\n    '0': EXECUTION_REPORT_NEW,\n    '1': EXECUTION_REPORT_PARTIAL,\n    '2': EXECUTION_REPORT_EXECUTION,\n    '4': EXECUTION_REPORT_CANCELED,\n    '8': EXECUTION_REPORT_REJECTED,\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/events.js","import { map, compose, groupBy, prop, zipObj } from 'ramda';\n\nexport const formatColumns = (field, level) => (data) => {\n  if (level === 2) {\n    const list = map(zipObj(data.Columns), data[field]);\n    return Promise.resolve({ ...data, [field]: list });\n  }\n\n  return Promise.resolve(data);\n};\n\nexport const formatTradeHistory = (level) => (data) => {\n  if (level === 2) {\n    const TradeHistoryGrp = compose(\n      groupBy(prop('Market')),\n      map(zipObj(data.Columns)),\n    )(data.TradeHistoryGrp);\n\n    return Promise.resolve({ ...data, TradeHistoryGrp });\n  }\n\n  return Promise.resolve(data);\n};\n\nexport const formatOrderBook = (data, level) => {\n  if (level === 2) {\n    const { bids, asks } = data.MDFullGrp\n      .filter(order => order.MDEntryType === '0' || order.MDEntryType === '1')\n      .reduce((prev, order) => {\n        const side = order.MDEntryType === '0' ? 'bids' : 'asks';\n        (prev[side] || (prev[side] = [])).push([\n          order.MDEntryPx / 1e8,\n          order.MDEntrySize / 1e8,\n          order.UserID,\n        ]);\n        return prev;\n      }, []);\n\n    return {\n      ...data,\n      MDFullGrp: {\n        [data.Symbol]: {\n          bids,\n          asks,\n        },\n      },\n    };\n  }\n\n  return data;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/utils.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { ActionMsgReq } from './constants/messages';\nimport { formatColumns } from './util/utils';\nimport { generateRequestId } from './listener';\n\ntype StatusListType = '1' | '2' | '4' | '8';\n\nclass TradeBase {\n  env: BlinkTradeEnv;\n\n  send: (msg: Object) => Promise<Object>;\n\n  +fetchTrade: (msg: Object) => Promise<Object>;\n\n  +sendMessageAsPromise: (msg: Object) => Promise<Object>;\n\n  constructor(params?: BlinkTradeBase) {\n    this.level = params.level;\n    this.brokerId = params.brokerId;\n  }\n\n  balance(clientId, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.BALANCE,\n      BalanceReqID: generateRequestId(),\n    };\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  myOrders({\n    page: Page = 0,\n    pageSize: PageSize = 40,\n    filter,\n  }: {\n    page?: number,\n    pageSize?: number,\n    filter: Array<string>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.ORDER_HISTORY,\n      OrdersReqID: generateRequestId(),\n      Page,\n      PageSize,\n    };\n\n    if (filter) {\n      msg.Filter = filter;\n    }\n\n    const format = formatColumns('OrdListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  sendOrder({ side, amount, price, symbol }: {\n    side: '1' | '2',\n    price: number,\n    amount: number,\n    symbol: string,\n  }, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.ORDER_SEND,\n      ClOrdID: generateRequestId(),\n      Symbol: symbol,\n      Side: side,\n      OrdType: '2',\n      Price: price,\n      OrderQty: amount,\n      BrokerID: this.brokerId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  cancelOrder(param?: number | {\n    orderId?: number,\n    clientId?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const orderId = param.orderId ? param.orderId : param;\n    const msg: Object = {\n      MsgType: ActionMsgReq.ORDER_CANCEL,\n    };\n\n    if (param.clientId) {\n      msg.ClOrdID = param.clientId;\n    }\n\n    if (param.orderId) {\n      msg.OrderID = orderId;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  /**\n   * status: 1-Pending, 2-In Progress, 4-Completed, 8-Cancelled\n   */\n  requestWithdrawList({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    status: StatusList = ['1', '2', '4', '8'],\n    filter,\n    clientId,\n  }: {\n    page?: number,\n    pageSize?: number,\n    clientId: string,\n    filter?: Array<string>,\n    status?: Array<StatusListType>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.WITHDRAW_LIST,\n      WithdrawListReqID: generateRequestId(),\n      Page,\n      PageSize,\n      StatusList,\n    };\n\n    if (filter && filter.length) {\n      msg.Filter = filter;\n    }\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('WithdrawListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestWithdraw({ amount, data, currency = 'BTC', method = 'bitcoin' }: {\n    data: Object,\n    amount: number,\n    method?: string,\n    currency?: string,\n  }, callback?: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg = {\n      MsgType: ActionMsgReq.WITHDRAW_REQUEST,\n      WithdrawReqID: reqId,\n      ClOrdID: reqId,\n      Method: method,\n      Amount: amount,\n      Currency: currency,\n      Data: data,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  confirmWithdraw({ withdrawId: WithdrawID, confirmationToken, secondFactor }: {\n    withdrawId: string,\n    confirmationToken?: string,\n    secondFactor?: string,\n  }, callback: Function): Promise<Object> {\n    const msg: Object = {\n      MsgType: ActionMsgReq.CONFIRM_WITHDRAW,\n      WithdrawReqID: generateRequestId(),\n      WithdrawID,\n    };\n\n    if (confirmationToken) {\n      msg.ConfirmationToken = confirmationToken;\n    }\n\n    if (secondFactor) {\n      msg.SecondFactor = secondFactor;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  cancelWithdraw(withdrawId: string, callback: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg = {\n      MsgType: ActionMsgReq.CANCEL_WITHDRAW,\n      WithdrawCancelReqID: reqId,\n      ClOrdID: reqId,\n      WithdrawID: withdrawId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestDepositList({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    status: StatusList = ['1', '2', '4', '8'],\n    filter,\n    clientId,\n  }: {\n    page: number,\n    pageSize: number,\n    status: Array<StatusListType>,\n    filter?: Array<string>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.DEPOSIT_LIST,\n      DepositListReqID: generateRequestId(),\n      Page,\n      PageSize,\n      StatusList,\n    };\n\n    if (filter && filter.length) {\n      msg.Filter = filter;\n    }\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('DepositListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestDeposit({ currency = 'BTC', value, depositMethodId }: {\n    value?: number,\n    currency?: string,\n    depositMethodId?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg: Object = {\n      MsgType: ActionMsgReq.DEPOSIT_REQUEST,\n      DepositReqID: reqId,\n      ClOrdID: reqId,\n      Currency: currency,\n      BrokerID: this.brokerId,\n    };\n\n    if (currency !== 'BTC') {\n      msg.DepositMethodID = depositMethodId;\n      msg.Value = value;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestDepositMethods(callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.DEPOSIT_METHODS,\n      DepositMethodReqID: generateRequestId(),\n      BrokerID: this.brokerId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestLedger({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    brokerId,\n    clientId,\n    currency,\n  }: {\n    page: number,\n    pageSize: number,\n    currency: string,\n    brokerId?: number,\n    clientId?: string,\n  } = {}, callback?: Function) {\n    const msg: Object = {\n      MsgType: ActionMsgReq.LEDGER_LIST,\n      LedgerListReqID: generateRequestId(),\n      BrokerID: this.brokerId,\n      Page,\n      PageSize,\n    };\n\n    if (brokerId) {\n      msg.BrokerID = brokerId;\n    }\n    if (currency) {\n      msg.Currency = currency;\n    }\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('LedgerListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n}\n\nexport default TradeBase;\n\n\n\n// WEBPACK FOOTER //\n// ./src/trade.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport Fingerprint2 from 'fingerprintjs2';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\n\nimport Transport from './transport';\n\nimport {\n  getRequest,\n  setRequest,\n  deleteRequest,\n  getListener,\n  getEventEmitter,\n} from '../listener';\n\nclass WebSocketTransport extends Transport {\n  /*\n   * WebSocket Instance\n   */\n  socket: WebSocket;\n\n  /*\n   * FingerPrint\n   */\n  fingerPrint: string;\n\n  /*\n   * Stun object\n   */\n  stuntip: Stun;\n\n  /*\n   * Transport Promise\n   */\n  request: Request;\n\n  /*\n   * Event emitter to dispatch websocket updates\n   */\n  eventEmitter: EventEmitter;\n\n  headers: Object;\n\n  constructor(params?: BlinkTradeWS = {}) {\n    super(params, 'ws');\n\n    this.stun = { local: null, public: [] };\n\n    this.getStun();\n    this.getFingerPrint(params.fingerPrint);\n    this.headers = params.headers;\n\n    this.eventEmitter = new EventEmitter({ wildcard: true, delimiter: ':' });\n  }\n\n  connect(callback?: Function): Promise<Object> {\n    return nodeify.extend(new Promise((resolve, reject) => {\n      this.request = { resolve, reject };\n\n      const WebSocket = this.isNode ? require('ws') : window.WebSocket;\n\n      this.socket = new WebSocket(this.endpoint, null, this.headers);\n      this.socket.onopen = this.onOpen.bind(this);\n      this.socket.onclose = this.onClose.bind(this);\n      this.socket.onerror = this.onError.bind(this);\n      this.socket.onmessage = this.onMessage.bind(this);\n    })).nodeify(callback);\n  }\n\n  disconnect(): void {\n    this.socket.close();\n  }\n\n  onOpen(): void {\n    this.request.resolve({ connected: true });\n  }\n\n  onClose(): void {\n  }\n\n  onError(error: any): void {\n    this.request.reject(error);\n  }\n\n  sendMessage(msg: Object): void {\n    if (this.socket.readyState === 1) {\n      const data = msg;\n\n      data.STUNTIP = this.stun;\n      data.FingerPrint = this.fingerPrint;\n\n      this.socket.send(JSON.stringify(data));\n    }\n  }\n\n  sendMessageAsPromise(msg: Object): Promise<Object> {\n    return new Promise((resolve, reject) => {\n      const promise = { resolve, reject };\n      setRequest(msg, { resolve, reject });\n      // We are passing the promise as a parameter to spy it in our tests\n      this.sendMessage(msg, promise);\n    });\n  }\n\n  onMessage(msg: Object): void {\n    const data = JSON.parse(msg.data);\n    if (data.MsgType === 'ERROR') {\n      throw new Error(`Error: ${data.Detail} ${data.Description}`);\n    }\n\n    const request = getRequest(data);\n    const emitter = getEventEmitter(data);\n    const listener = getListener(data.MsgType);\n\n    this.dispatchPromise(request, data);\n    this.dispatchEventEmitters(emitter, data);\n    this.dispatchListeners(listener, data);\n  }\n\n  dispatchPromise(request: ?Request, data: Object): any {\n    if (request && request.resolve) {\n      deleteRequest(data);\n      return request.resolve(data);\n    }\n  }\n\n  dispatchEventEmitters(emitter, data: Object): any {\n    if (emitter) {\n      return emitter(data);\n    }\n  }\n\n  dispatchListeners(listener: Function, data: Object): void {\n    return listener && listener(data);\n  }\n\n  getFingerPrint(customFingerprint?: string): void {\n    if (this.isNode) {\n      return require('../util/macaddress').getMac(macAddress => {\n        this.fingerPrint = macAddress;\n      });\n    } else if (this.isBrowser) {\n      return new Fingerprint2().get(fingerPrint => {\n        this.fingerPrint = Math.abs(require('../util/hash32').encodeByteArray(fingerPrint)).toString();\n      });\n    } else if (customFingerprint) {\n      this.fingerPrint = customFingerprint;\n    } else {\n      throw new Error('FingerPrint not provided');\n    }\n  }\n\n  getStun(): void {\n    if (this.isNode) {\n      require('../util/stun').getStun(data => {\n        this.stun = data;\n      });\n    }\n  }\n\n  /* eslint-disable no-param-reassign */\n  emitterPromise<T>(promise: Object, callback?: Function): PromiseEmitter<T> {\n    promise.on = (event: string, listener: Function) => {\n      this.eventEmitter.on(event, listener);\n      return promise;\n    };\n    promise.onAny = (listener: Function) => {\n      this.eventEmitter.onAny(listener);\n      return promise;\n    };\n    promise.offAny = (listener: Function) => {\n      this.eventEmitter.offAny(listener);\n      return promise;\n    };\n    promise.once = (event: string, listener: Function) => {\n      this.eventEmitter.once(event, listener);\n      return promise;\n    };\n    promise.many = (event: string, times: number, listener: Function) => {\n      this.eventEmitter.many(event, times, listener);\n      return promise;\n    };\n    promise.removeListener = (event: string, listener: Function) => {\n      this.eventEmitter.removeListener(event, listener);\n      return promise;\n    };\n    promise.removeAllListeners = (events: Array<string>) => {\n      this.eventEmitter.removeAllListeners(events);\n      return promise;\n    };\n\n    return nodeify.extend(promise).nodeify(callback);\n  }\n  /* eslint-enable no-param-reassign */\n}\n\nexport default WebSocketTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/websocket.js","module.exports = require(\"fingerprintjs2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fingerprintjs2\"\n// module id = 14\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport common from '../constants/common';\n\nclass Base {\n  /*\n   * url endpoint.\n   */\n  endpoint: string;\n\n  /*\n   * Broker id\n   */\n  brokerId: number;\n\n  /*\n   * Is node.js environment.\n   */\n  isNode: boolean;\n\n  /*\n   * Is browser environment.\n   */\n  isBrowser: boolean;\n\n  level: '1' | '2';\n\n  constructor(params: BlinkTradeBase = {}, env: BlinkTradeEnv) {\n    /* eslint-disable indent */\n    const endpoint =\n        params.url  ? params.url\n      : params.prod ? common.prod[env]\n      :               common.testnet[env];\n    /* eslint-enable indent */\n\n    this.endpoint = endpoint;\n\n    this.level = params.level || '2';\n    this.brokerId = params.brokerId || 5;\n\n    this.isNode    = typeof window === 'undefined';\n    this.isBrowser = typeof document !== 'undefined';\n  }\n}\n\nexport default Base;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/transport.js","export default {\n  prod: {\n    ws: 'wss://ws.blinktrade.com/trade/',\n    rest: 'https://api.blinktrade.com/',\n  },\n  testnet: {\n    ws: 'wss://api_testnet.blinktrade.com/trade/',\n    rest: 'https://api_testnet.blinktrade.com/',\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/common.js","module.exports = require(\"ws\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ws\"\n// module id = 17\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\n/* eslint-disable operator-assignment */\n/* eslint-disable no-plusplus */\n/* eslint-disable import/prefer-default-export */\n\nimport macaddress from 'macaddress';\n\nexport function getMac(callback: Function): void {\n  macaddress.all((err, all) => {\n    const hashCode = (str) => {\n      let hash = 0;\n      if (str.length === 0) return hash;\n      for (let i = 0; i < str.length; i++) {\n        hash = ((hash << 5) - hash) + str.charCodeAt(i);\n        hash = hash & hash; // Convert to 32bit integer\n      }\n      return hash;\n    };\n\n    let macAddresses = '';\n    Object.keys(all).forEach(iface => {\n      macAddresses += all[iface].mac;\n    });\n\n    let fingerPrint = hashCode(macAddresses);\n    if (fingerPrint < 0) {\n      fingerPrint *= -1;\n    }\n\n    callback(fingerPrint);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/macaddress.js","module.exports = require(\"macaddress\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"macaddress\"\n// module id = 19\n// module chunks = 0","/* eslint-disable no-var */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-fallthrough */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable default-case */\n/* eslint-disable prefer-destructuring */\n/*\n * ByteArray enconding from google-closure-library\n */\n\nconst SEED32 = 314159265;\nconst CONSTANT32 = -1640531527;\n\n/**\n * Performs an inplace mix of an object with the integer properties (a, b, c)\n * and returns the final value of c.\n * @param {Object} mix Object with properties, a, b, and c.\n * @return {number} The end c-value for the mixing.\n * @private\n */\nconst mix32_ = (mix) => {\n  var a = mix.a;\n  var b = mix.b;\n  var c = mix.c;\n  a -= b;\n  a -= c;\n  a ^= c >>> 13;\n  b -= c;\n  b -= a;\n  b ^= a << 8;\n  c -= a;\n  c -= b;\n  c ^= b >>> 13;\n  a -= b;\n  a -= c;\n  a ^= c >>> 12;\n  b -= c;\n  b -= a;\n  b ^= a << 16;\n  c -= a;\n  c -= b;\n  c ^= b >>> 5;\n  a -= b;\n  a -= c;\n  a ^= c >>> 3;\n  b -= c;\n  b -= a;\n  b ^= a << 10;\n  c -= a;\n  c -= b;\n  c ^= b >>> 15;\n  mix.a = a;\n  mix.b = b;\n  mix.c = c;\n  return c;\n};\n\n/**\n * Converts an unsigned \"byte\" to signed, that is, convert a value in the range\n * (0, 2^8-1) to (-2^7, 2^7-1) in order to be compatible with Java's byte type.\n * @param {number} n Unsigned \"byte\" value.\n * @return {number} Signed \"byte\" value.\n * @private\n */\nconst toSigned_ = (n) => {\n  return n > 127 ? n - 256 : n;\n};\n\nconst wordAt_ = (bytes, offset) => {\n  var a = toSigned_(bytes[offset + 0]);\n  var b = toSigned_(bytes[offset + 1]);\n  var c = toSigned_(bytes[offset + 2]);\n  var d = toSigned_(bytes[offset + 3]);\n  return a + (b << 8) + (c << 16) + (d << 24);\n};\n\n/**\n * Hashes a \"byte\" array to a 32-bit value using the supplied seed.\n */\nexport function encodeByteArray(bytes) {\n  var offset = 0;\n  var length = bytes.length;\n  var seed = SEED32;\n\n  var mix = {\n    a: CONSTANT32,\n    b: CONSTANT32,\n    c: seed,\n  };\n\n  var keylen;\n  for (keylen = length; keylen >= 12; keylen -= 12, offset += 12) {\n    mix.a += wordAt_(bytes, offset);\n    mix.b += wordAt_(bytes, offset + 4);\n    mix.c += wordAt_(bytes, offset + 8);\n    mix32_(mix);\n  }\n  // Hash any remaining bytes\n  mix.c += length;\n  switch (keylen) {  // deal with rest.  Some cases fall through\n    case 11:\n      mix.c += (bytes[offset + 10]) << 24;\n    case 10:\n      mix.c += (bytes[offset + 9] & 0xff) << 16;\n    case 9:\n      mix.c += (bytes[offset + 8] & 0xff) << 8;\n    // the first byte of c is reserved for the length\n    case 8:\n      mix.b += wordAt_(bytes, offset + 4);\n      mix.a += wordAt_(bytes, offset);\n      break;\n    case 7:\n      mix.b += (bytes[offset + 6] & 0xff) << 16;\n    case 6:\n      mix.b += (bytes[offset + 5] & 0xff) << 8;\n    case 5:\n      mix.b += (bytes[offset + 4] & 0xff);\n    case 4:\n      mix.a += wordAt_(bytes, offset);\n      break;\n    case 3:\n      mix.a += (bytes[offset + 2] & 0xff) << 16;\n    case 2:\n      mix.a += (bytes[offset + 1] & 0xff) << 8;\n    case 1:\n      mix.a += (bytes[offset + 0] & 0xff);\n      // case 0 : nothing left to add\n  }\n  return mix32_(mix);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/hash32.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-plusplus */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-restricted-properties */\n/* eslint-disable no-buffer-constructor */\n\nimport ip from 'ip';\nimport dgram from 'dgram';\n\nconst stunIp = { local: null, public: [] };\n\nfunction addIPAddress(ipAddress) {\n  if (ipAddress.match(/^(192\\.168\\.|169\\.254\\.|10\\.|172\\.(1[6-9]|2\\d|3[01]))/)) {\n    stunIp.local = ipAddress;\n  } else if (stunIp.public.indexOf(ipAddress) === -1) {\n    stunIp.public.push(ipAddress);\n  }\n}\n\nexport function getStun(callback) {\n  const socket = dgram.createSocket('udp4');\n\n  const STUN_HEADER_LENGTH = 20;\n  const stunRequest = new Buffer(STUN_HEADER_LENGTH);\n\n  const STUN_METHOD_REQUEST = 0x000;\n  const STUN_BINDING_CLASS = 0x0001;\n  const STUN_MAGIC_COOKIE = 0x2112A442;\n  const STUN_TID_MAX = Math.pow(2, 32);\n\n  const STUN_ATTR_MAPPED_ADDRESS = 0x0001;\n  const STUN_ATTR_XOR_MAPPED_ADDRESS = 0x8020;\n  const STUN_ATTR_XOR_MAPPED_ADDRESS_ALT = 0x0020;\n\n  const stunTxId = (Math.random() * STUN_TID_MAX);\n\n  const stunServers = [\n    [3478, 'stun.services.mozilla.com'],\n    [19302, 'stun.l.google.com'],\n    [3478, 'stun.stunprotocol.org'],\n    [3478, 'stun.softjoys.com'],\n    [3478, 'stun.samsungsmartcam.com'],\n    [3478, 'stun.sonetel.com'],\n    [3478, 'stun.tagan.ru'],\n    [3478, 'stun.voipgain.com'],\n    [3478, 'stunserver.org'],\n    [3478, 'stun.advfn.com'],\n    [3478, 'stun.annatel.net'],\n    [3478, 'stun.freevoipdeal.com'],\n  ];\n\n  stunRequest.writeUInt16BE(((STUN_BINDING_CLASS | STUN_METHOD_REQUEST) & 0x3fff), 0);\n  stunRequest.writeUInt16BE(0, 2);\n  stunRequest.writeUInt32BE(STUN_MAGIC_COOKIE, 4);\n  stunRequest.writeUInt32BE(0, 8);\n  stunRequest.writeUInt32BE(0, 12);\n  stunRequest.writeUInt32BE(stunTxId, 16);\n\n  socket.on('message', (msg) => {\n    const xor = (a, b) => {\n      const data = [];\n      if (b.length > a.length) {\n        const tmp = a;\n        a = b;\n        b = tmp;\n      }\n      for (let i = 0, len = a.length; i < len; i++) {\n        data.push(a[i] ^ b[i]);\n      }\n\n      return new Buffer(data);\n    };\n\n    const block = msg.readUInt8(0);\n    const bit1 = block & 0x80;\n    const bit2 = block & 0x40;\n\n    if (!(bit1 === 0 && bit2 === 0)) {\n      return;\n    }\n\n    const msgHeader = msg.slice(0, STUN_HEADER_LENGTH);\n    const msgAttrs = msg.slice(STUN_HEADER_LENGTH, msg.length);\n\n    let offset = 0;\n\n    while (offset < msgAttrs.length) {\n      const attrType = msgAttrs.readUInt16BE(offset);\n      offset += 2;\n\n      let attrBuffLength = msgAttrs.readUInt16BE(offset);\n      const blockOut = attrBuffLength % 4;\n      if (blockOut > 0) {\n        attrBuffLength += 4 - blockOut;\n      }\n      offset += 2;\n\n      const value = msgAttrs.slice(offset, offset + attrBuffLength);\n      offset += attrBuffLength;\n\n      let family;\n      let address;\n      switch (attrType) {\n        case STUN_ATTR_MAPPED_ADDRESS:\n          family = (value.readUInt16BE(0) === 0x02) ? 6 : 4;\n          address = ip.toString(value, 4, family);\n          addIPAddress(address);\n          break;\n\n        case STUN_ATTR_XOR_MAPPED_ADDRESS:\n        case STUN_ATTR_XOR_MAPPED_ADDRESS_ALT:\n          family = (value.readUInt16BE(0) === 0x02) ? 6 : 4;\n          const magic = msgHeader.slice(4, 8);\n          const tid = msgHeader.slice(8, 20);\n          const xaddr = value.slice(4, family === 4 ? 8 : 20);\n          const addr = xor(xaddr, family === 4 ? magic : value.concat([magic, tid]));\n          address = ip.toString(addr, 0, family);\n          addIPAddress(address);\n          break;\n        default:\n      }\n    }\n\n    callback(stunIp);\n  });\n\n  stunServers.map(([port, host]) => socket.send(stunRequest, 0, stunRequest.length, port, host, () => {}));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/stun.js","module.exports = require(\"ip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ip\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"dgram\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dgram\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 24\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport RestTransport from './transports/rest';\nimport TradeBase from './trade';\n\nclass BlinkTradeRest extends TradeBase {\n  constructor(params?: BlinkTradeBase) {\n    super(params);\n    this.transport = params.transport || new RestTransport(params);\n  }\n\n  send(path) {\n    return this.transport.fetchTrade(path);\n  }\n\n  fetchPublic(path) {\n    return this.transport.fetchPublic(path);\n  }\n\n  ticker(callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic('ticker')).nodeify(callback);\n  }\n\n  trades({ limit = 100, since = 0 }: {\n    limit: number,\n    since: number,\n  } = {}, callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic(`trades?limit=${limit}&since=${since}`)).nodeify(callback);\n  }\n\n  orderbook(callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic('orderbook')).nodeify(callback);\n  }\n}\n\nexport default BlinkTradeRest;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rest.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport url from 'url';\nimport sjcl from 'sjcl';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nimport Transport from './transport';\n\nconst { fetch } = fetchPonyfill(Promise);\n\nclass RestTransport extends Transport {\n  /**\n   * APIKey\n   */\n  key: string;\n\n  /**\n   * APISecret\n   */\n  secret: string;\n\n  /**\n   * Exchanges currencies available.\n   */\n  currency: 'USD' | 'BRL' | 'VEF' | 'CLP' | 'VND' | 'PKR';\n\n  constructor(params: BlinkTradeRest) {\n    super(params, 'rest');\n\n    this.key = params.key;\n    this.secret = params.secret;\n    this.currency = params.currency || 'USD';\n  }\n\n  headers(method: string, body: Object): Object {\n    const timeStamp = Date.now().toString();\n    const hexKey = sjcl.codec.utf8String.toBits(this.secret);\n    const hmac = new sjcl.misc.hmac(hexKey, sjcl.hash.sha256);\n    const Signature = sjcl.codec.hex.fromBits(hmac.encrypt(timeStamp));\n    return {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n        Nonce: timeStamp,\n        APIKey: this.key,\n        Signature,\n      },\n      body: JSON.stringify(body),\n    };\n  }\n\n  fetch(msg: Object, api: string, headers?: Object = {}): Promise<Object> {\n    return fetch(url.resolve(this.endpoint, api), headers)\n      .then(response => response.json());\n  }\n\n  fetchPublic(api: string): Promise<Object> {\n    return this.fetch({}, `api/v1/${this.currency}/${api}`);\n  }\n\n  fetchTrade(msg: Object): Promise<Object> {\n    const headers = this.headers('POST', msg);\n    return this.fetch(msg, 'tapi/v1/message', headers)\n      .then(response => (response.Status === 500 ? Promise.reject(response) : response.Responses))\n      .then(response => (response.length === 1 ? response[0] : response));\n  }\n}\n\nexport default RestTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/rest.js","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"sjcl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sjcl\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"fetch-ponyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fetch-ponyfill\"\n// module id = 29\n// module chunks = 0"],"sourceRoot":""}