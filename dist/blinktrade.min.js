!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BlinkTradeRest=t.BlinkTradeWS=t.Brokers=void 0;var o=r(1),i=n(o),u=r(2),s=n(u),a=r(25),f=n(a);t.Brokers=i["default"],t.BlinkTradeWS=s["default"],t.BlinkTradeRest=f["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={SURBITCOIN:1,VBTC:3,FOXBIT:4,TESTNET:5,URDUBIT:8,CHILEBIT:9}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r={};for(var n in e)t.indexOf(n)<0&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=function b(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)},p=r(3),d=o(p),y=r(4),g=n(y),E=r(5),_=o(E),v=(r(13),r(9)),R=r(24),T=function(e){function t(e){s(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.session={},r}return f(t,e),l(t,[{key:"heartbeat",value:function(e){var r=this,n=new Date,o={MsgType:d["default"].HEARTBEAT,TestReqID:n.getTime(),SendTime:n.getTime()};return new Promise(function(n,i){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",r).call(r,o,e).then(function(e){return n(c({},e,{Latency:new Date(Date.now())-e.SendTime}))})["catch"](i)})}},{key:"login",value:function(e,r){var n=this,o=e.username,i=e.password,u=e.secondFactor,s=void 0;this.isNode||(s={UserAgent:window.navigator.userAgent,UserAgentLanguage:window.navigator.language,UserAgentPlatform:window.navigator.platform,UserAgentTimezoneOffset:(new Date).getTimezoneOffset()});var a=c({MsgType:d["default"].LOGIN,UserReqID:(0,v.generateRequestId)(),BrokerID:this.brokerId,Username:o,Password:i,UserReqTyp:"1"},s);return u&&(a.SecondFactor=u),new Promise(function(e,o){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",n).call(n,a,r).then(function(t){return 1===t.UserStatus?(n.session=t,e(t)):o(t)})["catch"](o)})}},{key:"logout",value:function(e){var r={MsgType:d["default"].LOGOUT,BrokerID:this.brokerId,UserReqID:(0,v.generateRequestId)(),Username:this.session.Username,UserReqTyp:"2"};return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",this).call(this,r,e)}},{key:"profile",value:function r(e){var t=this.session.Profile,r=u(t,["VerificationData"]);return e?e(r):Promise.resolve(r)}},{key:"balance",value:function(e){var r=this,n={MsgType:d["default"].BALANCE,BalanceReqID:(0,v.generateRequestId)()};return(0,v.registerListener)("U3",function(t){return e&&e(null,t),r.eventEmitter.emit(R.BALANCE,t)}),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(o,i){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",r).call(r,n,e).then(function(e){var t={},n=e[r.brokerId];return Object.keys(n).map(function(e){return e.includes("locked")||(t[e]=n[e]-n[e+"_locked"]),t}),o(c({},e,{Available:t}))})["catch"](i)}))}},{key:"subscribeTicker",value:function(e,r){var n=this,o={MsgType:d["default"].SECURITY_STATUS,SecurityStatusReqID:(0,v.generateRequestId)(),SubscriptionRequestType:"1",Instruments:e},i=function(e){return c({},e,{SellVolume:e.SellVolume/1e8,LowPx:e.LowPx/1e8,LastPx:e.LastPx/1e8,BestAsk:e.BestAsk/1e8,HighPx:e.HighPx/1e8,BuyVolume:e.BuyVolume/1e8,BestBid:e.BestBid/1e8})};return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(e,u){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",n).call(n,o,r).then(function(t){e(i(t)),(0,v.registerEventEmitter)({SecurityStatusReqID:t.SecurityStatusReqID},function(e){return r&&r(null,i(e)),n.eventEmitter.emit("BLINK:"+t.Symbol,i(e))})})["catch"](u)}))}},{key:"unSubscribeTicker",value:function(e){var r={MsgType:d["default"].SECURITY_STATUS,SecurityStatusReqID:e,SubscriptionRequestType:"2"};return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessage",this).call(this,r),e}},{key:"subscribeOrderbook",value:function(e,r){var n=this,o={MsgType:d["default"].MARKET_DATA_FULL_REFRESH,MDReqID:(0,v.generateRequestId)(),SubscriptionRequestType:"1",MarketDepth:0,MDUpdateType:"1",MDEntryTypes:["0","1","2"],Instruments:e},u=function(e){"3"===e.MDBkTyp&&e.MDIncGrp.map(function(e){var t={index:e.MDEntryPositionNo,price:e.MDEntryPx/1e8,size:e.MDEntrySize/1e8,side:"0"===e.MDEntryType?"buy":"sell",userId:e.UserID,orderId:e.OrderID,symbol:e.Symbol,time:""+new Date(e.MDEntryDate+" "+e.MDEntryTime)};switch(r&&r(null,t),e.MDEntryType){case"0":case"1":var o=R.EVENTS.ORDERBOOK[e.MDUpdateAction];return n.eventEmitter.emit(o,c({},t,{type:o}));case"2":var i=R.EVENTS.TRADES[e.MDUpdateAction];return n.eventEmitter.emit(i,c({},t,{type:i}));case"4":break;default:return null}return null})};return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(e,s){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",n).call(n,o,r).then(function(t){if("W"===t.MsgType){var r=t.MDFullGrp.filter(function(e){return"0"===e.MDEntryType||"1"===e.MDEntryType}).reduce(function(e,t){var r="0"===t.MDEntryType?"bids":"asks";return(e[r]||(e[r]=[])).push([t.MDEntryPx/1e8,t.MDEntrySize/1e8,t.UserID]),e},[]),n=r.bids,o=r.asks;return(0,v.registerEventEmitter)({MDReqID:t.MDReqID},u),e(c({},t,{MDFullGrp:i({},t.Symbol,{bids:n,asks:o})}))}})["catch"](function(e){return s(e)})}))}},{key:"unSubscribeOrderbook",value:function(e){var r={MsgType:d["default"].MARKET_DATA_UNSUBSCRIBE,MDReqID:e,MarketDepth:0,SubscriptionRequestType:"2"};return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessage",this).call(this,r),e}},{key:"sendOrder",value:function(e,r){var n=this,o=e.side,i=e.amount,u=e.price,s=e.symbol,a={MsgType:d["default"].ORDER_SEND,ClOrdID:(0,v.generateRequestId)(),Symbol:s,Side:o,OrdType:"2",Price:u,OrderQty:i,BrokerID:this.brokerId};return new Promise(function(e,o){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",n).call(n,a,r).then(function(t){(0,v.deleteRequest)(g.CLIENT_ORDER_ID),e(t)})["catch"](o)})}},{key:"cancelOrder",value:function(e,r){var n=e.orderId?e.orderId:e,o={MsgType:d["default"].ORDER_CANCEL,OrderID:n};return e.clientId&&(o.ClOrdID=e.clientId),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",this).call(this,o,r)}},{key:"myOrders",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=void 0===n?0:n,i=r.pageSize,s=void 0===i?40:i,a=arguments[1],f={MsgType:d["default"].ORDER_LIST,OrdersReqID:(0,v.generateRequestId)(),Page:o,PageSize:s};return new Promise(function(r,n){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",e).call(e,f,a).then(function(e){var t=u(e,["Columns"]),n=[];return e.OrdListGrp.map(function(e){return n.push({ClOrdID:e[0],OrderID:e[1],CumQty:e[2],OrdStatus:e[3],LeavesQty:e[4],CxlQty:e[5],AvgPx:e[6],Symbol:e[7],Side:e[8],OrdType:e[9],OrderQty:e[10],Price:e[11],OrderDate:e[12],Volume:e[13],TimeInForce:e[14]})}),r(c({},t,{OrdListGrp:n}))})["catch"](n)})}},{key:"executionReport",value:function(e){var t=this;return(0,v.registerListener)("8",function(r){return e&&e(r),t.eventEmitter.emit(R.EVENTS.EXECUTION_REPORT[r.ExecType],r)}),this.eventEmitter}},{key:"tradeHistory",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=void 0===n?0:n,i=r.pageSize,s=void 0===i?80:i,a=arguments[1],f={MsgType:d["default"].TRADE_HISTORY,TradeHistoryReqID:(0,v.generateRequestId)(),Page:o,PageSize:s};return new Promise(function(r,n){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",e).call(e,f,a).then(function(e){var t=0,n=!1,o=u(e,["Columns"]),i={};return e.TradeHistoryGrp.reverse().map(function(e){return n=t===e[3]?n:e[3]>=t,t=e[3],i[e[1]]=i[e[1]]||[],i[e[1]].unshift({TradeID:e[0],Market:e[1],Side:e[2],Price:e[3],Size:e[4],Buyer:e[5],Seller:e[6],Created:e[7],IsPump:n})}),r(c({},o,{TradeHistoryGrp:i}))})["catch"](n)})}}]),t}(_["default"]);t["default"]=T},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={HEARTBEAT:"1",LOGIN:"BE",LOGOUT:"BE",CHANGE_PASSWORD:"BE",MARKET_DATA_FULL_REFRESH:"V",MARKET_DATA_UNSUBSCRIBE:"V",ORDER_SEND:"D",ORDER_CANCEL:"F",SECURITY_LIST:"x",SECURITY_STATUS:"e",BALANCE:"U2",ORDER_LIST:"U4",BROKER_LIST:"U28",TRADE_HISTORY:"U32",PROFILE_UPDATE:"U38",REQUEST_DEPOSIT:"U18",REQUEST_WITHDRAW:"U6",REQUEST_WITHDRAW_LIST:"U26"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SOCKET_ID="SocketID",t.REQUEST_ID="ReqID",t.TEST_REQUEST_ID="TestReqID",t.USER_REQUEST_ID="UserReqID",t.SECURITY_REQUEST_ID="SecurityReqID",t.RESET_PASSWORD_REQUEST_ID="ResetPasswordReqID",t.DEPOSIT_REQUEST_ID="DepositReqID",t.WITHDRAW_REQUEST_ID="WithdrawReqID",t.BALANCE_REQUEST_ID="BalanceReqID",t.ORDERS_REQUEST_ID="OrdersReqID",t.ENABLE_TWO_FACTOR_REQUEST_ID="EnableTwoFactorReqID",t.DEPOSIT_METHOD_REQUEST_ID="DepositMethodReqID",t.WITHDRAW_LIST_REQUEST_ID="WithdrawListReqID",t.BROKER_LIST_REQUEST_ID="BrokerListReqID",t.DEPOSIT_LIST_REQUEST_ID="DepositListReqID",t.TRADE_HISTORY_REQUEST_ID="TradeHistoryReqID",t.LEDGER_LIST_REQUEST_ID="LedgerListReqID",t.TRADERS_RANK_REQUEST_ID="TradersRankReqID",t.UPDATE_REQUEST_ID="UpdateReqID",t.POSITION_REQUEST_ID="PositionReqID",t.SECURITY_STATUS_REQUEST_ID="SecurityStatusReqID",t.API_KEY_LIST_REQUEST_ID="APIKeyListReqID",t.API_KEY_CREATE_REQUEST_ID="APIKeyCreateReqID",t.API_KEY_REVOKE_REQUEST_ID="APIKeyRevokeReqID",t.PROCESS_DEPOSIT_REQUEST_ID="ProcessDepositReqID",t.CUSTOMER_LIST_REQUEST_ID="CustomerListReqID",t.CUSTOMER_REQUEST_ID="CustomerReqID",t.PROCESS_WITHDRAW_REQUEST_ID="ProcessWithdrawReqID",t.VERIFY_CUSTOMER_REQUEST_ID="VerifyCustomerReqID",t.MD_REQUEST_ID="MDReqID",t.CLIENT_ORDER_ID="ClOrdID"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(6),f=n(a),c=r(11),l=n(c),h=r(12),p=n(h),d=r(13),y=r(9),g=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"ws"));return r.stun={local:null,"public":[]},r.getStun(),r.getFingerPrint(),r.eventEmitter=new d.EventEmitter,r}return u(t,e),s(t,[{key:"connect",value:function(e){var t=this;return p["default"].extend(new Promise(function(e,n){t.request={resolve:e,reject:n};var o=t.isNode?r(14):window.WebSocket;t.socket=new o(t.endpoint),t.socket.onopen=t.onOpen.bind(t),t.socket.onclose=t.onClose.bind(t),t.socket.onerror=t.onError.bind(t),t.socket.onmessage=t.onMessage.bind(t)})).nodeify(e)}},{key:"disconnect",value:function(){this.socket.close()}},{key:"onOpen",value:function(){this.request.resolve({connected:!0})}},{key:"onClose",value:function(){}},{key:"onError",value:function(){this.request.reject()}},{key:"sendMessage",value:function(e){if(1===this.socket.readyState){var t=e;t.STUNTIP=this.stun,t.FingerPrint=this.fingerPrint,this.socket.send(JSON.stringify(t))}}},{key:"sendMessageAsPromise",value:function(e,t){var r=this;return p["default"].extend(new Promise(function(t,n){var o={resolve:t,reject:n};return e?((0,y.registerRequest)(e,o),void r.sendMessage(e,o)):n("Missing Message")})).nodeify(t)}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);if("ERROR"===t.MsgType)throw Error("Error: "+t.Detail+" "+t.Description);var r=(0,y.getRequest)(t),n=(0,y.getListener)(t.MsgType);this.dispatchPromise(r,t),this.dispatchListeners(n,t)}},{key:"dispatchPromise",value:function(e,t){if(e)return e.resolve?e.resolve(t):e.callback?e.callback(t):null}},{key:"dispatchListeners",value:function(e,t){return e&&e(t)}},{key:"emitterPromise",value:function(e){var t=this;return e.on=function(r,n){return t.eventEmitter.on(r,n),e},e}},{key:"getFingerPrint",value:function(){var e=this;return this.isNode?r(15).getMac(function(t){e.fingerPrint=t}):(new l["default"]).get(function(t){e.fingerPrint=t})}},{key:"getStun",value:function(){var e=this;this.isNode&&r(17).getStun(function(t){e.stun=t})}}]),t}(f["default"]);t["default"]=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var r={};for(var n in e)t.indexOf(n)<0&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(7),l=n(c),h=r(3),p=n(h),d=r(9),y=function(e){function t(e,r){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.env=r,n.send="ws"===r?n.sendMessageAsPromise:n.fetchTrade,n}return s(t,e),f(t,[{key:"listWithdraws",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=void 0===r?0:r,i=t.pageSize,u=void 0===i?20:i,s=t.statusList,f=void 0===s?["1","2","4","8"]:s,c=arguments[1],l={MsgType:p["default"].REQUEST_WITHDRAW_LIST,WithdrawListReqID:(0,d.generateRequestId)(),Page:n,PageSize:u,StatusList:f};return new Promise(function(t,r){return e.send(l,c).then(function(e){var r=o(e,["Columns"]),n=[];return e.WithdrawListGrp.map(function(e){return n.push({WithdrawID:e[0],Method:e[1],Currency:e[2],Amount:e[3],Data:e[4],Created:e[5],Status:e[6],ReasonID:e[7],Reason:e[8],PercentFee:e[9],FixedFee:e[10],PaidAmount:e[11],UserID:e[12],Username:e[13],BrokerID:e[14],ClOrdID:e[15]})}),t(a({},r,{WithdrawListGrp:n}))})["catch"](r)})}},{key:"requestWithdraw",value:function(e,t){var r=e.amount,n=e.data,o=e.currency,i=void 0===o?"BTC":o,u=e.method,s=void 0===u?"bitcoin":u,a={MsgType:p["default"].REQUEST_WITHDRAW,WithdrawReqID:(0,d.generateRequestId)(),Method:s,Amount:r,Currency:i,Data:n};return this.send(a,t)}},{key:"requestDeposit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currency,r=void 0===t?"BTC":t,n=e.value,o=e.depositMethodId,i=arguments[1],u={MsgType:p["default"].REQUEST_DEPOSIT,DepositReqID:(0,d.generateRequestId)(),Currency:r,BrokerID:this.brokerId};return"BTC"!==r&&(u.DepositMethodID=o,u.Value=n),this.send(u,i)}}]),t}(l["default"]);t["default"]=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),u=n(i),s=function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];o(this,a);var r=e.url?e.url:e.prod?u["default"].prod[t]:u["default"].testnet[t];this.brokerId=e.brokerId||5,this.endpoint=r,this.isNode="undefined"==typeof window};t["default"]=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={prod:{ws:"wss://api.blinktrade.com/trade/",rest:"https://api.blinktrade.com/"},testnet:{ws:"wss://api.testnet.blinktrade.com/trade/",rest:"https://api.testnet.blinktrade.com/"}}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){return _}function u(){return parseInt(1e7*Math.random()+"",10)}function s(e){return v[e]}function a(e){var t=void 0;return y["default"].mapKeys(E,function(r){y["default"].has(e,r)&&(t=y["default"].find(_[r],{ReqId:""+e[r]}))}),t}function f(e,t){return y["default"].mapKeys(E,function(r){y["default"].has(e,r)&&(_[r]=_[r]||[],_[r].push(p({ReqId:""+e[r]},t)))}),_}function c(e,t){return y["default"].mapKeys(E,function(r){if(y["default"].has(e,r)&&_[r]!==[]){var n=y["default"].findIndex(_[r],{ReqId:""+e[r]});_[r][n]=p({},_[r][n],{resolve:null,reject:null,callback:t})}}),_}function l(e,t){v[e]=v[e]||[],v[e]=t}function h(e){return _=y["default"].omit(_,[e])}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.getListeners=i,t.generateRequestId=u,t.getListener=s,t.getRequest=a,t.registerRequest=f,t.registerEventEmitter=c,t.registerListener=l,t.deleteRequest=h;var d=r(10),y=o(d),g=r(4),E=n(g),_={},v={}},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("fingerprintjs2")},function(e,t){e.exports=require("nodeify")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("ws")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){u["default"].all(function(t,r){var n=function(e){var t=0;if(0===e.length)return t;for(var r=0;e.length>r;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},o="";Object.keys(r).forEach(function(e){o+=r[e].mac});var i=n(o);0>i&&(i*=-1),e(i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getMac=o;var i=r(16),u=n(i)},function(e,t){e.exports=require("macaddress")},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){e.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?l.local=e:l["public"].indexOf(e)===-1&&l["public"].push(e)}function i(t){var r=c["default"].createSocket("udp4"),n=20,i=new e(n),s=0,f=1,h=554869826,p=Math.pow(2,32),d=1,y=32800,g=32,E=Math.random()*p,_=[[3478,"stun.services.mozilla.com"],[19302,"stun.l.google.com"],[3478,"stun.stunprotocol.org"],[3478,"stun.softjoys.com"],[3478,"stun.samsungsmartcam.com"],[3478,"stun.sonetel.com"],[3478,"stun.tagan.ru"],[3478,"stun.voipgain.com"],[3478,"stunserver.org"],[3478,"stun.advfn.com"],[3478,"stun.annatel.net"],[3478,"stun.freevoipdeal.com"]];i.writeUInt16BE(16383&(f|s),0),i.writeUInt16BE(0,2),i.writeUInt32BE(h,4),i.writeUInt32BE(0,8),i.writeUInt32BE(0,12),i.writeUInt32BE(E,16),r.on("message",function(r){var i=function(t,r){var n=[];if(r.length>t.length){var o=t;t=r,r=o}for(var i=0,u=t.length;u>i;i++)n.push(t[i]^r[i]);return new e(n)},u=r.readUInt8(0),s=128&u,f=64&u;if(0===s&&0===f){for(var c=r.slice(0,n),h=r.slice(n,r.length),p=0;h.length>p;){var E=h.readUInt16BE(p);p+=2;var _=h.readUInt16BE(p),v=_%4;v>0&&(_+=4-v),p+=2;var R=h.slice(p,p+_);p+=_;var T=void 0,b=void 0;switch(E){case d:T=2===R.readUInt16BE(0)?6:4,b=a["default"].toString(R,4,T),o(b);break;case y:case g:T=2===R.readUInt16BE(0)?6:4;var O=c.slice(4,8),w=c.slice(8,20),I=R.slice(4,4===T?8:20),m=i(I,4===T?O:R.concat([O,w]));b=a["default"].toString(m,0,T),o(b)}}t(l)}}),_.map(function(e){var t=u(e,2),n=t[0],o=t[1];return r.send(i,0,i.length,n,o)})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(a){o=!0,i=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getStun=i;var s=r(22),a=n(s),f=r(23),c=n(f),l={local:null,"public":[]}}).call(t,r(18).Buffer)},function(e,t,r){(function(e,n){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(i()<r)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r),t.__proto__=e.prototype):(null===t&&(t=new e(r)),t.length=r),t}function e(t,r,n){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,r,n);if("number"==typeof t){if("string"==typeof r)throw Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,n)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,r,n):"string"==typeof t?l(e,t,r):d(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function f(e,t,r,n){return a(t),t>0&&void 0!==r?"string"==typeof n?u(e,t).fill(r,n):u(e,t).fill(r):u(e,t)}function c(t,r){if(a(r),t=u(t,0>r?0:0|y(r)),!e.TYPED_ARRAY_SUPPORT)for(var n=0;r>n;++n)t[n]=0;return t}function l(t,r,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|E(r,n);t=u(t,o);var i=t.write(r,n);return i!==o&&(t=t.slice(0,i)),t}function h(e,t){var r=0>t.length?0:0|y(t.length);e=u(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function p(t,r,n,o){if(0>n||n>r.byteLength)throw new RangeError("'offset' is out of bounds");if(n+(o||0)>r.byteLength)throw new RangeError("'length' is out of bounds");return r=void 0===n&&void 0===o?new Uint8Array(r):void 0===o?new Uint8Array(r,n):new Uint8Array(r,n,o),e.TYPED_ARRAY_SUPPORT?(t=r,t.__proto__=e.prototype):t=h(t,r),t}function d(t,r){if(e.isBuffer(r)){var n=0|y(r.length);return t=u(t,n),0===t.length?t:(r.copy(t,0,0,n),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||G(r.length)?u(t,0):h(t,r);if("Buffer"===r.type&&Z(r.data))return h(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function E(t,r){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(o)return H(t).length;r=(""+r).toLowerCase(),o=!0}}function _(e,t,r){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if(r>>>=0,t>>>=0,t>=r)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return B(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function R(t,r,n,o,i){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),0>n&&(n=t.length+n),t.length>n){if(0>n){if(!i)return-1;n=0}}else{if(i)return-1;n=t.length-1}if("string"==typeof r&&(r=e.from(r,o)),e.isBuffer(r))return 0===r.length?-1:T(t,r,n,o,i);if("number"==typeof r)return r=255&r,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):T(t,[r],n,o,i);throw new TypeError("val must be string, number or Buffer")}function T(e,t,r,n,o){function i(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}var u=1,s=e.length,a=t.length;if(void 0!==n&&(n=(n+"").toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;u=2,s/=2,a/=2,r/=2}var f;if(o){var c=-1;for(f=r;s>f;f++)if(i(e,f)===i(t,c===-1?0:f-c)){if(c===-1&&(c=f),f-c+1===a)return c*u}else c!==-1&&(f-=f-c),c=-1}else for(r+a>s&&(r=s-a),f=r;f>=0;f--){for(var l=!0,h=0;a>h;h++)if(i(e,f+h)!==i(t,h)){l=!1;break}if(l)return f}return-1}function b(e,t,r,n){r=+r||0;var o=e.length-r;n?(n=+n,n>o&&(n=o)):n=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var u=0;n>u;++u){var s=parseInt(t.substr(2*u,2),16);if(isNaN(s))return u;e[r+u]=s}return u}function O(e,t,r,n){return X(H(t,e.length-r),e,r,n)}function w(e,t,r,n){return X(K(t),e,r,n)}function I(e,t,r,n){return w(e,t,r,n)}function m(e,t,r,n){return X(V(t),e,r,n)}function D(e,t,r,n){return X(z(t,e.length-r),e,r,n)}function P(e,t,r){return J.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;r>o;){var i=e[o],u=null,s=i>239?4:i>223?3:i>191?2:1;if(r>=o+s){var a,f,c,l;switch(s){case 1:128>i&&(u=i);break;case 2:a=e[o+1],128===(192&a)&&(l=(31&i)<<6|63&a,l>127&&(u=l));break;case 3:a=e[o+1],f=e[o+2],128===(192&a)&&128===(192&f)&&(l=(15&i)<<12|(63&a)<<6|63&f,l>2047&&(55296>l||l>57343)&&(u=l));break;case 4:a=e[o+1],f=e[o+2],c=e[o+3],128===(192&a)&&128===(192&f)&&128===(192&c)&&(l=(15&i)<<18|(63&a)<<12|(63&f)<<6|63&c,l>65535&&1114112>l&&(u=l))}}null===u?(u=65533,s=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=s}return A(n)}function A(e){var t=e.length;if(ee>=t)return String.fromCharCode.apply(String,e);for(var r="",n=0;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function U(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;++o)n+=String.fromCharCode(127&e[o]);return n}function B(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;++o)n+=String.fromCharCode(e[o]);return n}function M(e,t,r){var n=e.length;t&&t>=0||(t=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=t;r>i;++i)o+=F(e[i]);return o}function k(e,t,r){for(var n=e.slice(t,r),o="",i=0;n.length>i;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function C(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,r,n,o,i,u){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||u>r)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function L(e,t,r,n){0>t&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);i>o;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function q(e,t,r,n){0>t&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);i>o;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function x(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function N(e,t,r,n,o){return o||x(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,r,n,23,4),r+4}function Y(e,t,r,n,o){return o||x(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,r,n,52,8),r+8}function Q(e){if(e=W(e).replace(te,""),2>e.length)return"";for(;e.length%4!==0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],u=0;n>u;++u){if(r=e.charCodeAt(u),r>55295&&57344>r){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(u+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(56320>r){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,128>r){if((t-=1)<0)break;i.push(r)}else if(2048>r){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(r>=1114112)throw Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function K(e){for(var t=[],r=0;e.length>r;++r)t.push(255&e.charCodeAt(r));return t}function z(e,t){for(var r,n,o,i=[],u=0;e.length>u&&(t-=2)>=0;++u)r=e.charCodeAt(u),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function V(e){return J.toByteArray(Q(e))}function X(e,t,r,n){for(var o=0;n>o&&(o+r<t.length&&o<e.length);++o)t[o+r]=e[o];return o}function G(e){return e!==e}var J=r(19),$=r(20),Z=r(21);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=i(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,r){return s(null,e,t,r)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,r){return f(null,e,t,r)},e.allocUnsafe=function(e){return c(null,e)},e.allocUnsafeSlow=function(e){return c(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,o=r.length,i=0,u=Math.min(n,o);u>i;++i)if(t[i]!==r[i]){n=t[i],o=r[i];break}return o>n?-1:n>o?1:0},e.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;t.length>n;++n)r+=t[n].length;var o=e.allocUnsafe(r),i=0;for(n=0;t.length>n;++n){var u=t[n];if(!e.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(o,i),i+=u.length}return o},e.byteLength=E,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)v(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):_.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,r,n,o,i){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),0>r||n>t.length||0>o||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===t)return 0;for(var u=i-o,s=n-r,a=Math.min(u,s),f=this.slice(o,i),c=t.slice(r,n),l=0;a>l;++l)if(f[l]!==c[l]){u=f[l],s=c[l];break}return s>u?-1:u>s?1:0},e.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},e.prototype.indexOf=function(e,t,r){return R(this,e,t,r,!0)},e.prototype.lastIndexOf=function(e,t,r){return R(this,e,t,r,!1)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return O(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return I(this,e,t,r);case"base64":return m(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>r?(r+=n,0>r&&(r=0)):r>n&&(r=n),t>r&&(r=t);var o;if(e.TYPED_ARRAY_SUPPORT)o=this.subarray(t,r),o.__proto__=e.prototype;else{var i=r-t;o=new e(i,(void 0));for(var u=0;i>u;++u)o[u]=this[u+t]}return o},e.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},e.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},e.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,o>n||(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||C(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,o>i||(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),$.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),$.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),$.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),$.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var o=Math.pow(2,8*r)-1;j(this,e,t,r,o,0)}var i=1,u=0;for(this[t]=255&e;++u<r&&(i*=256);)this[t+u]=e/i&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var o=Math.pow(2,8*r)-1;j(this,e,t,r,o,0)}var i=r-1,u=1;for(this[t+i]=255&e;--i>=0&&(u*=256);)this[t+i]=e/u&255;return t+r},e.prototype.writeUInt8=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},e.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):L(this,t,r,!0),r+2},e.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):L(this,t,r,!1),r+2},e.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):q(this,t,r,!0),r+4},e.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):q(this,t,r,!1),r+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var o=Math.pow(2,8*r-1);j(this,e,t,r,o-1,-o)}var i=0,u=1,s=0;for(this[t]=255&e;++i<r&&(u*=256);)0>e&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/u>>0)-s&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var o=Math.pow(2,8*r-1);j(this,e,t,r,o-1,-o)}var i=r-1,u=1,s=0;for(this[t+i]=255&e;--i>=0&&(u*=256);)0>e&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/u>>0)-s&255;return t+r},e.prototype.writeInt8=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[r]=255&t,r+1},e.prototype.writeInt16LE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):L(this,t,r,!0),r+2},e.prototype.writeInt16BE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):L(this,t,r,!1),r+2},e.prototype.writeInt32LE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):q(this,t,r,!0),r+4},e.prototype.writeInt32BE=function(t,r,n){return t=+t,r=0|r,n||j(this,t,r,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):q(this,t,r,!1),r+4},e.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return Y(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return Y(this,e,t,!1,r)},e.prototype.copy=function(t,r,n,o){if(n||(n=0),o||0===o||(o=this.length),t.length>r||(r=t.length),r||(r=0),o>0&&n>o&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(0>r)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),o-n>t.length-r&&(o=t.length-r+n);var i,u=o-n;if(this===t&&r>n&&o>r)for(i=u-1;i>=0;--i)t[i+r]=this[i+n];else if(1e3>u||!e.TYPED_ARRAY_SUPPORT)for(i=0;u>i;++i)t[i+r]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+u),r);return u},e.prototype.fill=function(t,r,n,o){if("string"==typeof t){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===t.length){var i=t.charCodeAt(0);256>i&&(t=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!e.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t=255&t);if(0>r||r>this.length||n>this.length)throw new RangeError("Out of range index");if(r>=n)return this;r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var u;if("number"==typeof t)for(u=r;n>u;++u)this[u]=t;else{var s=e.isBuffer(t)?t:H(""+new e(t,o)),a=s.length;for(u=0;n-r>u;++u)this[u+r]=s[u%a]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,r(18).Buffer,function(){return this}())},function(e,t){e.exports=require("base64-js")},function(e,t){e.exports=require("ieee754")},function(e,t){e.exports=require("isarray")},function(e,t){e.exports=require("ip")},function(e,t){},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.BALANCE="BALANCE",t.TRADE_NEW="OB_TRADE_NEW"),n=t.ORDER_BOOK_NEW_ORDER="OB_NEW_ORDER",o=t.ORDER_BOOK_UPDATE_ORDER="OB_UPDATE_ORDER",i=t.ORDER_BOOK_DELETE_ORDER="OB_DELETE_ORDER",u=t.ORDER_BOOK_DELETE_ORDERS_THRU="OB_DELETE_ORDERS_THRU",s=t.EXECUTION_REPORT_NEW="EXECUTION_REPORT_NEW",a=t.EXECUTION_REPORT_PARTIAL="EXECUTION_REPORT_PARTIAL",f=t.EXECUTION_REPORT_EXECUTION="EXECUTION_REPORT_EXECUTION",c=t.EXECUTION_REPORT_CANCELED="EXECUTION_REPORT_CANCELED",l=t.EXECUTION_REPORT_REJECTED="EXECUTION_REPORT_REJECTED";t.EVENTS={ORDERBOOK:{0:n,1:o,2:i,3:u},TRADES:{0:r},EXECUTION_REPORT:{0:s,1:a,2:f,4:c,8:l}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function p(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)},f=r(3),c=(n(f),r(26)),l=n(c),h=(r(9),function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"ticker",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetchPublic",this).call(this,"ticker",e)}},{key:"trades",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,r=arguments[1],n=arguments[2];return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetchPublic",this).call(this,"trades?limit="+e+"&since="+r,n)}},{key:"orderbook",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetchPublic",this).call(this,"orderbook",e)}}]),t}(l["default"]));t["default"]=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(7),f=(n(a),r(6)),c=n(f),l=r(27),h=n(l),p=r(12),d=n(p),y=r(28),g=n(y),E=r(29),_=n(E),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"rest"));return n.key=e.key,n.secret=e.secret,n.currency=e.currency||"USD",n.fetchRequest=r(n.isNode?31:32),n}return u(t,e),s(t,[{key:"headers",value:function(e,t){var r=""+Date.now(),n=h["default"].codec.utf8String.toBits(this.secret),o=new h["default"].misc.hmac(n,h["default"].hash.sha256),i=h["default"].codec.hex.fromBits(o.encrypt(r));return{method:e,headers:{"Content-Type":"application/json",Nonce:r,APIKey:this.key,Signature:i},body:JSON.stringify(t)}}},{key:"fetch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetchRequest(g["default"].resolve(this.endpoint,t),r).then(function(e){return e.json()})}},{key:"fetchPublic",value:function(e,t){return(0,d["default"])(this.fetch({},_["default"].join("api/v1",this.currency,e)),t)}},{key:"fetchTrade",value:function(e,t){var r=this.headers("POST",e);return(0,d["default"])(this.fetch(e,"tapi/v1/message",r,t).then(function(e){return 500===e.Status?Promise.reject(e):e.Responses}).then(function(e){return 1===e.length?e[0]:e}),t)}}]),t}(c["default"]);t["default"]=v},function(e,t){e.exports=require("sjcl")},function(e,t){e.exports=require("url")},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;e.length>n;n++)t(e[n],n,e)&&r.push(e[n]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=0>i?e.cwd():arguments[i];if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(t=u+"/"+t,o="/"===u.charAt(0))}return t=r(n(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===u(e,-1);return e=r(n(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;e.length>t&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split("/")),i=n(r.split("/")),u=Math.min(o.length,i.length),s=u,a=0;u>a;a++)if(o[a]!==i[a]){s=a;break}for(var f=[],a=s;o.length>a;a++)f.push("..");return f=f.concat(i.slice(s)),f.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return i(e)[3]};var u="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(t,r(30))},function(e,t){function r(e){if(a===setTimeout)return setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}function n(e){if(f===clearTimeout)return clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){p&&l&&(p=!1,l.length?h=l.concat(h):d=-1,h.length&&i())}function i(){if(!p){var e=r(o);p=!0;for(var t=h.length;t;){for(l=h,h=[];++d<t;)l&&l[d].run();d=-1,t=h.length}l=null,p=!1,n(e)}}function u(e,t){this.fun=e,this.array=t}function s(){}var a,f,c=e.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw Error("setTimeout is not defined")}}try{f=clearTimeout}catch(e){f=function(){throw Error("clearTimeout is not defined")}}}();var l,h=[],p=!1,d=-1;c.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;arguments.length>n;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||p||r(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(e){throw Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t){e.exports=require("fetch-jsonp")}]);
//# sourceMappingURL=blinktrade.min.js.map