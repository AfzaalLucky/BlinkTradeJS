{"version":3,"sources":["webpack:///blinktrade.min.js","webpack:///webpack/bootstrap f31abeec93be24b5dbb2","webpack:///./src/index.js","webpack:///./src/constants/brokers.js","webpack:///./src/ws.js","webpack:///external \"nodeify\"","webpack:///external \"eventemitter2\"","webpack:///./src/listener.js","webpack:///./src/constants/messages.js","webpack:///external \"ramda\"","webpack:///./src/constants/requestTypes.js","webpack:///./src/constants/actionTypes.js","webpack:///./src/constants/events.js","webpack:///./src/util/utils.js","webpack:///./src/trade.js","webpack:///./src/transports/websocket.js","webpack:///./src/transports/transport.js","webpack:///./src/constants/common.js","webpack:///external \"ws\"","webpack:///./src/util/macaddress.js","webpack:///external \"macaddress\"","webpack:///external \"fingerprintjs2\"","webpack:///./src/util/hash32.js","webpack:///./src/util/stun.js","webpack:///external \"ip\"","webpack:///external \"dgram\"","webpack:///external \"os\"","webpack:///./src/rest.js","webpack:///./src/transports/rest.js","webpack:///external \"url\"","webpack:///external \"sjcl\"","webpack:///external \"fetch-ponyfill\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","BlinkTradeRest","BlinkTradeWS","Brokers","undefined","_brokers","_brokers2","_ws","_ws2","_rest","_rest2","SURBITCOIN","VBTC","FOXBIT","TESTNET","URDUBIT","CHILEBIT","_objectWithoutProperties","keys","target","i","indexOf","prototype","hasOwnProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_extends","assign","arguments","length","source","key","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_nodeify","_nodeify2","_listener","_events","_messages","_utils","_trade","_trade2","_websocket","_websocket2","_transport","_TradeBase","params","this","_this","transport","session","callback","connect","disconnect","msg","sendMessageAsPromise","_this2","d","Date","MsgType","ActionMsgReq","HEARTBEAT","TestReqID","getTime","SendTime","extend","Promise","resolve","reject","send","then","data","Latency","now","catch","nodeify","_ref","_this3","username","password","secondFactor","token","trustedDevice","brokerId","userAgent","IS_NODE","os","UserAgent","type","release","UserAgentLanguage","UserAgentPlatform","platform","arch","UserAgentTimezoneOffset","getTimezoneOffset","window","navigator","language","LOGIN","UserReqID","generateRequestId","BrokerID","Username","Password","UserReqTyp","TrustedDevice","SecondFactor","Token","UserStatus","LOGOUT","profile","_session$Profile","Profile","_this4","emitterPromise","registerListener","BALANCE","balance","eventEmitter","emit","symbols","_this5","SECURITY_STATUS_SUBSCRIBE","SecurityStatusReqID","SubscriptionRequestType","Instruments","formatTicker","SellVolume","LowPx","LastPx","BestAsk","HighPx","BuyVolume","BestBid","registerEventEmitter","ticker","Market","Symbol","sendMessage","_this6","MD_FULL_REFRESH","MDReqID","MarketDepth","MDUpdateType","MDEntryTypes","subscribeEvent","MDBkTyp","MDIncGrp","map","order","dataOrder","index","MDEntryPositionNo","price","MDEntryPx","size","MDEntrySize","side","MDEntryType","userId","UserID","orderId","OrderID","symbol","time","MDEntryDate","MDEntryTime","orderbookEvent","EVENTS","ORDERBOOK","MDUpdateAction","bidOfferData","tradeEvent","TRADES","tradeData","formatOrderBook","level","err","_this7","event","EXECUTION_REPORT","ExecType","_ref2","since","filter","_ref2$page","page","Page","_ref2$pageSize","pageSize","PageSize","TRADE_HISTORY","TradeHistoryReqID","Filter","Since","format","formatTradeHistory","_this8","_ref3","_ref3$currency","currency","depositMethodId","deposit","DEPOSIT_REFRESH","ClOrdID","_ref4","_this9","amount","_ref4$currency","_ref4$method","method","withdraw","WITHDRAW_REFRESH","require","getListeners","listeners","parseInt","Math","random","String","getListener","msgType","getKey","messages","getRequest","store","setRequest","promise","set","deleteRequest","delete","getEventEmitter","emitters","Map","_interopRequireWildcard","newObj","ActionMsgRes","MsgActionRes","MsgActionReq","_ramda","_requestTypes","reqs","_actionTypes","actions","msgToAction","compose","invertObj","head","1","BE","V","x","SECURITY_LIST","SecurityReqID","e","D","ORDER_SEND","F","ORDER_CANCEL","U0","SIGNUP","U2","BalanceReqID","U6","WITHDRAW_REQUEST","WithdrawReqID","U4","ORDER_HISTORY","OrdersReqID","U18","DEPOSIT_REQUEST","DepositReqID","U20","DEPOSIT_METHODS","DepositMethodReqID","U24","WITHDRAW_CONFIRM","U26","WITHDRAW_LIST","WithdrawListReqID","U28","BROKER_LIST","BrokerListReqID","U30","DEPOSIT_LIST","DepositListReqID","U32","U34","LEDGER_LIST","LedgerListReqID","U38","PROFILE_UPDATE","UpdateReqID","U50","API_KEY_LIST","APIKeyListReqID","U52","API_KEY_CREATE","APIKeyCreateReqID","U54","API_KEY_REVOKE","APIKeyRevokeReqID","U70","WITHDRAW_CANCEL","WithdrawCancelReqID","U78","WITHDRAW_COMMENT","B0","DEPOSIT_PROCESS","ProcessDepositReqID","B2","CUSTOMER_LIST","CustomerListReqID","B4","KYC_REQUEST","CustomerReqID","B6","WITHDRAW_PROCESS","ProcessWithdrawReqID","B8","KYC_VERIFY","VerifyCustomerReqID","0","BF","W","X","MD_INCREMENT","8","y","f","U3","U7","U5","U9","U19","U21","U23","U25","U27","U29","U31","U33","U35","U39","U51","U53","U55","U71","U79","B1","B3","B5","B9","B7","B11","CUSTOMER_REFRESH","ReqID","ResetPasswordReqID","EnableTwoFactorReqID","TradersRankReqID","PositionReqID","SECURITY_STATUS_UPDATE","SECURITY_STATUS_UNSUBSCRIBE","MD_TRADES","MD_TRADES_UNSUBSCRIBE","MD_UNSUBSCRIBE","MD_OPENING","OB_NEW_ORDER","OB_UPDATE_ORDER","OB_DELETE_ORDER","OB_DELETE_ORDERS_THRU","EXECUTION_REPORT_NEW","EXECUTION_REPORT_PARTIAL","EXECUTION_REPORT_EXECUTION","EXECUTION_REPORT_CANCELED","EXECUTION_REPORT_REJECTED","TRADE_NEW","LOGIN_REQUIRED","LOGIN_CLOSE","CHANGE_PASSWORD","WITHDRAW_FILTER","WITHDRAW_SET_NEW_VISIBLE","DEPOSIT_FILTER","DEPOSIT_SET_NEW_VISIBLE","LEDGER_FILTER","ORDER_BOOK_TRADE_NEW","ORDER_BOOK_NEW_ORDER","ORDER_BOOK_UPDATE_ORDER","ORDER_BOOK_DELETE_ORDER","ORDER_BOOK_DELETE_ORDERS_THRU","2","3","4","_defineProperty","formatColumns","field","list","zipObj","Columns","TradeHistoryGrp","groupBy","prop","_data$MDFullGrp$filte","MDFullGrp","reduce","prev","push","bids","asks","TradeBase","clientId","ClientID","_ref$page","_ref$pageSize","Side","OrdType","Price","OrderQty","param","_ref3$page","_ref3$pageSize","_ref3$status","status","StatusList","reqId","Method","Amount","Currency","Data","_ref5","WithdrawID","withdrawId","confirmationToken","CONFIRM_WITHDRAW","ConfirmationToken","CANCEL_WITHDRAW","_ref6","_ref6$page","_ref6$pageSize","_ref6$status","_ref7","_ref7$currency","DepositMethodID","Value","_ref8","_ref8$page","_ref8$pageSize","_eventemitter","_transport2","WebSocketTransport","_Transport","stun","local","public","getStun","getFingerPrint","fingerPrint","headers","EventEmitter2","wildcard","delimiter","request","WebSocket","socket","endpoint","onopen","onOpen","bind","onclose","onClose","onerror","onError","onmessage","onMessage","close","connected","error","readyState","STUNTIP","FingerPrint","JSON","stringify","parse","Error","Detail","Description","emitter","listener","dispatchPromise","dispatchEventEmitters","dispatchListeners","customFingerprint","getMac","macAddress","IS_BROKER","Fingerprint2","abs","encodeByteArray","on","onAny","offAny","once","many","times","removeListener","removeAllListeners","events","_common","_common2","Transport","document","env","url","prod","testnet","ws","rest","_macaddress2","all","hashCode","str","hash","charCodeAt","macAddresses","forEach","iface","mac","_macaddress","SEED32","CONSTANT32","mix32_","mix","a","b","toSigned_","n","wordAt_","bytes","offset","keylen","seed","addIPAddress","ipAddress","match","stunIp","_dgram2","createSocket","STUN_HEADER_LENGTH","stunRequest","Buffer","STUN_METHOD_REQUEST","STUN_BINDING_CLASS","STUN_MAGIC_COOKIE","STUN_TID_MAX","pow","STUN_ATTR_MAPPED_ADDRESS","STUN_ATTR_XOR_MAPPED_ADDRESS","STUN_ATTR_XOR_MAPPED_ADDRESS_ALT","stunTxId","stunServers","writeUInt16BE","writeUInt32BE","xor","tmp","len","block","readUInt8","bit1","bit2","msgHeader","slice","msgAttrs","attrType","readUInt16BE","attrBuffLength","blockOut","family","address","_ip2","toString","magic","tid","xaddr","addr","concat","_slicedToArray","port","host","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","Array","isArray","_ip","_dgram","path","fetchTrade","fetchPublic","_ref$limit","limit","_ref$since","_url","_url2","_sjcl","_sjcl2","_fetchPonyfill2","_fetchPonyfill3","_fetchPonyfill","fetch","RestTransport","secret","body","timeStamp","hexKey","codec","utf8String","toBits","hmac","misc","sha256","Signature","hex","fromBits","encrypt","Content-Type","Nonce","APIKey","api","response","json","Status","Responses"],"mappings":"AAAAA,OAAOC,QACE,SAAUC,GCGnB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAH,OAGA,IAAAD,GAAAK,EAAAD,IACAH,WACAK,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAR,EAAAC,QAAAD,IAAAC,QAAAE,GAGAH,EAAAO,QAAA,EAGAP,EAAAC,QAvBA,GAAAI,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDOM,SAASH,EAAQC,EAASE,GAE/B,YAmBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAjBvFG,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQkB,eAAiBlB,EAAQmB,aAAenB,EAAQoB,QAAUC,ME9BnE,IAAAC,GAAApB,EAAA,GFkCKqB,EAAYZ,EAAuBW,GEjCxCE,EAAAtB,EAAA,GFqCKuB,EAAOd,EAAuBa,GEpCnCE,EAAAxB,EAAA,IFwCKyB,EAAShB,EAAuBe,EAIpC1B,GEzCCoB,QFyCiBG,EAAUT,QAC5Bd,EEzCCmB,aFyCsBM,EAAKX,QAC5Bd,EEzCCkB,eFyCwBS,EAAOb,SAwB3B,SAASf,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQc,SGpGPc,WAAY,EACZC,KAAM,EACNC,OAAQ,EACRC,QAAS,EACTC,QAAS,EACTC,SAAU,IH0GN,SAASlC,EAAQC,EAASE,GAE/B,YAoCA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASsB,GAAyBtB,EAAKuB,GAAQ,GAAIC,KAAa,KAAK,GAAIC,KAAKzB,GAAWuB,EAAKG,QAAQD,GAAM,GAAkBtB,OAAOwB,UAAUC,eAAejC,KAAKK,EAAKyB,KAAcD,EAAOC,GAAKzB,EAAIyB,GAAM,OAAOD,GAEnN,QAASK,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GA1CjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAIyC,GAAW3C,OAAO4C,QAAU,SAAUvB,GAAU,IAAK,GAAIC,GAAI,EAAOuB,UAAUC,OAAdxB,EAAsBA,IAAK,CAAE,GAAIyB,GAASF,UAAUvB,EAAI,KAAK,GAAI0B,KAAOD,GAAc/C,OAAOwB,UAAUC,eAAejC,KAAKuD,EAAQC,KAAQ3B,EAAO2B,GAAOD,EAAOC,IAAY,MAAO3B,IAEnP4B,EAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,MAE5hB2B,EAAO,QAASC,GAAIC,EAAQC,EAAUC,GAA2B,OAAXF,IAAiBA,EAASG,SAASpC,UAAW,IAAIqC,GAAO7D,OAAO8D,yBAAyBL,EAAQC,EAAW,IAAapD,SAATuD,EAAoB,CAAE,GAAIE,GAAS/D,OAAOgE,eAAeP,EAAS,OAAe,QAAXM,EAAmB,OAAkCP,EAAIO,EAAQL,EAAUC,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAK3D,KAAgB,IAAI+D,GAASJ,EAAKL,GAAK,IAAelD,SAAX2D,EAA4C,MAAOA,GAAOzE,KAAKmE,IItG7dO,EAAA/E,EAAA,GJ0GKgF,EAAYvE,EAAuBsE,GIxGxCE,GADAjF,EAAA,GACAA,EAAA,IAMAkF,EAAAlF,EAAA,IAQAmF,EAAAnF,EAAA,GACAoF,EAAApF,EAAA,IAEAqF,EAAArF,EAAA,IJqGKsF,EAAU7E,EAAuB4E,GIpGtCE,EAAAvF,EAAA,IJwGKwF,EAAc/E,EAAuB8E,GIvG1CE,EAAAzF,EAAA,IAEMiB,EJuIc,SAAUyE,GI/H5B,QAAAzE,GAAY0E,GAAyBpD,EAAAqD,KAAA3E,EAAA,IAAA4E,GAAAlD,EAAAiD,MAAA3E,EAAAsC,WAAA1C,OAAAgE,eAAA5D,IAAAZ,KAAAuF,KAC7BD,GAD6B,OAGnCE,GAAKC,UAAYH,EAAOG,WAAa,GAAAN,GAAA5E,QAAuB+E,GAC5DE,EAAKE,WAJ8BF,EJ+fpC,MA/XA/C,GAAU7B,EAAcyE,GAexB5B,EAAa7C,IACX4C,IAAK,UACL9C,MAAO,SI1IFiF,GACN,MAAOJ,MAAKE,UAAUG,QAAQD,MJ6I7BnC,IAAK,aACL9C,MAAO,WI1IR,MAAO6E,MAAKE,UAAUI,gBJ8IrBrC,IAAK,OACL9C,MAAO,SI5ILoF,GACH,MAAOP,MAAKE,UAAUM,qBAAqBD,MJ+I1CtC,IAAK,YACL9C,MAAO,SI7IAiF,GAAsC,GAAAK,GAAAT,KACxCU,EAAI,GAAIC,MACRJ,GACJK,QAASrB,EAAAsB,aAAaC,UACtBC,UAAWL,EAAEM,UACbC,SAAUP,EAAEM,UAGd,OAAO5B,GAAApE,QAAQkG,OAAO,GAAIC,SAAQ,SAACC,EAASC,GAC1C,MAAOZ,GAAKa,KAAKf,GAAKgB,KAAK,SAAAC,GACzB,MAAOJ,QACFI,GACHC,QAAS,GAAId,MAAKA,KAAKe,OAASF,EAAKP,cAEtCU,MAAMN,MACPO,QAAQxB,MJiJXnC,IAAK,QACL9C,MAAO,SAAe0G,EIxItBzB,GAAsC,GAAA0B,GAAA9B,KAPjC+B,EAOiCF,EAPjCE,SAAUC,EAOuBH,EAPvBG,SAAUC,EAOaJ,EAPbI,aAAcC,EAODL,EAPCK,MAAOC,EAORN,EAPQM,cAAeC,EAOvBP,EAPuBO,SAQ1DC,QACJ,IAAIxC,EAAAyC,QAOG,CACL,GAAMC,GAAKnI,EAAQ,GACnBiI,IACEG,UAAcD,EAAGE,OAAjB,IAA2BF,EAAGG,UAC9BC,kBAAmB,QACnBC,kBAAsBL,EAAGM,WAAzB,KAAwCN,EAAGO,OAA3C,IACAC,yBAAyB,GAAIpC,OAAOqC,yBAZtCX,IACEG,UAAWS,OAAOC,UAAUb,UAC5BM,kBAAmBM,OAAOC,UAAUC,SACpCP,kBAAmBK,OAAOC,UAAUL,SACpCE,yBAAyB,GAAIpC,OAAOqC,oBAYxC,IAAMzC,MACJK,QAASrB,EAAAsB,aAAauC,MACtBC,WAAW,EAAAhE,EAAAiE,qBACXC,SAAUnB,GAAYpC,KAAKoC,SAC3BoB,SAAUzB,EACV0B,SAAUzB,EACV0B,WAAY,IACZC,cAAexB,IAAiB,GAC7BE,EAWL,OARIJ,KACF1B,EAAIqD,aAAe3B,GAGjBC,IACF3B,EAAIsD,MAAQ3B,GAGP9C,EAAApE,QAAQkG,OAAO,GAAIC,SAAQ,SAACC,EAASC,GAC1C,MAAOS,GAAKR,KAAKf,GAAKgB,KAAK,SAAAC,GACzB,MAAwB,KAApBA,EAAKsC,YACPhC,EAAK3B,QAAUqB,EACRJ,EAAQI,IAGVH,EAAOG,KACbG,MAAMN,MACPO,QAAQxB,MJmJXnC,IAAK,SACL9C,MAAO,SIjJHiF,GACL,GAAMG,IACJK,QAASrB,EAAAsB,aAAakD,OACtBR,SAAUvD,KAAKoC,SACfiB,WAAW,EAAAhE,EAAAiE,qBACXE,SAAUxD,KAAKG,QAAQqD,SACvBE,WAAY,IAGd,OAAOtE,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MJoJ7CnC,IAAK,UACL9C,MAAO,QAAS6I,GIlJX5D,GAAsC,GAAA6D,GACHjE,KAAKG,QAAQ+D,QAAzBF,EADe5H,EAAA6H,GAAA,oBAE5C,OAAO7E,GAAApE,QAAQkG,OAAOC,QAAQC,QAAQ4C,IAAUpC,QAAQxB,MJwJvDnC,IAAK,UACL9C,MAAO,SItJFiF,GAA6C,GAAA+D,GAAAnE,IACnD,OAAOA,MAAKE,UAAUkE,eAAe,GAAIjD,SAAQ,SAACC,EAASC,GACzD,MAAO7C,GAAAnD,EAAAoB,UAAAkB,WAAA1C,OAAAgE,eAAA5D,EAAAoB,WAAA,UAAA0H,GAAA1J,KAAA0J,EAAc/D,GAAUmB,KAAK,SAACC,GAKnC,OAJA,EAAAnC,EAAAgF,kBAAiB9E,EAAAsB,aAAayD,QAAS,SAACC,GAEtC,MADAnE,IAAYA,EAAS,KAAMmE,GACpBJ,EAAKjE,UAAUsE,aAAaC,KAA5BnF,EAAAgF,QAA0CC,KAE5CnD,EAAQI,KACdG,MAAMN,SJ4JVpD,IAAK,kBACL9C,MAAO,SIzJMuJ,EAAwBtE,GAA6C,GAAAuE,GAAA3E,KAC7EO,GACJK,QAASrB,EAAAsB,aAAa+D,0BACtBC,qBAAqB,EAAAxF,EAAAiE,qBACrBwB,wBAAyB,IACzBC,YAAaL,GAGTM,EAAe,SAACxD,GACpB,MAAA5D,MACK4D,GACHyD,WAAYzD,EAAKyD,WAAa,IAC9BC,MAAO1D,EAAK0D,MAAQ,IACpBC,OAAQ3D,EAAK2D,OAAS,IACtBC,QAAS5D,EAAK4D,QAAU,IACxBC,OAAQ7D,EAAK6D,OAAS,IACtBC,UAAW9D,EAAK8D,UAAY,IAC5BC,QAAS/D,EAAK+D,QAAU,MAI5B,OAAOvF,MAAKE,UAAUkE,eAAe,GAAIjD,SAAQ,SAACC,EAASC,GACzD,MAAOsD,GAAKrD,KAAKf,GAAKgB,KAAK,SAAAC,GACzBJ,EAAQ4D,EAAaxD,KACrB,EAAAnC,EAAAmG,sBAAqB,sBAAuBhE,EAAKqD,oBAAqB,SAACY,GAErE,MADArF,IAAYA,EAAS,KAAM4E,EAAaS,IACjCd,EAAKzE,UAAUsE,aAAaC,KAAQgB,EAAOC,OAA3C,IAAqDD,EAAOE,OAAUX,EAAaS,QAE3F9D,MAAMN,KACPjB,MJ6JHnC,IAAK,oBACL9C,MAAO,SI3JQ0J,GAChB,GAAMtE,IACJK,QAASrB,EAAAsB,aAAa+D,0BACtBC,sBACAC,wBAAyB,IAI3B,OADA9E,MAAKE,UAAU0F,YAAYrF,GACpBsE,KJ8JN5G,IAAK,qBACL9C,MAAO,SI5JSuJ,EAAwBtE,GAA6C,GAAAyF,GAAA7F,KAChFO,GACJK,QAASrB,EAAAsB,aAAaiF,gBACtBC,SAAS,EAAA1G,EAAAiE,qBACTwB,wBAAyB,IACzBkB,YAAa,EACbC,aAAc,IACdC,cAAe,IAAK,IAAK,KACzBnB,YAAaL,GAGTyB,EAAiB,SAAC3E,GACD,MAAjBA,EAAK4E,SACP5E,EAAK6E,SAASC,IAAI,SAAAC,GAChB,GAAMC,IACJC,MAAOF,EAAMG,kBACbC,MAAOJ,EAAMK,UAAY,IACzBC,KAAMN,EAAMO,YAAc,IAC1BC,KAA4B,MAAtBR,EAAMS,YAAsB,MAAQ,OAC1CC,OAAQV,EAAMW,OACdC,QAASZ,EAAMa,QACfC,OAAQd,EAAMZ,OACd2B,KAAM,MAAI3G,MAAQ4F,EAAMgB,YAAlB,IAAiChB,EAAMiB,aAG/C,QAAQjB,EAAMS,aACZ,IAAK,IACL,IAAK,IACH,GAAMS,SAAuBnI,EAAAoI,OAAOC,UAAUpB,EAAMqB,gBAC9CC,OAAoBrB,GAAW/D,KAAMgF,GAG3C,OADArH,IAAYA,EAAS,KAAMyH,GACpBhC,EAAK3F,UAAUsE,aAAaC,KAAKgD,EAAgBI,EAC1D,KAAK,IACH,GAAMC,SAAmBxI,EAAAoI,OAAOK,OAAOxB,EAAMqB,gBACvCI,OAAiBxB,GAAW/D,KAAMqF,GAGxC,OADA1H,IAAYA,EAAS,KAAM4H,GACpBnC,EAAK3F,UAAUsE,aAAaC,KAAKqD,EAAYE,EACtD,KAAK,IACH,KACF,SACE,MAAO,MAEX,MAAO,QAKb,OAAOhI,MAAKE,UAAUkE,eAAe,GAAIjD,SAAQ,SAACC,EAASC,GACzD,MAAOwE,GAAKvE,KAAKf,GAAKgB,KAAK,SAAAC,GAEzB,OADA,EAAAnC,EAAAmG,sBAAqB,UAAWhE,EAAKuE,QAASI,GACvC/E,GAAQ,EAAA5B,EAAAyI,iBAAgBzG,EAAMqE,EAAKqC,UACzCvG,MAAM,SAAAwG,GAAA,MAAO9G,GAAO8G,OACrB/H,MJmKHnC,IAAK,uBACL9C,MAAO,SIjKW4K,GACnB,GAAMxF,IACJK,QAASrB,EAAAsB,aAAaiF,gBACtBC,UACAC,YAAa,EACblB,wBAAyB,IAI3B,OADA9E,MAAKE,UAAU0F,YAAYrF,GACpBwF,KJoKN9H,IAAK,kBACL9C,MAAO,SIlKMiF,GAAmC,GAAAgI,GAAApI,IAOjD,QANA,EAAAX,EAAAgF,kBAAiB,IAAK,SAAC7C,GACrBpB,GAAYA,EAASoB,EACrB,IAAM6G,GAAQ/I,EAAAoI,OAAOY,iBAAiB9G,EAAK+G,SAC3C,OAAOH,GAAKlI,UAAUsE,aAAaC,KAA5BnF,EAAAgJ,iBAAA,IAAwDD,EAAS7G,KAGnExB,KAAKE,UAAUsE,gBJuKrBvG,IAAK,eACL9C,MAAO,WIhKoC,GAAAqN,GAAA1K,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAL/B2K,EAK+BD,EAL/BC,MAAOC,EAKwBF,EALxBE,OAKwBC,EAAAH,EALhBI,KAAMC,EAKUtN,SAAAoN,EALH,EAKGA,EAAAG,EAAAN,EALAO,SAAUC,EAKVzN,SAAAuN,EALqB,GAKrBA,EAAtC1I,EAAsCtC,UAAA,GACtCyC,GACJK,QAASrB,EAAAsB,aAAaoI,cACtBC,mBAAmB,EAAA7J,EAAAiE,qBACnBuF,OACAG,WAGEN,IAAUA,EAAO3K,OAAS,IAC5BwC,EAAI4I,OAAST,GAGXD,GAA0B,gBAAVA,KAClBlI,EAAI6I,MAAQX,EAGd,IAAMY,IAAS,EAAA7J,EAAA8J,oBAAmBtJ,KAAKkI,MAEvC,OAAO9I,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK8H,IAASzH,QAAQxB,MJ6K1DnC,IAAK,iBACL9C,MAAO,WIvK2C,GAAAoO,GAAAvJ,KAAAwJ,EAAA1L,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAA2L,EAAAD,EAJpCE,WAIoCnO,SAAAkO,EAJzB,MAIyBA,EAJlBtO,EAIkBqO,EAJlBrO,MAAOwO,EAIWH,EAJXG,gBAIlCvJ,EAA6CtC,UAAA,GAC7CqI,EAAiB,SAACyD,GAEtB,MADAxJ,IAAYA,EAAS,KAAMwJ,GACpBL,EAAKrJ,UAAUsE,aAAaC,KAA5BnF,EAAAuK,gBAAkDD,GAG3D,OAAO5J,MAAKE,UAAUkE,eAAe,GAAIjD,SAAQ,SAACC,EAASC,GACzD,MAAO7C,GAAAnD,EAAAoB,UAAAkB,WAAA1C,OAAAgE,eAAA5D,EAAAoB,WAAA,iBAAA8M,GAAA9O,KAAA8O,GAAuBG,WAAUvO,QAAOwO,oBAAmBpI,KAAK,SAAAqI,GAErE,OADA,EAAAvK,EAAAmG,sBAAqB,UAAWoE,EAAQE,QAAS3D,GAC1C/E,EAAQwI,KACdjI,MAAMN,KACPjB,MJoLHnC,IAAK,mBACL9C,MAAO,SIlLOiF,GACf,MAAO,IAAIe,SAAQ,SAACC,IAClB,EAAA/B,EAAAgF,kBAAiB,MAAO,SAACuF,GAEvB,MADAxJ,IAAYA,EAASwJ,GACdxI,EAAQwI,UJuLlB3L,IAAK,kBACL9C,MAAO,SAAyB4O,EI9KhC3J,GAA6C,GAAA4J,GAAAhK,KAL9BiK,EAK8BF,EAL9BE,OAAQzI,EAKsBuI,EALtBvI,KAKsB0I,EAAAH,EALhBL,WAKgBnO,SAAA2O,EALL,MAKKA,EAAAC,EAAAJ,EALEK,SAKF7O,SAAA4O,EALW,UAKXA,EACxChE,EAAiB,SAACkE,GAEtB,MADAjK,IAAYA,EAAS,KAAMiK,GACpBL,EAAK9J,UAAUsE,aAAaC,KAA5BnF,EAAAgL,iBAAmDD,GAG5D,OAAOrK,MAAKE,UAAUkE,eAAe,GAAIjD,SAAQ,SAACC,EAASC,GACzD,MAAO7C,GAAAnD,EAAAoB,UAAAkB,WAAA1C,OAAAgE,eAAA5D,EAAAoB,WAAA,kBAAAuN,GAAAvP,KAAAuP,GAAwBC,SAAQzI,OAAMkI,WAAUU,WAAU7I,KAAK,SAAA8I,GAEpE,OADA,EAAAhL,EAAAmG,sBAAqB,UAAW6E,EAASP,QAAS3D,GAC3C/E,EAAQiJ,KACd1I,MAAMN,KACPjB,MJ0LHnC,IAAK,oBACL9C,MAAO,SIxLQiF,GAChB,MAAO,IAAIe,SAAQ,SAACC,IAClB,EAAA/B,EAAAgF,kBAAiB,KAAM,SAACgG,GAEtB,MADAjK,IAAYA,EAASiK,GACdjJ,EAAQiJ,WJ8LbhP,GACPqE,EAAQ1E,QAEVd,GAAQc,QI3LMK,GJ+LT,SAASpB,EAAQC,GK3jBvBD,EAAAC,QAAAqQ,QAAA,YLikBM,SAAStQ,EAAQC,GMjkBvBD,EAAAC,QAAAqQ,QAAA,kBNukBM,SAAStQ,EAAQC,EAASE,GAE/B,YO7iBM,SAASoQ,KACd,MAAOC,GAGF,QAASnH,KACd,MAAOoH,UAAgB,IAAMC,KAAKC,SAAlBC,GAA6B,IAGxC,QAASC,GAAYC,GAC1B,MAAON,GAAUM,GAGnB,QAASC,GAAOC,EAAoB1K,GAClC,GAAMtC,GAAMgN,EAAS1K,EAAIK,SAAS,GAC5BzF,EAAQoF,EAAItC,EAClB,OAAOA,GAAM,IAAM9C,EAGd,QAAS+P,GAAW3K,GACzB,MAAO4K,GAAM1M,IAAIuM,iBAAqBzK,IAGjC,QAAS6K,GAAW7K,EAAc8K,GACvCF,EAAMG,IAAIN,iBAAqBzK,GAAM8K,GAGhC,QAASE,GAAchL,GAC5B4K,EAAMK,OAAOR,iBAAqBzK,IAG7B,QAASkL,GAAgBlL,GAC9B,MAAOmL,GAASjN,IAAIuM,iBAAqBzK,IAGpC,QAASiF,GAAqBvH,EAAa9C,EAAeiF,GAC/DsL,EAASJ,IAAIrN,EAAM,IAAM9C,EAAOiF,GAG3B,QAASiE,GAAiB0G,EAAiB3K,GAChDqK,EAAUa,IAAIP,EAAS3K,GPwgBxBnF,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EOljBesQ,ePmjBftQ,EO/iBeoJ,oBPgjBfpJ,EO5iBe4Q,cP6iBf5Q,EOniBegR,aPoiBfhR,EOhiBekR,aPiiBflR,EO7hBeqR,gBP8hBfrR,EO1hBeuR,kBP2hBfvR,EOvhBesL,uBPwhBftL,EOphBemK,kBA5ChB,IAAA9E,GAAAnF,EAAA,GAEM+Q,EAAQ,GAAIQ,KACZD,EAAW,GAAIC,KACflB,EAAY,GAAIkB,MPqoBhB,SAAS1R,EAAQC,EAASE,GAE/B,YAiBA,SAASwR,GAAwB9Q,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAI+Q,KAAa,IAAW,MAAP/Q,EAAe,IAAK,GAAImD,KAAOnD,GAAWG,OAAOwB,UAAUC,eAAejC,KAAKK,EAAKmD,KAAM4N,EAAO5N,GAAOnD,EAAImD,GAAgC,OAAtB4N,GAAO7Q,QAAUF,EAAY+Q,EAflQ5Q,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQ4R,aAAe5R,EAAQ2G,aAAe3G,EAAQ6R,aAAe7R,EAAQ8R,aAAezQ,MQtqB7F,IAAA0Q,GAAA7R,EAAA,GACA8R,EAAA9R,EAAA,GAAY+R,ER2qBAP,EAAwBM,GQ1qBpCE,EAAAhS,EAAA,GAAYiS,ER8qBGT,EAAwBQ,GQ5qBjCE,GAAc,EAAAL,EAAAM,SAAAN,EAAAO,WAAmB,EAAAP,EAAA3F,KAAA2F,EAAAQ,OAE1BT,kBACXU,GAAML,EAAQvL,UAAWqL,EAAKpL,WAC9B4L,IAAMN,EAAQjJ,MAAO+I,EAAK9I,WAC1BuJ,GAAMP,EAAQvG,gBAAiBqG,EAAKpG,SACpC8G,GAAMR,EAAQS,cAAeX,EAAKY,eAClCC,GAAMX,EAAQzH,0BAA2BuH,EAAKtH,qBAC9CoI,GAAMZ,EAAQa,WAAYf,EAAKrC,SAC/BqD,GAAMd,EAAQe,aAAcjB,EAAKrC,SACjCuD,IAAMhB,EAAQiB,OAAQnB,EAAK9I,WAC3BkK,IAAMlB,EAAQ/H,QAAS6H,EAAKqB,cAC5BC,IAAMpB,EAAQqB,iBAAkBvB,EAAKwB,eACrCC,IAAMvB,EAAQwB,cAAe1B,EAAK2B,aAClCC,KAAM1B,EAAQ2B,gBAAiB7B,EAAK8B,cACpCC,KAAM7B,EAAQ8B,gBAAiBhC,EAAKiC,oBACpCC,KAAMhC,EAAQiC,iBAAkBnC,EAAKwB,eACrCY,KAAMlC,EAAQmC,cAAerC,EAAKsC,mBAClCC,KAAMrC,EAAQsC,YAAaxC,EAAKyC,iBAChCC,KAAMxC,EAAQyC,aAAc3C,EAAK4C,kBACjCC,KAAM3C,EAAQpD,cAAekD,EAAKjD,mBAClC+F,KAAM5C,EAAQ6C,YAAa/C,EAAKgD,iBAChCC,KAAM/C,EAAQgD,eAAgBlD,EAAKmD,aACnCC,KAAMlD,EAAQmD,aAAcrD,EAAKsD,iBACjCC,KAAMrD,EAAQsD,eAAgBxD,EAAKyD,mBACnCC,KAAMxD,EAAQyD,eAAgB3D,EAAK4D,mBACnCC,KAAM3D,EAAQ4D,gBAAiB9D,EAAK+D,qBACpCC,KAAM9D,EAAQ+D,iBAAkBjE,EAAKwB,eACrC0C,IAAMhE,EAAQiE,gBAAiBnE,EAAKoE,qBACpCC,IAAMnE,EAAQoE,cAAetE,EAAKuE,mBAClCC,IAAMtE,EAAQuE,YAAazE,EAAK0E,eAChCC,IAAMzE,EAAQ0E,iBAAkB5E,EAAK6E,sBACrCC,IAAM5E,EAAQ6E,WAAY/E,EAAKgF,sBAGpBpF,kBACXqF,GAAM/E,EAAQvL,UAAWqL,EAAKpL,WAC9BsQ,IAAMhF,EAAQjJ,MAAO+I,EAAK9I,WAC1BiO,GAAMjF,EAAQvG,gBAAiBqG,EAAKpG,SACpCwL,GAAMlF,EAAQmF,aAAcrF,EAAKpG,SACjC0L,GAAMpF,EAAQ/D,iBAAkB6D,EAAKrC,SACrC4H,GAAMrF,EAAQS,cAAeX,EAAKY,eAClC4E,GAAMtF,EAAQzH,0BAA2BuH,EAAKtH,qBAC9C+M,IAAMvF,EAAQ/H,QAAS6H,EAAKqB,cAC5BqE,IAAMxF,EAAQqB,iBAAkBvB,EAAKwB,eACrCmE,IAAMzF,EAAQwB,cAAe1B,EAAK2B,aAClCiE,IAAM1F,EAAQ/B,iBAAkB6B,EAAKwB,eACrCqE,KAAM3F,EAAQ2B,gBAAiB7B,EAAK8B,cACpCgE,KAAM5F,EAAQ8B,gBAAiBhC,EAAKiC,oBACpC8D,KAAM7F,EAAQxC,gBAAiBsC,EAAK8B,cACpCkE,KAAM9F,EAAQiC,iBAAkBnC,EAAKwB,eACrCyE,KAAM/F,EAAQmC,cAAerC,EAAKsC,mBAClC4D,KAAMhG,EAAQsC,YAAaxC,EAAKyC,iBAChC0D,KAAMjG,EAAQyC,aAAc3C,EAAK4C,kBACjCwD,KAAMlG,EAAQpD,cAAekD,EAAKjD,mBAClCsJ,KAAMnG,EAAQ6C,YAAa/C,EAAKgD,iBAChCsD,KAAMpG,EAAQgD,eAAgBlD,EAAKmD,aACnCoD,KAAMrG,EAAQmD,aAAcrD,EAAKsD,iBACjCkD,KAAMtG,EAAQsD,eAAgBxD,EAAKyD,mBACnCgD,KAAMvG,EAAQyD,eAAgB3D,EAAK4D,mBACnC8C,KAAMxG,EAAQ4D,gBAAiB9D,EAAK+D,qBACpC4C,KAAMzG,EAAQ+D,iBAAkBjE,EAAK+D,qBACrC6C,IAAM1G,EAAQiE,gBAAiBnE,EAAKoE,qBACpCyC,IAAM3G,EAAQoE,cAAetE,EAAKuE,mBAClCuC,IAAM5G,EAAQuE,YAAazE,EAAK0E,eAChCqC,IAAM7G,EAAQ6E,WAAY/E,EAAKgF,qBAC/BgC,IAAM9G,EAAQ0E,iBAAkB5E,EAAK6E,sBACrCoC,KAAM/G,EAAQgH,kBAGHxS,gBAAeyL,EAAYN,GAC3BF,eAAeQ,EAAYP,IRorBlC,SAAS9R,EAAQC,GS/vBvBD,EAAAC,QAAAqQ,QAAA,UTqwBM,SAAStQ,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GU1wBGmY,SAAQ,QACRvS,YAAY,YACZsC,YAAY,YACZ0J,gBAAgB,gBAChBwG,qBAAqB,qBACrBtF,eAAe,eACfN,gBAAgB,gBAChBH,eAAe,eACfM,cAAc,cACd0F,uBAAuB,uBACvBpF,qBAAqB,qBACrBK,oBAAoB,oBACpByB,sBAAsB,sBACtBtB,kBAAkB,kBAClBG,mBAAmB,mBACnB7F,oBAAoB,oBACpBiG,kBAAkB,kBAClBsE,mBAAmB,mBACnBnE,cAAc,cACdoE,gBAAgB,gBAChB7O,sBAAsB,sBACtB4K,kBAAkB,kBAClBG,oBAAoB,oBACpBG,oBAAoB,oBACpBQ,sBAAsB,sBACtBG,oBAAoB,oBACpBG,gBAAgB,gBAChBG,uBAAuB,uBACvBG,sBAAsB,sBACtBpL,UAAU,UACV+D,UAAU,WVgxBjB,SAAS7P,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GWnzBG2F,aAAY,YAEZ6N,cAAc,cAEd7B,gBAAgB,gBAChB6G,yBAAyB,yBACzB/O,4BAA4B,4BAC5BgP,8BAA8B,8BAE9BC,YAAY,YACZC,wBAAwB,wBACxBtC,eAAe,eACf1L,kBAAkB,kBAClBiO,iBAAiB,iBACjBC,aAAa,aAEbC,eAAe,eACfC,kBAAkB,kBAClBC,kBAAkB,kBAClBC,wBAAwB,wBAExB9L,mBAAmB,mBACnB+L,uBAAuB,uBACvBC,2BAA2B,2BAC3BC,6BAA6B,6BAC7BC,4BAA4B,4BAC5BC,4BAA4B,4BAE5B5G,gBAAgB,gBAEhBX,aAAa,aACbE,eAAe,eAEfsH,YAAY,YACZzL,gBAAgB,gBAEhBlB,SAAS,SAETuF,SAAS,SAETlK,QAAQ,QACRW,SAAS,SACT4Q,iBAAiB,iBACjBC,cAAc,cAEdC,kBAAkB,kBAElBvQ,UAAU,UAEV+K,iBAAiB,iBAEjBb,gBAAgB,gBAChByB,kBAAkB,kBAClB6E,kBAAkB,kBAClBxK,mBAAmB,mBACnByG,mBAAmB,mBACnBzC,mBAAmB,mBACnB8B,mBAAmB,mBACnB1C,mBAAmB,mBACnBqH,2BAA2B,2BAE3BjG,eAAe,eACfkG,iBAAiB,iBACjBnL,kBAAkB,kBAClByG,kBAAkB,kBAClBtC,kBAAkB,kBAClBG,kBAAkB,kBAClB8G,0BAA0B,0BAE1B/F,cAAc,cACdgG,gBAAgB,iBXyzBvB,SAASjb,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GYp4BH,IAAMga,0BAAuB,YACvBC,yBAAuB,YACvBC,4BAA0B,eAC1BC,4BAA0B,eAC1BC,kCAAgC,qBAGhClB,GADA/L,mBAAmB,mBACnB+L,uBAAuB,OACvBC,6BAA2B,UAC3BC,+BAA6B,YAC7BC,8BAA4B,WAC5BC,8BAA4B,UAG5B/M,WACXC,WACEyJ,EAAKgE,EACL1I,EAAK2I,EACLG,EAAKF,EACLG,EAAKF,GAEPxN,QACEqJ,EAAK+D,GAEP7M,kBACE8I,EAAKiD,EACL3H,EAAK4H,EACLkB,EAAKjB,EACLmB,EAAKlB,EACL/C,EAAKgD,KZ44BH,SAASxa,EAAQC,EAASE,GAE/B,YAWA,SAASub,GAAgB7a,EAAKmD,EAAK9C,GAAiK,MAApJ8C,KAAOnD,GAAOG,OAAOC,eAAeJ,EAAKmD,GAAO9C,MAAOA,EAAOoC,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkB1C,EAAImD,GAAO9C,EAAgBL,EAT3MG,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQ+N,gBAAkB/N,EAAQoP,mBAAqBpP,EAAQ0b,cAAgBra,MAE/E,IAAIqC,GAAW3C,OAAO4C,QAAU,SAAUvB,GAAU,IAAK,GAAIC,GAAI,EAAOuB,UAAUC,OAAdxB,EAAsBA,IAAK,CAAE,GAAIyB,GAASF,UAAUvB,EAAI,KAAK,GAAI0B,KAAOD,GAAc/C,OAAOwB,UAAUC,eAAejC,KAAKuD,EAAQC,KAAQ3B,EAAO2B,GAAOD,EAAOC,IAAY,MAAO3B,Ial7BxP2P,EAAA7R,EAAA,EAEawb,iBAAgB,SAACC,EAAO3N,GAAR,MAAkB,UAAC1G,GAC9C,GAAc,IAAV0G,EAAa,CACf,GAAM4N,IAAO,EAAA7J,EAAA3F,MAAI,EAAA2F,EAAA8J,QAAOvU,EAAKwU,SAAUxU,EAAKqU,GAC5C,OAAO1U,SAAQC,QAARxD,KAAqB4D,EAArBmU,KAA4BE,EAAQC,KAG7C,MAAO3U,SAAQC,QAAQI,KAGZ8H,qBAAqB,SAACpB,GAAD,MAAW,UAAC1G,GAC5C,GAAc,IAAV0G,EAAa,CACf,GAAM+N,IAAkB,EAAAhK,EAAAM,UACtB,EAAAN,EAAAiK,UAAQ,EAAAjK,EAAAkK,MAAK,YACb,EAAAlK,EAAA3F,MAAI,EAAA2F,EAAA8J,QAAOvU,EAAKwU,WAChBxU,EAAKyU,gBAEP,OAAO9U,SAAQC,QAARxD,KAAqB4D,GAAMyU,qBAGpC,MAAO9U,SAAQC,QAAQI,KAGZyG,kBAAkB,SAACzG,EAAM0G,GACpC,GAAc,IAAVA,EAAa,IAAAkO,GACQ5U,EAAK6U,UACzB3N,OAAO,SAAAnC,GAAA,MAA+B,MAAtBA,EAAMS,aAA6C,MAAtBT,EAAMS,cACnDsP,OAAO,SAACC,EAAMhQ,GACb,GAAMQ,GAA6B,MAAtBR,EAAMS,YAAsB,OAAS,MAOlD,QANCuP,EAAKxP,KAAUwP,EAAKxP,QAAayP,MAChCjQ,EAAMK,UAAY,IAClBL,EAAMO,YAAc,IACpBP,EAAMW,OACNX,EAAMa,UAEDmP,OAVHE,EADOL,EACPK,KAAMC,EADCN,EACDM,IAad,OAAA9Y,MACK4D,GACH6U,eACG7U,EAAKmE,QACJ8Q,OACAC,WAMR,MAAOlV,Kbs7BH,SAASvH,EAAQC,EAASE,GAE/B,YAsCA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAtChH7B,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,Mc19BjiBsC,EAAA/E,EAAA,Gdk/BKgF,EAAYvE,EAAuBsE,Gcj/BxCI,EAAAnF,EAAA,GACAoF,EAAApF,EAAA,IACAiF,EAAAjF,EAAA,GAIMuc,Edu/BW,Wc9+Bf,QAAAA,GAAY5W,GAAyBpD,EAAAqD,KAAA2W,GACnC3W,KAAKkI,MAAQnI,EAAOmI,MACpBlI,KAAKoC,SAAWrC,EAAOqC,Sd8xCxB,MA1SAlE,GAAayY,IACX1Y,IAAK,iBACL9C,MAAO,Scn/BKiH,GACbpC,KAAKoC,SAAWA,Kds/BfnE,IAAK,UACL9C,MAAO,Scp/BFyb,EAAUxW,GAChB,GAAMG,IACJK,QAASrB,EAAAsB,aAAayD,QACtBkJ,cAAc,EAAAnO,EAAAiE,qBAOhB,OAJIsT,KACFrW,EAAIsW,SAAWD,GAGVxX,EAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Mdu/B7CnC,IAAK,WACL9C,MAAO,Wc7+BoC,GAAA0G,GAAA/D,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAgZ,EAAAjV,EAP5C+G,KAAMC,EAOsCtN,SAAAub,EAP/B,EAO+BA,EAAAC,EAAAlV,EAN5CkH,SAAUC,EAMkCzN,SAAAwb,EANvB,GAMuBA,EAL5CrO,EAK4C7G,EAL5C6G,OAKMtI,EAAsCtC,UAAA,GACtCyC,GACJK,QAASrB,EAAAsB,aAAagN,cACtBC,aAAa,EAAAzO,EAAAiE,qBACbuF,OACAG,WAGEN,KACFnI,EAAI4I,OAAST,EAGf,IAAMW,IAAS,EAAA7J,EAAAoW,eAAc,aAAc5V,KAAKkI,MAEhD,OAAO9I,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK8H,IAASzH,QAAQxB,Mdy/B1DnC,IAAK,YACL9C,MAAO,SAAmBqN,Ecl/B1BpI,GAAsC,GAL7B2G,GAK6ByB,EAL7BzB,KAAMkD,EAKuBzB,EALvByB,OAAQtD,EAKe6B,EALf7B,MAAOU,EAKQmB,EALRnB,OAMzB9G,GACJK,QAASrB,EAAAsB,aAAaqM,WACtBpD,SAAS,EAAAzK,EAAAiE,qBACTqC,OAAQ0B,EACR2P,KAAMjQ,EACNkQ,QAAS,IACTC,MAAOvQ,EACPwQ,SAAUlN,EACV1G,SAAUvD,KAAKoC,SAGjB,OAAOhD,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Md0/B7CnC,IAAK,cACL9C,MAAO,Wcr/BoC,GAHlCic,GAGkCtZ,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAtCsC,EAAsCtC,UAAA,GACtCqJ,EAAUiQ,EAAMjQ,QAAUiQ,EAAMjQ,QAAUiQ,EAC1C7W,GACJK,QAASrB,EAAAsB,aAAauM,aAWxB,OARIgK,GAAMR,WACRrW,EAAIuJ,QAAUsN,EAAMR,UAGlBQ,EAAMjQ,UACR5G,EAAI6G,QAAUD,GAGT/H,EAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MdggC7CnC,IAAK,sBACL9C,MAAO,Wc/+BoC,GAAAqO,GAAA1L,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAuZ,EAAA7N,EAX5CZ,KAAMC,EAWsCtN,SAAA8b,EAX/B,EAW+BA,EAAAC,EAAA9N,EAV5CT,SAAUC,EAUkCzN,SAAA+b,EAVvB,GAUuBA,EAAAC,EAAA/N,EAT5CgO,OAAQC,EASoClc,SAAAgc,GATtB,IAAK,IAAK,IAAK,KASOA,EAR5C7O,EAQ4Cc,EAR5Cd,OACAkO,EAO4CpN,EAP5CoN,SAOMxW,EAAsCtC,UAAA,GACtCyC,GACJK,QAASrB,EAAAsB,aAAa2N,cACtBC,mBAAmB,EAAApP,EAAAiE,qBACnBuF,OACAG,WACAyO,aAGE/O,IAAUA,EAAO3K,SACnBwC,EAAI4I,OAAST,GAGXkO,IACFrW,EAAIsW,SAAWD,EAGjB,IAAMvN,IAAS,EAAA7J,EAAAoW,eAAc,kBAAmB5V,KAAKkI,MAErD,OAAO9I,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK8H,IAASzH,QAAQxB,Md8/B1DnC,IAAK,kBACL9C,MAAO,SAAyB4O,Ecv/BhC3J,GAAsC,GALvB6J,GAKuBF,EALvBE,OAAQzI,EAKeuI,EALfvI,KAKe0I,EAAAH,EALTL,WAKSnO,SAAA2O,EALE,MAKFA,EAAAC,EAAAJ,EALSK,SAKT7O,SAAA4O,EALkB,UAKlBA,EACjCuN,GAAQ,EAAArY,EAAAiE,qBACR/C,GACJK,QAASrB,EAAAsB,aAAa6M,iBACtBC,cAAe+J,EACf5N,QAAS4N,EACTC,OAAQvN,EACRwN,OAAQ3N,EACR4N,SAAUnO,EACVoO,KAAMtW,EAGR,OAAOpC,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MdigC7CnC,IAAK,kBACL9C,MAAO,SAAyB4c,Ec3/BhC3X,GAAqC,GAJV4X,GAIUD,EAJtBE,WAAwBC,EAIFH,EAJEG,kBAAmBjW,EAIrB8V,EAJqB9V,aAKrD1B,GACJK,QAASrB,EAAAsB,aAAasX,iBACtBxK,eAAe,EAAAtO,EAAAiE,qBACf0U,aAWF,OARIE,KACF3X,EAAI6X,kBAAoBF,GAGtBjW,IACF1B,EAAIqD,aAAe3B,GAGd7C,EAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MdkgC7CnC,IAAK,iBACL9C,MAAO,SchgCK8c,EAAoB7X,GACjC,GAAMsX,IAAQ,EAAArY,EAAAiE,qBACR/C,GACJK,QAASrB,EAAAsB,aAAawX,gBACtBnI,oBAAqBwH,EACrB5N,QAAS4N,EACTM,WAAYC,EAGd,OAAO7Y,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MdmgC7CnC,IAAK,qBACL9C,MAAO,Wct/BoC,GAAAmd,GAAAxa,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAya,EAAAD,EAV5C1P,KAAMC,EAUsCtN,SAAAgd,EAV/B,EAU+BA,EAAAC,EAAAF,EAT5CvP,SAAUC,EASkCzN,SAAAid,EATvB,GASuBA,EAAAC,EAAAH,EAR5Cd,OAAQC,EAQoClc,SAAAkd,GARtB,IAAK,IAAK,IAAK,KAQOA,EAP5C/P,EAO4C4P,EAP5C5P,OACAkO,EAM4C0B,EAN5C1B,SAMMxW,EAAsCtC,UAAA,GACtCyC,GACJK,QAASrB,EAAAsB,aAAaiO,aACtBC,kBAAkB,EAAA1P,EAAAiE,qBAClBuF,OACAG,WACAyO,aAGE/O,IAAUA,EAAO3K,SACnBwC,EAAI4I,OAAST,GAGXkO,IACFrW,EAAIsW,SAAWD,EAGjB,IAAMvN,IAAS,EAAA7J,EAAAoW,eAAc,iBAAkB5V,KAAKkI,MAEpD,OAAO9I,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK8H,IAASzH,QAAQxB,MdqgC1DnC,IAAK,iBACL9C,MAAO,Wc//BoC,GAAAud,GAAA5a,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAA6a,EAAAD,EAJ7BhP,WAI6BnO,SAAAod,EAJlB,MAIkBA,EAJXxd,EAIWud,EAJXvd,MAAOwO,EAII+O,EAJJ/O,gBAIlCvJ,EAAsCtC,UAAA,GACtC4Z,GAAQ,EAAArY,EAAAiE,qBACR/C,GACJK,QAASrB,EAAAsB,aAAamN,gBACtBC,aAAcyJ,EACd5N,QAAS4N,EACTG,SAAUnO,EACVnG,SAAUvD,KAAKoC,SAQjB,OALiB,QAAbsH,IACFnJ,EAAIqY,gBAAkBjP,EACtBpJ,EAAIsY,MAAQ1d,GAGPiE,EAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Md0gC7CnC,IAAK,wBACL9C,MAAO,ScxgCYiF,GACpB,GAAMG,IACJK,QAASrB,EAAAsB,aAAasN,gBACtBC,oBAAoB,EAAA/O,EAAAiE,qBACpBC,SAAUvD,KAAKoC,SAGjB,OAAOhD,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Md2gC7CnC,IAAK,gBACL9C,MAAO,Wc7/BmB,GAAA2d,GAAAhb,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAib,EAAAD,EAX3BlQ,KAAMC,EAWqBtN,SAAAwd,EAXd,EAWcA,EAAAC,EAAAF,EAV3B/P,SAAUC,EAUiBzN,SAAAyd,EAVN,GAUMA,EAT3B5W,EAS2B0W,EAT3B1W,SACAwU,EAQ2BkC,EAR3BlC,SACAlN,EAO2BoP,EAP3BpP,SAOMtJ,EAAqBtC,UAAA,GACrByC,GACJK,QAASrB,EAAAsB,aAAaqO,YACtBC,iBAAiB,EAAA9P,EAAAiE,qBACjBC,SAAUvD,KAAKoC,SACfyG,OACAG,WAGE5G,KACF7B,EAAIgD,SAAWnB,GAEbsH,IACFnJ,EAAIsX,SAAWnO,GAEbkN,IACFrW,EAAIsW,SAAWD,EAGjB,IAAMvN,IAAS,EAAA7J,EAAAoW,eAAc,gBAAiB5V,KAAKkI,MAEnD,OAAO9I,GAAApE,QAAQkG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK8H,IAASzH,QAAQxB,Od4gCrDuW,IAGTzc,GAAQc,Qc3gCM2b,Gd+gCT,SAAS1c,EAAQC,EAASE,GAE/B,YAoBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GAxBjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,Me/zCjiBsC,EAAA/E,EAAA,Gfm0CKgF,EAAYvE,EAAuBsE,Gel0CxC8Z,EAAA7e,EAAA,GAEAyF,EAAAzF,EAAA,Ifs0CK8e,EAAcre,EAAuBgF,Gep0C1CR,EAAAjF,EAAA,GAQM+e,Ef41CoB,SAAUC,Geh0ClC,QAAAD,KAAwC,GAA5BpZ,GAA4BjC,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,KAAAnB,GAAAqD,KAAAmZ,EAAA,IAAAlZ,GAAAlD,EAAAiD,MAAAmZ,EAAAxb,WAAA1C,OAAAgE,eAAAka,IAAA1e,KAAAuF,KAChCD,EAAQ,MADwB,OAGtCE,GAAKoZ,MAASC,MAAO,KAAMC,WAE3BtZ,EAAKuZ,UACLvZ,EAAKwZ,eAAe1Z,EAAO2Z,aAC3BzZ,EAAK0Z,QAAU5Z,EAAO4Z,QAEtB1Z,EAAKuE,aAAe,GAAAyU,GAAAW,eAAmBC,UAAU,EAAMC,UAAW,MAT5B7Z,EfmhDvC,MAlNA/C,GAAUic,EAAoBC,GAyC9Blb,EAAaib,IACXlb,IAAK,UACL9C,MAAO,Seh2CFiF,GAAsC,GAAAK,GAAAT,IAC5C,OAAOZ,GAAApE,QAAQkG,OAAO,GAAIC,SAAQ,SAACC,EAASC,GAC1CZ,EAAKsZ,SAAY3Y,UAASC,SAE1B,IAAM2Y,GAAYna,EAAAyC,QAAUlI,EAAQ,IAAQ6I,OAAO+W,SAEnDvZ,GAAKwZ,OAAS,GAAID,GAAUvZ,EAAKyZ,SAAU,KAAMzZ,EAAKkZ,SACtDlZ,EAAKwZ,OAAOE,OAAS1Z,EAAK2Z,OAAOC,KAAZ5Z,GACrBA,EAAKwZ,OAAOK,QAAU7Z,EAAK8Z,QAAQF,KAAb5Z,GACtBA,EAAKwZ,OAAOO,QAAU/Z,EAAKga,QAAQJ,KAAb5Z,GACtBA,EAAKwZ,OAAOS,UAAYja,EAAKka,UAAUN,KAAf5Z,MACtBmB,QAAQxB,Mfq2CXnC,IAAK,aACL9C,MAAO,Wel2CR6E,KAAKia,OAAOW,Wfs2CX3c,IAAK,SACL9C,MAAO,Wen2CR6E,KAAK+Z,QAAQ3Y,SAAUyZ,WAAW,Ofu2CjC5c,IAAK,UACL9C,MAAO,eAEP8C,IAAK,UACL9C,MAAO,Ser2CF2f,GACN9a,KAAK+Z,QAAQ1Y,OAAOyZ,Mfw2CnB7c,IAAK,cACL9C,MAAO,Set2CEoF,GACV,GAA+B,IAA3BP,KAAKia,OAAOc,WAAkB,CAChC,GAAMvZ,GAAOjB,CAEbiB,GAAKwZ,QAAUhb,KAAKqZ,KACpB7X,EAAKyZ,YAAcjb,KAAK0Z,YAExB1Z,KAAKia,OAAO3Y,KAAK4Z,KAAKC,UAAU3Z,Qf02CjCvD,IAAK,uBACL9C,MAAO,Sev2CWoF,GAA8B,GAAAuB,GAAA9B,IACjD,OAAO,IAAImB,SAAQ,SAACC,EAASC,GAC3B,GAAMgK,IAAYjK,UAASC,WAC3B,EAAAhC,EAAA+L,YAAW7K,GAAOa,UAASC,WAE3BS,EAAK8D,YAAYrF,EAAK8K,Qf62CvBpN,IAAK,YACL9C,MAAO,Se12CAoF,GACR,GAAMiB,GAAO0Z,KAAKE,MAAM7a,EAAIiB,KAC5B,IAAqB,UAAjBA,EAAKZ,QACP,KAAUya,OAAJ,UAAoB7Z,EAAK8Z,OAAzB,IAAmC9Z,EAAK+Z,YAGhD,IAAMxB,IAAU,EAAA1a,EAAA6L,YAAW1J,GACrBga,GAAU,EAAAnc,EAAAoM,iBAAgBjK,GAC1Bia,GAAW,EAAApc,EAAAyL,aAAYtJ,EAAKZ,QAElCZ,MAAK0b,gBAAgB3B,EAASvY,GAC9BxB,KAAK2b,sBAAsBH,EAASha,GACpCxB,KAAK4b,kBAAkBH,EAAUja,Mf62ChCvD,IAAK,kBACL9C,MAAO,Se32CM4e,EAAmBvY,GACjC,GAAIuY,GAAWA,EAAQ3Y,QAErB,OADA,EAAA/B,EAAAkM,eAAc/J,GACPuY,EAAQ3Y,QAAQI,Mf+2CxBvD,IAAK,wBACL9C,MAAO,Se52CYqgB,EAASha,GAC7B,GAAIga,EACF,MAAOA,GAAQha,Mfg3ChBvD,IAAK,oBACL9C,MAAO,Se72CQsgB,EAAoBja,GACpC,MAAOia,IAAYA,EAASja,Mfg3C3BvD,IAAK,iBACL9C,MAAO,Se92CK0gB,GAAkC,GAAA1X,GAAAnE,IAC/C,IAAAH,EAAAyC,QACE,MAAOlI,GAAQ,IAAsB0hB,OAAO,SAAAC,GAC1C5X,EAAKuV,YAAcqC,GAEhB,IAAAlc,EAAAmc,UAAe,CACpB,GAAMC,GAAe7hB,EAAQ,GAC7B,QAAO,GAAI6hB,IAAexd,IAAI,SAAAib,GAC5BvV,EAAKuV,YAAc/O,QAAKuR,IAAI9hB,EAAQ,IAAkB+hB,gBAAgBzC,MAEnE,IAAImC,EAGT,KAAUR,OAAM,2BAFhBrb,MAAK0Z,YAAcmC,Kfs3CpB5d,IAAK,UACL9C,MAAO,Wej3CM,GAAAwJ,GAAA3E,IACdH,GAAAyC,SACElI,EAAQ,IAAgBof,QAAQ,SAAAhY,GAC9BmD,EAAK0U,KAAO7X,Of23CfvD,IAAK,iBACL9C,MAAO,Set3CQkQ,EAAiBjL,GAAwC,GAAAyF,GAAA7F,IA8BzE,OA7BAqL,GAAQ+Q,GAAK,SAAC/T,EAAeoT,GAE3B,MADA5V,GAAKrB,aAAa4X,GAAG/T,EAAOoT,GACrBpQ,GAETA,EAAQgR,MAAQ,SAACZ,GAEf,MADA5V,GAAKrB,aAAa6X,MAAMZ,GACjBpQ,GAETA,EAAQiR,OAAS,SAACb,GAEhB,MADA5V,GAAKrB,aAAa8X,OAAOb,GAClBpQ,GAETA,EAAQkR,KAAO,SAAClU,EAAeoT,GAE7B,MADA5V,GAAKrB,aAAa+X,KAAKlU,EAAOoT,GACvBpQ,GAETA,EAAQmR,KAAO,SAACnU,EAAeoU,EAAehB,GAE5C,MADA5V,GAAKrB,aAAagY,KAAKnU,EAAOoU,EAAOhB,GAC9BpQ,GAETA,EAAQqR,eAAiB,SAACrU,EAAeoT,GAEvC,MADA5V,GAAKrB,aAAakY,eAAerU,EAAOoT,GACjCpQ,GAETA,EAAQsR,mBAAqB,SAACC,GAE5B,MADA/W,GAAKrB,aAAamY,mBAAmBC,GAC9BvR,GAGFjM,EAAApE,QAAQkG,OAAOmK,GAASzJ,QAAQxB,Of83CjC+Y,GACPD,EAAYle,QAEdd,GAAQc,Qe53CMme,Gfg4CT,SAASlf,EAAQC,EAASE,GAE/B,YAWA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAXhH7B,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQ8hB,UAAY9hB,EAAQoI,QAAU/G,MgB1kDvC,IAAAshB,GAAAziB,EAAA,IhB8kDK0iB,EAAWjiB,EAAuBgiB,GgBzkDjCE,GAHOza,UAA4B,mBAAXW,QACjB+Y,YAAgC,mBAAbgB,UAU9B,QAAAD,KAA6D,GAAjDhd,GAAiDjC,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAApBmf,EAAoBnf,UAAA,EAAAnB,GAAAqD,KAAA+c,EAE3D,IAAM7C,GACFna,EAAOmd,IAAOnd,EAAOmd,IACrBnd,EAAOod,KAAOL,EAAA9hB,QAAOmiB,KAAKF,GACZH,EAAA9hB,QAAOoiB,QAAQH,EAGjCjd,MAAKka,SAAWA,EAChBla,KAAKkI,MAAQnI,EAAOmI,OAAS,KhBumDhChO,GAAQc,QgBnmDM+hB,GhBumDT,SAAS9iB,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQc,SiB7pDPmiB,MACEE,GAAI,iCACJC,KAAM,+BAERF,SACEC,GAAI,0CACJC,KAAM,yCjBoqDJ,SAASrjB,EAAQC,GkB3qDvBD,EAAAC,QAAAqQ,QAAA,OlBirDM,SAAStQ,EAAQC,EAASE,GAE/B,YAWA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GmBlqDjF,QAASghB,GAAO1b,GACrBmd,EAAAviB,QAAWwiB,IAAI,SAACrV,EAAKqV,GACnB,GAAMC,GAAW,SAACC,GAChB,GAAIC,GAAO,CACX,IAAmB,IAAfD,EAAI3f,OAAc,MAAO4f,EAC7B,KAAK,GAAIphB,GAAI,EAAOmhB,EAAI3f,OAARxB,EAAgBA,IAC9BohB,GAASA,GAAQ,GAAKA,EAAQD,EAAIE,WAAWrhB,GAC7CohB,GAAcA,CAEhB,OAAOA,IAGLE,EAAe,EACnB5iB,QAAOoB,KAAKmhB,GAAKM,QAAQ,SAAAC,GACvBF,GAAgBL,EAAIO,GAAOC,KAG7B,IAAItE,GAAc+D,EAASI,EACT,GAAdnE,IACFA,IAAe,GAGjBtZ,EAASsZ,KnBmoDZze,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EmB5pDe4hB,QAFhB,IAAAmC,GAAA7jB,EAAA,InBkqDKmjB,EAAe1iB,EAAuBojB,IAwDrC,SAAShkB,EAAQC,GoBpvDvBD,EAAAC,QAAAqQ,QAAA,epB0vDM,SAAStQ,EAAQC,GqB1vDvBD,EAAAC,QAAAqQ,QAAA,mBrBgwDM,SAAStQ,EAAQC,GAEtB,YsBvvDD,IAAMgkB,GAAS,UACTC,GAAa,WASbC,EAAS,SAACC,GACd,GAAIC,GAAID,EAAIC,EACRC,EAAIF,EAAIE,EACR5jB,EAAI0jB,EAAI1jB,CA+BZ,OA9BA2jB,IAAKC,EACLD,GAAK3jB,EACL2jB,GAAK3jB,IAAM,GACX4jB,GAAK5jB,EACL4jB,GAAKD,EACLC,GAAKD,GAAK,EACV3jB,GAAK2jB,EACL3jB,GAAK4jB,EACL5jB,GAAK4jB,IAAM,GACXD,GAAKC,EACLD,GAAK3jB,EACL2jB,GAAK3jB,IAAM,GACX4jB,GAAK5jB,EACL4jB,GAAKD,EACLC,GAAKD,GAAK,GACV3jB,GAAK2jB,EACL3jB,GAAK4jB,EACL5jB,GAAK4jB,IAAM,EACXD,GAAKC,EACLD,GAAK3jB,EACL2jB,GAAK3jB,IAAM,EACX4jB,GAAK5jB,EACL4jB,GAAKD,EACLC,GAAKD,GAAK,GACV3jB,GAAK2jB,EACL3jB,GAAK4jB,EACL5jB,GAAK4jB,IAAM,GACXF,EAAIC,EAAIA,EACRD,EAAIE,EAAIA,EACRF,EAAI1jB,EAAIA,EACDA,GAUH6jB,EAAY,SAACC,GACjB,MAAOA,GAAI,IAAMA,EAAI,IAAMA,GAGvBC,EAAU,SAACC,EAAOC,GACtB,GAAIN,GAAIE,EAAUG,EAAMC,EAAS,IAC7BL,EAAIC,EAAUG,EAAMC,EAAS,IAC7BjkB,EAAI6jB,EAAUG,EAAMC,EAAS,IAC7Ble,EAAI8d,EAAUG,EAAMC,EAAS,GACjC,OAAON,IAAKC,GAAK,IAAM5jB,GAAK,KAAO+F,GAAK,IAM1CzG,GAAOC,QAAQiiB,gBAAkB,SAAyBwC,GACxD,GAUIE,GAVAD,EAAS,EACT7gB,EAAS4gB,EAAM5gB,OACf+gB,EAAOZ,EAEPG,GACFC,EAAGH,EACHI,EAAGJ,EACHxjB,EAAGmkB,EAIL,KAAKD,EAAS9gB,EAAQ8gB,GAAU,GAAIA,GAAU,GAAID,GAAU,GAC1DP,EAAIC,GAAKI,EAAQC,EAAOC,GACxBP,EAAIE,GAAKG,EAAQC,EAAOC,EAAS,GACjCP,EAAI1jB,GAAK+jB,EAAQC,EAAOC,EAAS,GACjCR,EAAOC,EAIT,QADAA,EAAI1jB,GAAKoD,EACD8gB,GACN,IAAK,IACHR,EAAI1jB,GAAMgkB,EAAMC,EAAS,KAAQ,EACnC,KAAK,IACHP,EAAI1jB,IAA0B,IAApBgkB,EAAMC,EAAS,KAAc,EACzC,KAAK,GACHP,EAAI1jB,IAA0B,IAApBgkB,EAAMC,EAAS,KAAc,CAEzC,KAAK,GACHP,EAAIE,GAAKG,EAAQC,EAAOC,EAAS,GACjCP,EAAIC,GAAKI,EAAQC,EAAOC,EACxB,MACF,KAAK,GACHP,EAAIE,IAA0B,IAApBI,EAAMC,EAAS,KAAc,EACzC,KAAK,GACHP,EAAIE,IAA0B,IAApBI,EAAMC,EAAS,KAAc,CACzC,KAAK,GACHP,EAAIE,GAA0B,IAApBI,EAAMC,EAAS,EAC3B,KAAK,GACHP,EAAIC,GAAKI,EAAQC,EAAOC,EACxB,MACF,KAAK,GACHP,EAAIC,IAA0B,IAApBK,EAAMC,EAAS,KAAc,EACzC,KAAK,GACHP,EAAIC,IAA0B,IAApBK,EAAMC,EAAS,KAAc,CACzC,KAAK,GACHP,EAAIC,GAA0B,IAApBK,EAAMC,EAAS,GAG7B,MAAOR,GAAOC,KtBywDV,SAASpkB,EAAQC,EAASE,GAE/B,YA0CA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GuBv5DxF,QAASikB,GAAaC,GAChBA,EAAUC,MAAM,yDAClBC,EAAO5F,MAAQ0F,EACNE,EAAO3F,OAAO/c,QAAQwiB,MAAe,GAC9CE,EAAO3F,OAAO/C,KAAKwI,GAIhB,QAASxF,GAAQpZ,GACtB,GAAM6Z,GAASkF,EAAAnkB,QAAMokB,aAAa,QAE5BC,EAAqB,GACrBC,EAAc,GAAIC,QAAOF,GAEzBG,EAAsB,EACtBC,EAAqB,EACrBC,EAAoB,UACpBC,EAAehV,KAAKiV,IAAI,EAAG,IAE3BC,EAA2B,EAC3BC,EAA+B,MAC/BC,EAAmC,GAEnCC,EAAYrV,KAAKC,SAAW+U,EAE5BM,IACH,KAAM,8BACN,MAAO,sBACP,KAAM,0BACN,KAAM,sBACN,KAAM,6BACN,KAAM,qBACN,KAAM,kBACN,KAAM,sBACN,KAAM,mBACN,KAAM,mBACN,KAAM,qBACN,KAAM,yBAGTX,GAAYY,cAA4D,OAA5CT,EAAqBD,GAAgC,GACjFF,EAAYY,cAAc,EAAG,GAC7BZ,EAAYa,cAAcT,EAAmB,GAC7CJ,EAAYa,cAAc,EAAG,GAC7Bb,EAAYa,cAAc,EAAG,IAC7Bb,EAAYa,cAAcH,EAAU,IAEpC/F,EAAOmC,GAAG,UAAW,SAAC7b,GACpB,GAAM6f,GAAM,SAAC9B,EAAGC,GACd,GAAM/c,KACN,IAAI+c,EAAExgB,OAASugB,EAAEvgB,OAAQ,CACvB,GAAMsiB,GAAM/B,CACZA,GAAIC,EACJA,EAAI8B,EAEN,IAAK,GAAI9jB,GAAI,EAAG+jB,EAAMhC,EAAEvgB,OAAYuiB,EAAJ/jB,EAASA,IACvCiF,EAAKgV,KAAK8H,EAAE/hB,GAAKgiB,EAAEhiB,GAGrB,OAAO,IAAIgjB,QAAO/d,IAGd+e,EAAQhgB,EAAIigB,UAAU,GACtBC,EAAe,IAARF,EACPG,EAAe,GAARH,CAEb,IAAe,IAATE,GAAuB,IAATC,EAApB,CASA,IALA,GAAMC,GAAYpgB,EAAIqgB,MAAM,EAAGvB,GACzBwB,EAAWtgB,EAAIqgB,MAAMvB,EAAoB9e,EAAIxC,QAE/C6gB,EAAS,EAEGiC,EAAS9iB,OAAlB6gB,GAA0B,CAC/B,GAAMkC,GAAWD,EAASE,aAAanC,EACvCA,IAAU,CAEV,IAAIoC,GAAiBH,EAASE,aAAanC,GACrCqC,EAAWD,EAAiB,CAC9BC,GAAW,IACbD,GAAkB,EAAIC,GAExBrC,GAAU,CAEV,IAAMzjB,GAAQ0lB,EAASD,MAAMhC,EAAQA,EAASoC,EAC9CpC,IAAUoC,CAEV,IAAIE,UACAC,QACJ,QAAQL,GACN,IAAKjB,GACHqB,EAAoC,IAA1B/lB,EAAM4lB,aAAa,GAAe,EAAI,EAChDI,EAAUC,EAAApmB,QAAGqmB,SAASlmB,EAAO,EAAG+lB,GAChCnC,EAAaoC,EACb,MAEF,KAAKrB,GACL,IAAKC,GACHmB,EAAoC,IAA1B/lB,EAAM4lB,aAAa,GAAe,EAAI,CAChD,IAAMO,GAAQX,EAAUC,MAAM,EAAG,GAC3BW,EAAMZ,EAAUC,MAAM,EAAG,IACzBY,EAAQrmB,EAAMylB,MAAM,EAAc,IAAXM,EAAe,EAAI,IAC1CO,EAAOrB,EAAIoB,EAAkB,IAAXN,EAAeI,EAAQnmB,EAAMumB,QAAQJ,EAAOC,IACpEJ,GAAUC,EAAApmB,QAAGqmB,SAASI,EAAM,EAAGP,GAC/BnC,EAAaoC,IAMnB/gB,EAAS8e,MAGXe,EAAY3Z,IAAI,SAAAzE,GAAA,GAAA2G,GAAAmZ,EAAA9f,EAAA,GAAE+f,EAAFpZ,EAAA,GAAQqZ,EAARrZ,EAAA,SAAkByR,GAAO3Y,KAAKge,EAAa,EAAGA,EAAYvhB,OAAQ6jB,EAAMC,EAAM,gBvB4vD/F5mB,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAIwmB,GAAiB,WAAc,QAASG,GAAcC,EAAKxlB,GAAK,GAAIylB,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAK5mB,MAAW,KAAM,IAAK,GAAiC6mB,GAA7BC,EAAKN,EAAIpc,OAAO2c,cAAmBL,GAAMG,EAAKC,EAAGE,QAAQC,QAAoBR,EAAKxL,KAAK4L,EAAGjnB,QAAYoB,GAAKylB,EAAKjkB,SAAWxB,GAA3D0lB,GAAK,IAAoE,MAAO9Z,GAAO+Z,GAAK,EAAMC,EAAKha,EAAO,QAAU,KAAW8Z,GAAMI,EAAW,QAAGA,EAAW,SAAO,QAAU,GAAIH,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUD,EAAKxlB,GAAK,GAAIkmB,MAAMC,QAAQX,GAAQ,MAAOA,EAAY,IAAIpc,OAAO2c,WAAYrnB,QAAO8mB,GAAQ,MAAOD,GAAcC,EAAKxlB,EAAa,MAAM,IAAIO,WAAU,2DA0BtlB5C,GuBr4Desf,SAbhB,IAAAmJ,GAAAvoB,EAAA,IvBs5DKgnB,EAAOvmB,EAAuB8nB,GuBr5DnCC,EAAAxoB,EAAA,IvBy5DK+kB,EAAUtkB,EAAuB+nB,GuBv5DhC1D,GAAW5F,MAAO,KAAMC,YvB8gExB,SAAStf,EAAQC,GwB3iEvBD,EAAAC,QAAAqQ,QAAA,OxBijEM,SAAStQ,EAAQC,GyBjjEvBD,EAAAC,QAAAqQ,QAAA,UzBujEM,SAAStQ,EAAQC,G0BvjEvBD,EAAAC,QAAAqQ,QAAA,O1B6jEM,SAAStQ,EAAQC,EAASE,GAE/B,YAoBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GAxBjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,M2B/iEjiBsC,EAAA/E,EAAA,G3BmjEKgF,EAAYvE,EAAuBsE,G2BljExCvD,EAAAxB,EAAA,I3BsjEKyB,EAAShB,EAAuBe,G2BrjErC6D,EAAArF,EAAA,I3ByjEKsF,EAAU7E,EAAuB4E,G2BvjEhCrE,E3BqlEgB,SAAU0E,G2BplE9B,QAAA1E,GAAY2E,GAAyBpD,EAAAqD,KAAA5E,EAAA,IAAA6E,GAAAlD,EAAAiD,MAAA5E,EAAAuC,WAAA1C,OAAAgE,eAAA7D,IAAAX,KAAAuF,KAC7BD,GAD6B,OAEnCE,GAAKC,UAAYH,EAAOG,WAAa,GAAArE,GAAAb,QAAkB+E,GAFpBE,E3BmoEpC,MA9CA/C,GAAU9B,EAAgB0E,GAW1B5B,EAAa9C,IACX6C,IAAK,OACL9C,MAAO,S2B7lEL0nB,GACH,MAAO7iB,MAAKE,UAAU4iB,WAAWD,M3BgmEhC5kB,IAAK,cACL9C,MAAO,S2B9lEE0nB,GACV,MAAO7iB,MAAKE,UAAU6iB,YAAYF,M3BimEjC5kB,IAAK,SACL9C,MAAO,S2B/lEHiF,GACL,MAAOhB,GAAApE,QAAQkG,OAAOlB,KAAK+iB,YAAY,WAAWnhB,QAAQxB;I3BkmEzDnC,IAAK,SACL9C,MAAO,W2B7lEoC,GAAA0G,GAAA/D,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAklB,EAAAnhB,EAHrCohB,QAGqC1nB,SAAAynB,EAH7B,IAG6BA,EAAAE,EAAArhB,EAHxB4G,QAGwBlN,SAAA2nB,EAHhB,EAGgBA,EAAtC9iB,EAAsCtC,UAAA,EAC5C,OAAOsB,GAAApE,QAAQkG,OAAOlB,KAAK+iB,YAAL,gBAAiCE,EAAjC,UAAgDxa,IAAU7G,QAAQxB,M3BwmEvFnC,IAAK,YACL9C,MAAO,S2BtmEAiF,GACR,MAAOhB,GAAApE,QAAQkG,OAAOlB,KAAK+iB,YAAY,cAAcnhB,QAAQxB,O3B0mEvDhF,GACPsE,EAAQ1E,QAEVd,GAAQc,Q2BzmEMI,G3B6mET,SAASnB,EAAQC,EAASE,GAE/B,YAwBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GA5BjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,M4BvpEjiBsmB,EAAA/oB,EAAA,I5B2pEKgpB,EAAQvoB,EAAuBsoB,G4B1pEpCE,EAAAjpB,EAAA,I5B8pEKkpB,EAASzoB,EAAuBwoB,G4B7pErCE,EAAAnpB,EAAA,I5BiqEKopB,EAAkB3oB,EAAuB0oB,G4B/pE9C1jB,EAAAzF,EAAA,I5BmqEK8e,EAAcre,EAAuBgF,GA8BrC4jB,G4B/rEa,EAAAD,EAAAxoB,SAAcmG,SAAxBuiB,E5BgsEMD,E4BhsENC,MAEFC,E5BgsEe,SAAUvK,G4BhrE7B,QAAAuK,GAAY5jB,GAAwBpD,EAAAqD,KAAA2jB,EAAA,IAAA1jB,GAAAlD,EAAAiD,MAAA2jB,EAAAhmB,WAAA1C,OAAAgE,eAAA0kB,IAAAlpB,KAAAuF,KAC5BD,EAAQ,QADoB,OAGlCE,GAAKhC,IAAM8B,EAAO9B,IAClBgC,EAAK2jB,OAAS7jB,EAAO6jB,OACrB3jB,EAAKyJ,SAAW3J,EAAO2J,UAAY,MALDzJ,E5BsvEnC,MArEA/C,GAAUymB,EAAevK,GAyBzBlb,EAAaylB,IACX1lB,IAAK,UACL9C,MAAO,S4BpsEFiP,EAAgByZ,GACtB,GAAMC,GAAYnjB,QAAKe,MACjBqiB,EAAST,EAAAtoB,QAAKgpB,MAAMC,WAAWC,OAAOlkB,KAAK4jB,QAC3CO,EAAO,GAAIb,GAAAtoB,QAAKopB,KAAKD,KAAKJ,EAAQT,EAAAtoB,QAAK2iB,KAAK0G,QAC5CC,EAAYhB,EAAAtoB,QAAKgpB,MAAMO,IAAIC,SAASL,EAAKM,QAAQX,GACvD,QACE1Z,SACAuP,SACE+K,eAAgB,mBAChBC,MAAOb,EACPc,OAAQ5kB,KAAK/B,IACbqmB,aAEFT,KAAM3I,KAAKC,UAAU0I,O5BwsEtB5lB,IAAK,QACL9C,MAAO,S4BrsEJoF,EAAaskB,GAAqD,GAAxClL,GAAwC7b,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,KACtE,OAAO4lB,GAAMN,EAAApoB,QAAIoG,QAAQpB,KAAKka,SAAU2K,GAAMlL,GAC3CpY,KAAK,SAAAujB,GAAA,MAAYA,GAASC,Y5B2sE5B9mB,IAAK,cACL9C,MAAO,S4BzsEE0pB,GACV,MAAO7kB,MAAK0jB,SAAL,UAAyB1jB,KAAK0J,SAA9B,IAA0Cmb,M5B4sEhD5mB,IAAK,aACL9C,MAAO,S4B1sECoF,GACT,GAAMoZ,GAAU3Z,KAAK2Z,QAAQ,OAAQpZ,EACrC,OAAOP,MAAK0jB,MAAMnjB,EAAK,kBAAmBoZ,GACvCpY,KAAK,SAAAujB,GAAA,MAAiC,OAApBA,EAASE,OAAiB7jB,QAAQE,OAAOyjB,GAAYA,EAASG,YAChF1jB,KAAK,SAAAujB,GAAA,MAAiC,KAApBA,EAAS/mB,OAAe+mB,EAAS,GAAKA,Q5BgtErDnB,GACPzK,EAAYle,QAEdd,GAAQc,Q4B/sEM2oB,G5BmtET,SAAS1pB,EAAQC,G6B3yEvBD,EAAAC,QAAAqQ,QAAA,Q7BizEM,SAAStQ,EAAQC,G8BjzEvBD,EAAAC,QAAAqQ,QAAA,S9BuzEM,SAAStQ,EAAQC,G+BvzEvBD,EAAAC,QAAAqQ,QAAA","file":"blinktrade.min.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.BlinkTradeRest = exports.BlinkTradeWS = exports.Brokers = undefined;\n\t\n\tvar _brokers = __webpack_require__(1);\n\t\n\tvar _brokers2 = _interopRequireDefault(_brokers);\n\t\n\tvar _ws = __webpack_require__(2);\n\t\n\tvar _ws2 = _interopRequireDefault(_ws);\n\t\n\tvar _rest = __webpack_require__(25);\n\t\n\tvar _rest2 = _interopRequireDefault(_rest);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.Brokers = _brokers2.default;\n\texports.BlinkTradeWS = _ws2.default;\n\texports.BlinkTradeRest = _rest2.default; /**\n\t                                          * BlinkTradeJS SDK\n\t                                          * (c) 2016-present BlinkTrade, Inc.\n\t                                          *\n\t                                          * This file is part of BlinkTradeJS\n\t                                          *\n\t                                          * This program is free software: you can redistribute it and/or modify\n\t                                          * it under the terms of the GNU General Public License as published by\n\t                                          * the Free Software Foundation, either version 3 of the License, or\n\t                                          * (at your option) any later version.\n\t                                         \n\t                                          * This program is distributed in the hope that it will be useful,\n\t                                          * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                          * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                          * GNU General Public License for more details.\n\t                                         \n\t                                          * You should have received a copy of the GNU General Public License\n\t                                          * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                          *\n\t                                          * \n\t                                          */\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  SURBITCOIN: 1,\n\t  VBTC: 3,\n\t  FOXBIT: 4,\n\t  TESTNET: 5,\n\t  URDUBIT: 8,\n\t  CHILEBIT: 9\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _eventemitter = __webpack_require__(4);\n\t\n\tvar _listener = __webpack_require__(5);\n\t\n\tvar _events = __webpack_require__(10);\n\t\n\tvar _messages = __webpack_require__(6);\n\t\n\tvar _utils = __webpack_require__(11);\n\t\n\tvar _trade = __webpack_require__(12);\n\t\n\tvar _trade2 = _interopRequireDefault(_trade);\n\t\n\tvar _websocket = __webpack_require__(13);\n\t\n\tvar _websocket2 = _interopRequireDefault(_websocket);\n\t\n\tvar _transport = __webpack_require__(14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar BlinkTradeWS = function (_TradeBase) {\n\t  _inherits(BlinkTradeWS, _TradeBase);\n\t\n\t  /**\n\t   * Session to store login information\n\t   */\n\t  function BlinkTradeWS(params) {\n\t    _classCallCheck(this, BlinkTradeWS);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BlinkTradeWS.__proto__ || Object.getPrototypeOf(BlinkTradeWS)).call(this, params));\n\t\n\t    _this.transport = params.transport || new _websocket2.default(params);\n\t    _this.session = {};\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BlinkTradeWS, [{\n\t    key: 'connect',\n\t    value: function connect(callback) {\n\t      return this.transport.connect(callback);\n\t    }\n\t  }, {\n\t    key: 'disconnect',\n\t    value: function disconnect() {\n\t      return this.transport.disconnect();\n\t    }\n\t  }, {\n\t    key: 'send',\n\t    value: function send(msg) {\n\t      return this.transport.sendMessageAsPromise(msg);\n\t    }\n\t  }, {\n\t    key: 'heartbeat',\n\t    value: function heartbeat(callback) {\n\t      var _this2 = this;\n\t\n\t      var d = new Date();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.HEARTBEAT,\n\t        TestReqID: d.getTime(),\n\t        SendTime: d.getTime()\n\t      };\n\t\n\t      return _nodeify2.default.extend(new Promise(function (resolve, reject) {\n\t        return _this2.send(msg).then(function (data) {\n\t          return resolve(_extends({}, data, {\n\t            Latency: new Date(Date.now()) - data.SendTime\n\t          }));\n\t        }).catch(reject);\n\t      })).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'login',\n\t    value: function login(_ref, callback) {\n\t      var _this3 = this;\n\t\n\t      var username = _ref.username,\n\t          password = _ref.password,\n\t          secondFactor = _ref.secondFactor,\n\t          token = _ref.token,\n\t          trustedDevice = _ref.trustedDevice,\n\t          brokerId = _ref.brokerId;\n\t\n\t      var userAgent = void 0;\n\t      if (!_transport.IS_NODE) {\n\t        userAgent = {\n\t          UserAgent: window.navigator.userAgent,\n\t          UserAgentLanguage: window.navigator.language,\n\t          UserAgentPlatform: window.navigator.platform,\n\t          UserAgentTimezoneOffset: new Date().getTimezoneOffset()\n\t        };\n\t      } else {\n\t        var os = __webpack_require__(24);\n\t        userAgent = {\n\t          UserAgent: os.type() + ' ' + os.release(),\n\t          UserAgentLanguage: 'en_US',\n\t          UserAgentPlatform: os.platform() + ' (' + os.arch() + ')',\n\t          UserAgentTimezoneOffset: new Date().getTimezoneOffset()\n\t        };\n\t      }\n\t\n\t      var msg = _extends({\n\t        MsgType: _messages.ActionMsgReq.LOGIN,\n\t        UserReqID: (0, _listener.generateRequestId)(),\n\t        BrokerID: brokerId || this.brokerId,\n\t        Username: username,\n\t        Password: password,\n\t        UserReqTyp: '1',\n\t        TrustedDevice: trustedDevice || false\n\t      }, userAgent);\n\t\n\t      if (secondFactor) {\n\t        msg.SecondFactor = secondFactor;\n\t      }\n\t\n\t      if (token) {\n\t        msg.Token = token;\n\t      }\n\t\n\t      return _nodeify2.default.extend(new Promise(function (resolve, reject) {\n\t        return _this3.send(msg).then(function (data) {\n\t          if (data.UserStatus === 1) {\n\t            _this3.session = data;\n\t            return resolve(data);\n\t          }\n\t\n\t          return reject(data);\n\t        }).catch(reject);\n\t      })).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'logout',\n\t    value: function logout(callback) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.LOGOUT,\n\t        BrokerID: this.brokerId,\n\t        UserReqID: (0, _listener.generateRequestId)(),\n\t        Username: this.session.Username,\n\t        UserReqTyp: '2'\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'profile',\n\t    value: function profile(callback) {\n\t      var _session$Profile = this.session.Profile,\n\t          VerificationData = _session$Profile.VerificationData,\n\t          profile = _objectWithoutProperties(_session$Profile, ['VerificationData']);\n\t\n\t      return _nodeify2.default.extend(Promise.resolve(profile)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'balance',\n\t    value: function balance(callback) {\n\t      var _this4 = this;\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _get(BlinkTradeWS.prototype.__proto__ || Object.getPrototypeOf(BlinkTradeWS.prototype), 'balance', _this4).call(_this4, callback).then(function (data) {\n\t          (0, _listener.registerListener)(_messages.ActionMsgReq.BALANCE, function (balance) {\n\t            callback && callback(null, balance);\n\t            return _this4.transport.eventEmitter.emit(_events.BALANCE, balance);\n\t          });\n\t          return resolve(data);\n\t        }).catch(reject);\n\t      }));\n\t    }\n\t  }, {\n\t    key: 'subscribeTicker',\n\t    value: function subscribeTicker(symbols, callback) {\n\t      var _this5 = this;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n\t        SecurityStatusReqID: (0, _listener.generateRequestId)(),\n\t        SubscriptionRequestType: '1',\n\t        Instruments: symbols\n\t      };\n\t\n\t      var formatTicker = function formatTicker(data) {\n\t        return _extends({}, data, {\n\t          SellVolume: data.SellVolume / 1e8,\n\t          LowPx: data.LowPx / 1e8,\n\t          LastPx: data.LastPx / 1e8,\n\t          BestAsk: data.BestAsk / 1e8,\n\t          HighPx: data.HighPx / 1e8,\n\t          BuyVolume: data.BuyVolume / 1e8,\n\t          BestBid: data.BestBid / 1e8\n\t        });\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _this5.send(msg).then(function (data) {\n\t          resolve(formatTicker(data));\n\t          (0, _listener.registerEventEmitter)('SecurityStatusReqID', data.SecurityStatusReqID, function (ticker) {\n\t            callback && callback(null, formatTicker(ticker));\n\t            return _this5.transport.eventEmitter.emit(ticker.Market + ':' + ticker.Symbol, formatTicker(ticker));\n\t          });\n\t        }).catch(reject);\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'unSubscribeTicker',\n\t    value: function unSubscribeTicker(SecurityStatusReqID) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n\t        SecurityStatusReqID: SecurityStatusReqID,\n\t        SubscriptionRequestType: '2'\n\t      };\n\t\n\t      this.transport.sendMessage(msg);\n\t      return SecurityStatusReqID;\n\t    }\n\t  }, {\n\t    key: 'subscribeOrderbook',\n\t    value: function subscribeOrderbook(symbols, callback) {\n\t      var _this6 = this;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.MD_FULL_REFRESH,\n\t        MDReqID: (0, _listener.generateRequestId)(),\n\t        SubscriptionRequestType: '1',\n\t        MarketDepth: 0,\n\t        MDUpdateType: '1', // Incremental refresh\n\t        MDEntryTypes: ['0', '1', '2'],\n\t        Instruments: symbols\n\t      };\n\t\n\t      var subscribeEvent = function subscribeEvent(data) {\n\t        if (data.MDBkTyp === '3') {\n\t          data.MDIncGrp.map(function (order) {\n\t            var dataOrder = {\n\t              index: order.MDEntryPositionNo,\n\t              price: order.MDEntryPx / 1e8,\n\t              size: order.MDEntrySize / 1e8,\n\t              side: order.MDEntryType === '0' ? 'buy' : 'sell',\n\t              userId: order.UserID,\n\t              orderId: order.OrderID,\n\t              symbol: order.Symbol,\n\t              time: new Date(order.MDEntryDate + ' ' + order.MDEntryTime).toString()\n\t            };\n\t\n\t            switch (order.MDEntryType) {\n\t              case '0':\n\t              case '1':\n\t                var orderbookEvent = 'OB:' + _events.EVENTS.ORDERBOOK[order.MDUpdateAction];\n\t                var bidOfferData = _extends({}, dataOrder, { type: orderbookEvent });\n\t\n\t                callback && callback(null, bidOfferData);\n\t                return _this6.transport.eventEmitter.emit(orderbookEvent, bidOfferData);\n\t              case '2':\n\t                var tradeEvent = 'OB:' + _events.EVENTS.TRADES[order.MDUpdateAction];\n\t                var tradeData = _extends({}, dataOrder, { type: tradeEvent });\n\t\n\t                callback && callback(null, tradeData);\n\t                return _this6.transport.eventEmitter.emit(tradeEvent, tradeData);\n\t              case '4':\n\t                break;\n\t              default:\n\t                return null;\n\t            }\n\t            return null;\n\t          });\n\t        }\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _this6.send(msg).then(function (data) {\n\t          (0, _listener.registerEventEmitter)('MDReqID', data.MDReqID, subscribeEvent);\n\t          return resolve((0, _utils.formatOrderBook)(data, _this6.level));\n\t        }).catch(function (err) {\n\t          return reject(err);\n\t        });\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'unSubscribeOrderbook',\n\t    value: function unSubscribeOrderbook(MDReqID) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.MD_FULL_REFRESH,\n\t        MDReqID: MDReqID,\n\t        MarketDepth: 0,\n\t        SubscriptionRequestType: '2'\n\t      };\n\t\n\t      this.transport.sendMessage(msg);\n\t      return MDReqID;\n\t    }\n\t  }, {\n\t    key: 'executionReport',\n\t    value: function executionReport(callback) {\n\t      var _this7 = this;\n\t\n\t      (0, _listener.registerListener)('8', function (data) {\n\t        callback && callback(data);\n\t        var event = _events.EVENTS.EXECUTION_REPORT[data.ExecType];\n\t        return _this7.transport.eventEmitter.emit(_events.EXECUTION_REPORT + ':' + event, data);\n\t      });\n\t\n\t      return this.transport.eventEmitter;\n\t    }\n\t  }, {\n\t    key: 'tradeHistory',\n\t    value: function tradeHistory() {\n\t      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          since = _ref2.since,\n\t          filter = _ref2.filter,\n\t          _ref2$page = _ref2.page,\n\t          Page = _ref2$page === undefined ? 0 : _ref2$page,\n\t          _ref2$pageSize = _ref2.pageSize,\n\t          PageSize = _ref2$pageSize === undefined ? 80 : _ref2$pageSize;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.TRADE_HISTORY,\n\t        TradeHistoryReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize\n\t      };\n\t\n\t      if (filter && filter.length > 0) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      if (since && typeof since === 'number') {\n\t        msg.Since = since;\n\t      }\n\t\n\t      var format = (0, _utils.formatTradeHistory)(this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDeposit',\n\t    value: function requestDeposit() {\n\t      var _this8 = this;\n\t\n\t      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref3$currency = _ref3.currency,\n\t          currency = _ref3$currency === undefined ? 'BTC' : _ref3$currency,\n\t          value = _ref3.value,\n\t          depositMethodId = _ref3.depositMethodId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var subscribeEvent = function subscribeEvent(deposit) {\n\t        callback && callback(null, deposit);\n\t        return _this8.transport.eventEmitter.emit(_events.DEPOSIT_REFRESH, deposit);\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _get(BlinkTradeWS.prototype.__proto__ || Object.getPrototypeOf(BlinkTradeWS.prototype), 'requestDeposit', _this8).call(_this8, { currency: currency, value: value, depositMethodId: depositMethodId }).then(function (deposit) {\n\t          (0, _listener.registerEventEmitter)('ClOrdID', deposit.ClOrdID, subscribeEvent);\n\t          return resolve(deposit);\n\t        }).catch(reject);\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'onDepositRefresh',\n\t    value: function onDepositRefresh(callback) {\n\t      return new Promise(function (resolve) {\n\t        (0, _listener.registerListener)('U23', function (deposit) {\n\t          callback && callback(deposit);\n\t          return resolve(deposit);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'requestWithdraw',\n\t    value: function requestWithdraw(_ref4, callback) {\n\t      var _this9 = this;\n\t\n\t      var amount = _ref4.amount,\n\t          data = _ref4.data,\n\t          _ref4$currency = _ref4.currency,\n\t          currency = _ref4$currency === undefined ? 'BTC' : _ref4$currency,\n\t          _ref4$method = _ref4.method,\n\t          method = _ref4$method === undefined ? 'bitcoin' : _ref4$method;\n\t\n\t      var subscribeEvent = function subscribeEvent(withdraw) {\n\t        callback && callback(null, withdraw);\n\t        return _this9.transport.eventEmitter.emit(_events.WITHDRAW_REFRESH, withdraw);\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _get(BlinkTradeWS.prototype.__proto__ || Object.getPrototypeOf(BlinkTradeWS.prototype), 'requestWithdraw', _this9).call(_this9, { amount: amount, data: data, currency: currency, method: method }).then(function (withdraw) {\n\t          (0, _listener.registerEventEmitter)('ClOrdID', withdraw.ClOrdID, subscribeEvent);\n\t          return resolve(withdraw);\n\t        }).catch(reject);\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'onWithdrawRefresh',\n\t    value: function onWithdrawRefresh(callback) {\n\t      return new Promise(function (resolve) {\n\t        (0, _listener.registerListener)('U9', function (withdraw) {\n\t          callback && callback(withdraw);\n\t          return resolve(withdraw);\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return BlinkTradeWS;\n\t}(_trade2.default);\n\t\n\texports.default = BlinkTradeWS;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"nodeify\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"eventemitter2\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getListeners = getListeners;\n\texports.generateRequestId = generateRequestId;\n\texports.getListener = getListener;\n\texports.getRequest = getRequest;\n\texports.setRequest = setRequest;\n\texports.deleteRequest = deleteRequest;\n\texports.getEventEmitter = getEventEmitter;\n\texports.registerEventEmitter = registerEventEmitter;\n\texports.registerListener = registerListener;\n\t\n\tvar _messages = __webpack_require__(6);\n\t\n\tvar store = new Map(); /**\n\t                        * BlinkTradeJS SDK\n\t                        * (c) 2016-present BlinkTrade, Inc.\n\t                        *\n\t                        * This file is part of BlinkTradeJS\n\t                        *\n\t                        * This program is free software: you can redistribute it and/or modify\n\t                        * it under the terms of the GNU General Public License as published by\n\t                        * the Free Software Foundation, either version 3 of the License, or\n\t                        * (at your option) any later version.\n\t                       \n\t                        * This program is distributed in the hope that it will be useful,\n\t                        * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                        * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                        * GNU General Public License for more details.\n\t                       \n\t                        * You should have received a copy of the GNU General Public License\n\t                        * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                        *\n\t                        * \n\t                        */\n\t\n\tvar emitters = new Map();\n\tvar listeners = new Map();\n\t\n\tfunction getListeners() {\n\t  return listeners;\n\t}\n\t\n\tfunction generateRequestId() {\n\t  return parseInt(String(1e7 * Math.random()), 10);\n\t}\n\t\n\tfunction getListener(msgType) {\n\t  return listeners[msgType];\n\t}\n\t\n\tfunction getKey(messages, msg) {\n\t  var key = messages[msg.MsgType][1];\n\t  var value = msg[key];\n\t  return key + ':' + value;\n\t}\n\t\n\tfunction getRequest(msg) {\n\t  return store.get(getKey(_messages.MsgActionRes, msg));\n\t}\n\t\n\tfunction setRequest(msg, promise) {\n\t  store.set(getKey(_messages.MsgActionReq, msg), promise);\n\t}\n\t\n\tfunction deleteRequest(msg) {\n\t  store.delete(getKey(_messages.MsgActionRes, msg));\n\t}\n\t\n\tfunction getEventEmitter(msg) {\n\t  return emitters.get(getKey(_messages.MsgActionRes, msg));\n\t}\n\t\n\tfunction registerEventEmitter(key, value, callback) {\n\t  emitters.set(key + ':' + value, callback);\n\t}\n\t\n\tfunction registerListener(msgType, callback) {\n\t  listeners.set(msgType, callback);\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.ActionMsgRes = exports.ActionMsgReq = exports.MsgActionRes = exports.MsgActionReq = undefined;\n\t\n\tvar _ramda = __webpack_require__(7);\n\t\n\tvar _requestTypes = __webpack_require__(8);\n\t\n\tvar reqs = _interopRequireWildcard(_requestTypes);\n\t\n\tvar _actionTypes = __webpack_require__(9);\n\t\n\tvar actions = _interopRequireWildcard(_actionTypes);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar msgToAction = (0, _ramda.compose)(_ramda.invertObj, (0, _ramda.map)(_ramda.head));\n\t\n\tvar MsgActionReq = exports.MsgActionReq = {\n\t  1: [actions.HEARTBEAT, reqs.TestReqID],\n\t  BE: [actions.LOGIN, reqs.UserReqID],\n\t  V: [actions.MD_FULL_REFRESH, reqs.MDReqID],\n\t  x: [actions.SECURITY_LIST, reqs.SecurityReqID],\n\t  e: [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n\t  D: [actions.ORDER_SEND, reqs.ClOrdID],\n\t  F: [actions.ORDER_CANCEL, reqs.ClOrdID],\n\t  U0: [actions.SIGNUP, reqs.UserReqID],\n\t  U2: [actions.BALANCE, reqs.BalanceReqID],\n\t  U6: [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n\t  U4: [actions.ORDER_HISTORY, reqs.OrdersReqID],\n\t  U18: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n\t  U20: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n\t  U24: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n\t  U26: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n\t  U28: [actions.BROKER_LIST, reqs.BrokerListReqID],\n\t  U30: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n\t  U32: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n\t  U34: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n\t  U38: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n\t  U50: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n\t  U52: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n\t  U54: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n\t  U70: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n\t  U78: [actions.WITHDRAW_COMMENT, reqs.WithdrawReqID],\n\t  B0: [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n\t  B2: [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n\t  B4: [actions.KYC_REQUEST, reqs.CustomerReqID],\n\t  B6: [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n\t  B8: [actions.KYC_VERIFY, reqs.VerifyCustomerReqID]\n\t};\n\t\n\tvar MsgActionRes = exports.MsgActionRes = {\n\t  0: [actions.HEARTBEAT, reqs.TestReqID],\n\t  BF: [actions.LOGIN, reqs.UserReqID],\n\t  W: [actions.MD_FULL_REFRESH, reqs.MDReqID],\n\t  X: [actions.MD_INCREMENT, reqs.MDReqID],\n\t  8: [actions.EXECUTION_REPORT, reqs.ClOrdID],\n\t  y: [actions.SECURITY_LIST, reqs.SecurityReqID],\n\t  f: [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n\t  U3: [actions.BALANCE, reqs.BalanceReqID],\n\t  U7: [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n\t  U5: [actions.ORDER_HISTORY, reqs.OrdersReqID],\n\t  U9: [actions.WITHDRAW_REFRESH, reqs.WithdrawReqID],\n\t  U19: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n\t  U21: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n\t  U23: [actions.DEPOSIT_REFRESH, reqs.DepositReqID],\n\t  U25: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n\t  U27: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n\t  U29: [actions.BROKER_LIST, reqs.BrokerListReqID],\n\t  U31: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n\t  U33: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n\t  U35: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n\t  U39: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n\t  U51: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n\t  U53: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n\t  U55: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n\t  U71: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n\t  U79: [actions.WITHDRAW_COMMENT, reqs.WithdrawCancelReqID],\n\t  B1: [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n\t  B3: [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n\t  B5: [actions.KYC_REQUEST, reqs.CustomerReqID],\n\t  B9: [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n\t  B7: [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n\t  B11: [actions.CUSTOMER_REFRESH]\n\t};\n\t\n\tvar ActionMsgReq = exports.ActionMsgReq = msgToAction(MsgActionReq);\n\tvar ActionMsgRes = exports.ActionMsgRes = msgToAction(MsgActionRes);\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ramda\");\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar ReqID = exports.ReqID = 'ReqID';\n\tvar TestReqID = exports.TestReqID = 'TestReqID';\n\tvar UserReqID = exports.UserReqID = 'UserReqID';\n\tvar SecurityReqID = exports.SecurityReqID = 'SecurityReqID';\n\tvar ResetPasswordReqID = exports.ResetPasswordReqID = 'ResetPasswordReqID';\n\tvar DepositReqID = exports.DepositReqID = 'DepositReqID';\n\tvar WithdrawReqID = exports.WithdrawReqID = 'WithdrawReqID';\n\tvar BalanceReqID = exports.BalanceReqID = 'BalanceReqID';\n\tvar OrdersReqID = exports.OrdersReqID = 'OrdersReqID';\n\tvar EnableTwoFactorReqID = exports.EnableTwoFactorReqID = 'EnableTwoFactorReqID';\n\tvar DepositMethodReqID = exports.DepositMethodReqID = 'DepositMethodReqID';\n\tvar WithdrawListReqID = exports.WithdrawListReqID = 'WithdrawListReqID';\n\tvar WithdrawCancelReqID = exports.WithdrawCancelReqID = 'WithdrawCancelReqID';\n\tvar BrokerListReqID = exports.BrokerListReqID = 'BrokerListReqID';\n\tvar DepositListReqID = exports.DepositListReqID = 'DepositListReqID';\n\tvar TradeHistoryReqID = exports.TradeHistoryReqID = 'TradeHistoryReqID';\n\tvar LedgerListReqID = exports.LedgerListReqID = 'LedgerListReqID';\n\tvar TradersRankReqID = exports.TradersRankReqID = 'TradersRankReqID';\n\tvar UpdateReqID = exports.UpdateReqID = 'UpdateReqID';\n\tvar PositionReqID = exports.PositionReqID = 'PositionReqID';\n\tvar SecurityStatusReqID = exports.SecurityStatusReqID = 'SecurityStatusReqID';\n\tvar APIKeyListReqID = exports.APIKeyListReqID = 'APIKeyListReqID';\n\tvar APIKeyCreateReqID = exports.APIKeyCreateReqID = 'APIKeyCreateReqID';\n\tvar APIKeyRevokeReqID = exports.APIKeyRevokeReqID = 'APIKeyRevokeReqID';\n\tvar ProcessDepositReqID = exports.ProcessDepositReqID = 'ProcessDepositReqID';\n\tvar CustomerListReqID = exports.CustomerListReqID = 'CustomerListReqID';\n\tvar CustomerReqID = exports.CustomerReqID = 'CustomerReqID';\n\tvar ProcessWithdrawReqID = exports.ProcessWithdrawReqID = 'ProcessWithdrawReqID';\n\tvar VerifyCustomerReqID = exports.VerifyCustomerReqID = 'VerifyCustomerReqID';\n\tvar MDReqID = exports.MDReqID = 'MDReqID';\n\tvar ClOrdID = exports.ClOrdID = 'ClOrdID';\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar HEARTBEAT = exports.HEARTBEAT = 'HEARTBEAT';\n\t\n\tvar BROKER_LIST = exports.BROKER_LIST = 'BROKER_LIST';\n\t\n\tvar SECURITY_LIST = exports.SECURITY_LIST = 'SECURITY_LIST';\n\tvar SECURITY_STATUS_UPDATE = exports.SECURITY_STATUS_UPDATE = 'SECURITY_STATUS_UPDATE';\n\tvar SECURITY_STATUS_SUBSCRIBE = exports.SECURITY_STATUS_SUBSCRIBE = 'SECURITY_STATUS_SUBSCRIBE';\n\tvar SECURITY_STATUS_UNSUBSCRIBE = exports.SECURITY_STATUS_UNSUBSCRIBE = 'SECURITY_STATUS_UNSUBSCRIBE';\n\t\n\tvar MD_TRADES = exports.MD_TRADES = 'MD_TRADES';\n\tvar MD_TRADES_UNSUBSCRIBE = exports.MD_TRADES_UNSUBSCRIBE = 'MD_TRADES_UNSUBSCRIBE';\n\tvar MD_INCREMENT = exports.MD_INCREMENT = 'MD_INCREMENT';\n\tvar MD_FULL_REFRESH = exports.MD_FULL_REFRESH = 'MD_FULL_REFRESH';\n\tvar MD_UNSUBSCRIBE = exports.MD_UNSUBSCRIBE = 'MD_UNSUBSCRIBE';\n\tvar MD_OPENING = exports.MD_OPENING = 'MD_OPENING';\n\t\n\tvar OB_NEW_ORDER = exports.OB_NEW_ORDER = 'OB_NEW_ORDER';\n\tvar OB_UPDATE_ORDER = exports.OB_UPDATE_ORDER = 'OB_UPDATE_ORDER';\n\tvar OB_DELETE_ORDER = exports.OB_DELETE_ORDER = 'OB_DELETE_ORDER';\n\tvar OB_DELETE_ORDERS_THRU = exports.OB_DELETE_ORDERS_THRU = 'OB_DELETE_ORDERS_THRU';\n\t\n\tvar EXECUTION_REPORT = exports.EXECUTION_REPORT = 'EXECUTION_REPORT';\n\tvar EXECUTION_REPORT_NEW = exports.EXECUTION_REPORT_NEW = 'EXECUTION_REPORT_NEW';\n\tvar EXECUTION_REPORT_PARTIAL = exports.EXECUTION_REPORT_PARTIAL = 'EXECUTION_REPORT_PARTIAL';\n\tvar EXECUTION_REPORT_EXECUTION = exports.EXECUTION_REPORT_EXECUTION = 'EXECUTION_REPORT_EXECUTION';\n\tvar EXECUTION_REPORT_CANCELED = exports.EXECUTION_REPORT_CANCELED = 'EXECUTION_REPORT_CANCELED';\n\tvar EXECUTION_REPORT_REJECTED = exports.EXECUTION_REPORT_REJECTED = 'EXECUTION_REPORT_REJECTED';\n\t\n\tvar ORDER_HISTORY = exports.ORDER_HISTORY = 'ORDER_HISTORY';\n\t\n\tvar ORDER_SEND = exports.ORDER_SEND = 'ORDER_SEND';\n\tvar ORDER_CANCEL = exports.ORDER_CANCEL = 'ORDER_CANCEL';\n\t\n\tvar TRADE_NEW = exports.TRADE_NEW = 'TRADE_NEW';\n\tvar TRADE_HISTORY = exports.TRADE_HISTORY = 'TRADE_HISTORY';\n\t\n\tvar TRADES = exports.TRADES = 'TRADES';\n\t\n\tvar SIGNUP = exports.SIGNUP = 'SIGNUP';\n\t\n\tvar LOGIN = exports.LOGIN = 'LOGIN';\n\tvar LOGOUT = exports.LOGOUT = 'LOGOUT';\n\tvar LOGIN_REQUIRED = exports.LOGIN_REQUIRED = 'LOGIN_REQUIRED';\n\tvar LOGIN_CLOSE = exports.LOGIN_CLOSE = 'LOGIN_CLOSE';\n\t\n\tvar CHANGE_PASSWORD = exports.CHANGE_PASSWORD = 'CHANGE_PASSWORD';\n\t\n\tvar BALANCE = exports.BALANCE = 'BALANCE';\n\t\n\tvar PROFILE_UPDATE = exports.PROFILE_UPDATE = 'PROFILE_UPDATE';\n\t\n\tvar WITHDRAW_LIST = exports.WITHDRAW_LIST = 'WITHDRAW_LIST';\n\tvar WITHDRAW_CANCEL = exports.WITHDRAW_CANCEL = 'WITHDRAW_CANCEL';\n\tvar WITHDRAW_FILTER = exports.WITHDRAW_FILTER = 'WITHDRAW_FILTER';\n\tvar WITHDRAW_REFRESH = exports.WITHDRAW_REFRESH = 'WITHDRAW_REFRESH';\n\tvar WITHDRAW_PROCESS = exports.WITHDRAW_PROCESS = 'WITHDRAW_PROCESS';\n\tvar WITHDRAW_CONFIRM = exports.WITHDRAW_CONFIRM = 'WITHDRAW_CONFIRM';\n\tvar WITHDRAW_COMMENT = exports.WITHDRAW_COMMENT = 'WITHDRAW_COMMENT';\n\tvar WITHDRAW_REQUEST = exports.WITHDRAW_REQUEST = 'WITHDRAW_REQUEST';\n\tvar WITHDRAW_SET_NEW_VISIBLE = exports.WITHDRAW_SET_NEW_VISIBLE = 'WITHDRAW_SET_NEW_VISIBLE';\n\t\n\tvar DEPOSIT_LIST = exports.DEPOSIT_LIST = 'DEPOSIT_LIST';\n\tvar DEPOSIT_FILTER = exports.DEPOSIT_FILTER = 'DEPOSIT_FILTER';\n\tvar DEPOSIT_REFRESH = exports.DEPOSIT_REFRESH = 'DEPOSIT_REFRESH';\n\tvar DEPOSIT_PROCESS = exports.DEPOSIT_PROCESS = 'DEPOSIT_PROCESS';\n\tvar DEPOSIT_REQUEST = exports.DEPOSIT_REQUEST = 'DEPOSIT_REQUEST';\n\tvar DEPOSIT_METHODS = exports.DEPOSIT_METHODS = 'DEPOSIT_METHODS';\n\tvar DEPOSIT_SET_NEW_VISIBLE = exports.DEPOSIT_SET_NEW_VISIBLE = 'DEPOSIT_SET_NEW_VISIBLE';\n\t\n\tvar LEDGER_LIST = exports.LEDGER_LIST = 'LEDGER_LIST';\n\tvar LEDGER_FILTER = exports.LEDGER_FILTER = 'LEDGER_FILTER';\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar ORDER_BOOK_TRADE_NEW = exports.ORDER_BOOK_TRADE_NEW = 'TRADE_NEW';\n\tvar ORDER_BOOK_NEW_ORDER = exports.ORDER_BOOK_NEW_ORDER = 'NEW_ORDER';\n\tvar ORDER_BOOK_UPDATE_ORDER = exports.ORDER_BOOK_UPDATE_ORDER = 'UPDATE_ORDER';\n\tvar ORDER_BOOK_DELETE_ORDER = exports.ORDER_BOOK_DELETE_ORDER = 'DELETE_ORDER';\n\tvar ORDER_BOOK_DELETE_ORDERS_THRU = exports.ORDER_BOOK_DELETE_ORDERS_THRU = 'DELETE_ORDERS_THRU';\n\t\n\tvar EXECUTION_REPORT = exports.EXECUTION_REPORT = 'EXECUTION_REPORT';\n\tvar EXECUTION_REPORT_NEW = exports.EXECUTION_REPORT_NEW = 'NEW';\n\tvar EXECUTION_REPORT_PARTIAL = exports.EXECUTION_REPORT_PARTIAL = 'PARTIAL';\n\tvar EXECUTION_REPORT_EXECUTION = exports.EXECUTION_REPORT_EXECUTION = 'EXECUTION';\n\tvar EXECUTION_REPORT_CANCELED = exports.EXECUTION_REPORT_CANCELED = 'CANCELED';\n\tvar EXECUTION_REPORT_REJECTED = exports.EXECUTION_REPORT_REJECTED = 'REJECTED';\n\t\n\t/* eslint-disable quote-props */\n\tvar EVENTS = exports.EVENTS = {\n\t  ORDERBOOK: {\n\t    '0': ORDER_BOOK_NEW_ORDER,\n\t    '1': ORDER_BOOK_UPDATE_ORDER,\n\t    '2': ORDER_BOOK_DELETE_ORDER,\n\t    '3': ORDER_BOOK_DELETE_ORDERS_THRU\n\t  },\n\t  TRADES: {\n\t    '0': ORDER_BOOK_TRADE_NEW\n\t  },\n\t  EXECUTION_REPORT: {\n\t    '0': EXECUTION_REPORT_NEW,\n\t    '1': EXECUTION_REPORT_PARTIAL,\n\t    '2': EXECUTION_REPORT_EXECUTION,\n\t    '4': EXECUTION_REPORT_CANCELED,\n\t    '8': EXECUTION_REPORT_REJECTED\n\t  }\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.formatOrderBook = exports.formatTradeHistory = exports.formatColumns = undefined;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _ramda = __webpack_require__(7);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar formatColumns = exports.formatColumns = function formatColumns(field, level) {\n\t  return function (data) {\n\t    if (level === 2) {\n\t      var list = (0, _ramda.map)((0, _ramda.zipObj)(data.Columns), data[field]);\n\t      return Promise.resolve(_extends({}, data, _defineProperty({}, field, list)));\n\t    }\n\t\n\t    return Promise.resolve(data);\n\t  };\n\t};\n\t\n\tvar formatTradeHistory = exports.formatTradeHistory = function formatTradeHistory(level) {\n\t  return function (data) {\n\t    if (level === 2) {\n\t      var TradeHistoryGrp = (0, _ramda.compose)((0, _ramda.groupBy)((0, _ramda.prop)('Market')), (0, _ramda.map)((0, _ramda.zipObj)(data.Columns)))(data.TradeHistoryGrp);\n\t\n\t      return Promise.resolve(_extends({}, data, { TradeHistoryGrp: TradeHistoryGrp }));\n\t    }\n\t\n\t    return Promise.resolve(data);\n\t  };\n\t};\n\t\n\tvar formatOrderBook = exports.formatOrderBook = function formatOrderBook(data, level) {\n\t  if (level === 2) {\n\t    var _data$MDFullGrp$filte = data.MDFullGrp.filter(function (order) {\n\t      return order.MDEntryType === '0' || order.MDEntryType === '1';\n\t    }).reduce(function (prev, order) {\n\t      var side = order.MDEntryType === '0' ? 'bids' : 'asks';\n\t      (prev[side] || (prev[side] = [])).push([order.MDEntryPx / 1e8, order.MDEntrySize / 1e8, order.UserID, order.OrderID]);\n\t      return prev;\n\t    }, []),\n\t        bids = _data$MDFullGrp$filte.bids,\n\t        asks = _data$MDFullGrp$filte.asks;\n\t\n\t    return _extends({}, data, {\n\t      MDFullGrp: _defineProperty({}, data.Symbol, {\n\t        bids: bids,\n\t        asks: asks\n\t      })\n\t    });\n\t  }\n\t\n\t  return data;\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _messages = __webpack_require__(6);\n\t\n\tvar _utils = __webpack_require__(11);\n\t\n\tvar _listener = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TradeBase = function () {\n\t  function TradeBase(params) {\n\t    _classCallCheck(this, TradeBase);\n\t\n\t    this.level = params.level;\n\t    this.brokerId = params.brokerId;\n\t  }\n\t\n\t  _createClass(TradeBase, [{\n\t    key: 'changeBrokerId',\n\t    value: function changeBrokerId(brokerId) {\n\t      this.brokerId = brokerId;\n\t    }\n\t  }, {\n\t    key: 'balance',\n\t    value: function balance(clientId, callback) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.BALANCE,\n\t        BalanceReqID: (0, _listener.generateRequestId)()\n\t      };\n\t\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'myOrders',\n\t    value: function myOrders() {\n\t      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref$page = _ref.page,\n\t          Page = _ref$page === undefined ? 0 : _ref$page,\n\t          _ref$pageSize = _ref.pageSize,\n\t          PageSize = _ref$pageSize === undefined ? 40 : _ref$pageSize,\n\t          filter = _ref.filter;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.ORDER_HISTORY,\n\t        OrdersReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize\n\t      };\n\t\n\t      if (filter) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('OrdListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'sendOrder',\n\t    value: function sendOrder(_ref2, callback) {\n\t      var side = _ref2.side,\n\t          amount = _ref2.amount,\n\t          price = _ref2.price,\n\t          symbol = _ref2.symbol;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.ORDER_SEND,\n\t        ClOrdID: (0, _listener.generateRequestId)(),\n\t        Symbol: symbol,\n\t        Side: side,\n\t        OrdType: '2',\n\t        Price: price,\n\t        OrderQty: amount,\n\t        BrokerID: this.brokerId\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'cancelOrder',\n\t    value: function cancelOrder() {\n\t      var param = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t      var callback = arguments[1];\n\t\n\t      var orderId = param.orderId ? param.orderId : param;\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.ORDER_CANCEL\n\t      };\n\t\n\t      if (param.clientId) {\n\t        msg.ClOrdID = param.clientId;\n\t      }\n\t\n\t      if (param.orderId) {\n\t        msg.OrderID = orderId;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t\n\t    /**\n\t     * status: 1-Pending, 2-In Progress, 4-Completed, 8-Cancelled\n\t     */\n\t\n\t  }, {\n\t    key: 'requestWithdrawList',\n\t    value: function requestWithdrawList() {\n\t      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref3$page = _ref3.page,\n\t          Page = _ref3$page === undefined ? 0 : _ref3$page,\n\t          _ref3$pageSize = _ref3.pageSize,\n\t          PageSize = _ref3$pageSize === undefined ? 20 : _ref3$pageSize,\n\t          _ref3$status = _ref3.status,\n\t          StatusList = _ref3$status === undefined ? ['1', '2', '4', '8'] : _ref3$status,\n\t          filter = _ref3.filter,\n\t          clientId = _ref3.clientId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.WITHDRAW_LIST,\n\t        WithdrawListReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize,\n\t        StatusList: StatusList\n\t      };\n\t\n\t      if (filter && filter.length) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('WithdrawListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestWithdraw',\n\t    value: function requestWithdraw(_ref4, callback) {\n\t      var amount = _ref4.amount,\n\t          data = _ref4.data,\n\t          _ref4$currency = _ref4.currency,\n\t          currency = _ref4$currency === undefined ? 'BTC' : _ref4$currency,\n\t          _ref4$method = _ref4.method,\n\t          method = _ref4$method === undefined ? 'bitcoin' : _ref4$method;\n\t\n\t      var reqId = (0, _listener.generateRequestId)();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.WITHDRAW_REQUEST,\n\t        WithdrawReqID: reqId,\n\t        ClOrdID: reqId,\n\t        Method: method,\n\t        Amount: amount,\n\t        Currency: currency,\n\t        Data: data\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'confirmWithdraw',\n\t    value: function confirmWithdraw(_ref5, callback) {\n\t      var WithdrawID = _ref5.withdrawId,\n\t          confirmationToken = _ref5.confirmationToken,\n\t          secondFactor = _ref5.secondFactor;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.CONFIRM_WITHDRAW,\n\t        WithdrawReqID: (0, _listener.generateRequestId)(),\n\t        WithdrawID: WithdrawID\n\t      };\n\t\n\t      if (confirmationToken) {\n\t        msg.ConfirmationToken = confirmationToken;\n\t      }\n\t\n\t      if (secondFactor) {\n\t        msg.SecondFactor = secondFactor;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'cancelWithdraw',\n\t    value: function cancelWithdraw(withdrawId, callback) {\n\t      var reqId = (0, _listener.generateRequestId)();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.CANCEL_WITHDRAW,\n\t        WithdrawCancelReqID: reqId,\n\t        ClOrdID: reqId,\n\t        WithdrawID: withdrawId\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDepositList',\n\t    value: function requestDepositList() {\n\t      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref6$page = _ref6.page,\n\t          Page = _ref6$page === undefined ? 0 : _ref6$page,\n\t          _ref6$pageSize = _ref6.pageSize,\n\t          PageSize = _ref6$pageSize === undefined ? 20 : _ref6$pageSize,\n\t          _ref6$status = _ref6.status,\n\t          StatusList = _ref6$status === undefined ? ['1', '2', '4', '8'] : _ref6$status,\n\t          filter = _ref6.filter,\n\t          clientId = _ref6.clientId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.DEPOSIT_LIST,\n\t        DepositListReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize,\n\t        StatusList: StatusList\n\t      };\n\t\n\t      if (filter && filter.length) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('DepositListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDeposit',\n\t    value: function requestDeposit() {\n\t      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref7$currency = _ref7.currency,\n\t          currency = _ref7$currency === undefined ? 'BTC' : _ref7$currency,\n\t          value = _ref7.value,\n\t          depositMethodId = _ref7.depositMethodId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var reqId = (0, _listener.generateRequestId)();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.DEPOSIT_REQUEST,\n\t        DepositReqID: reqId,\n\t        ClOrdID: reqId,\n\t        Currency: currency,\n\t        BrokerID: this.brokerId\n\t      };\n\t\n\t      if (currency !== 'BTC') {\n\t        msg.DepositMethodID = depositMethodId;\n\t        msg.Value = value;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDepositMethods',\n\t    value: function requestDepositMethods(callback) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.DEPOSIT_METHODS,\n\t        DepositMethodReqID: (0, _listener.generateRequestId)(),\n\t        BrokerID: this.brokerId\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestLedger',\n\t    value: function requestLedger() {\n\t      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref8$page = _ref8.page,\n\t          Page = _ref8$page === undefined ? 0 : _ref8$page,\n\t          _ref8$pageSize = _ref8.pageSize,\n\t          PageSize = _ref8$pageSize === undefined ? 20 : _ref8$pageSize,\n\t          brokerId = _ref8.brokerId,\n\t          clientId = _ref8.clientId,\n\t          currency = _ref8.currency;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.LEDGER_LIST,\n\t        LedgerListReqID: (0, _listener.generateRequestId)(),\n\t        BrokerID: this.brokerId,\n\t        Page: Page,\n\t        PageSize: PageSize\n\t      };\n\t\n\t      if (brokerId) {\n\t        msg.BrokerID = brokerId;\n\t      }\n\t      if (currency) {\n\t        msg.Currency = currency;\n\t      }\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('LedgerListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }]);\n\t\n\t  return TradeBase;\n\t}();\n\t\n\texports.default = TradeBase;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _eventemitter = __webpack_require__(4);\n\t\n\tvar _transport = __webpack_require__(14);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tvar _listener = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar WebSocketTransport = function (_Transport) {\n\t  _inherits(WebSocketTransport, _Transport);\n\t\n\t  /*\n\t   * Event emitter to dispatch websocket updates\n\t   */\n\t\n\t\n\t  /*\n\t   * Stun object\n\t   */\n\t\n\t  /*\n\t   * WebSocket Instance\n\t   */\n\t  function WebSocketTransport() {\n\t    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, WebSocketTransport);\n\t\n\t    var _this = _possibleConstructorReturn(this, (WebSocketTransport.__proto__ || Object.getPrototypeOf(WebSocketTransport)).call(this, params, 'ws'));\n\t\n\t    _this.stun = { local: null, public: [] };\n\t\n\t    _this.getStun();\n\t    _this.getFingerPrint(params.fingerPrint);\n\t    _this.headers = params.headers;\n\t\n\t    _this.eventEmitter = new _eventemitter.EventEmitter2({ wildcard: true, delimiter: ':' });\n\t    return _this;\n\t  }\n\t\n\t  /*\n\t   * Transport Promise\n\t   */\n\t\n\t\n\t  /*\n\t   * FingerPrint\n\t   */\n\t\n\t\n\t  _createClass(WebSocketTransport, [{\n\t    key: 'connect',\n\t    value: function connect(callback) {\n\t      var _this2 = this;\n\t\n\t      return _nodeify2.default.extend(new Promise(function (resolve, reject) {\n\t        _this2.request = { resolve: resolve, reject: reject };\n\t\n\t        var WebSocket = _transport.IS_NODE ? __webpack_require__(16) : window.WebSocket;\n\t\n\t        _this2.socket = new WebSocket(_this2.endpoint, null, _this2.headers);\n\t        _this2.socket.onopen = _this2.onOpen.bind(_this2);\n\t        _this2.socket.onclose = _this2.onClose.bind(_this2);\n\t        _this2.socket.onerror = _this2.onError.bind(_this2);\n\t        _this2.socket.onmessage = _this2.onMessage.bind(_this2);\n\t      })).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'disconnect',\n\t    value: function disconnect() {\n\t      this.socket.close();\n\t    }\n\t  }, {\n\t    key: 'onOpen',\n\t    value: function onOpen() {\n\t      this.request.resolve({ connected: true });\n\t    }\n\t  }, {\n\t    key: 'onClose',\n\t    value: function onClose() {}\n\t  }, {\n\t    key: 'onError',\n\t    value: function onError(error) {\n\t      this.request.reject(error);\n\t    }\n\t  }, {\n\t    key: 'sendMessage',\n\t    value: function sendMessage(msg) {\n\t      if (this.socket.readyState === 1) {\n\t        var data = msg;\n\t\n\t        data.STUNTIP = this.stun;\n\t        data.FingerPrint = this.fingerPrint;\n\t\n\t        this.socket.send(JSON.stringify(data));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'sendMessageAsPromise',\n\t    value: function sendMessageAsPromise(msg) {\n\t      var _this3 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var promise = { resolve: resolve, reject: reject };\n\t        (0, _listener.setRequest)(msg, { resolve: resolve, reject: reject });\n\t        // We are passing the promise as a parameter to spy it in our tests\n\t        _this3.sendMessage(msg, promise);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'onMessage',\n\t    value: function onMessage(msg) {\n\t      var data = JSON.parse(msg.data);\n\t      if (data.MsgType === 'ERROR') {\n\t        throw new Error('Error: ' + data.Detail + ' ' + data.Description);\n\t      }\n\t\n\t      var request = (0, _listener.getRequest)(data);\n\t      var emitter = (0, _listener.getEventEmitter)(data);\n\t      var listener = (0, _listener.getListener)(data.MsgType);\n\t\n\t      this.dispatchPromise(request, data);\n\t      this.dispatchEventEmitters(emitter, data);\n\t      this.dispatchListeners(listener, data);\n\t    }\n\t  }, {\n\t    key: 'dispatchPromise',\n\t    value: function dispatchPromise(request, data) {\n\t      if (request && request.resolve) {\n\t        (0, _listener.deleteRequest)(data);\n\t        return request.resolve(data);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'dispatchEventEmitters',\n\t    value: function dispatchEventEmitters(emitter, data) {\n\t      if (emitter) {\n\t        return emitter(data);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'dispatchListeners',\n\t    value: function dispatchListeners(listener, data) {\n\t      return listener && listener(data);\n\t    }\n\t  }, {\n\t    key: 'getFingerPrint',\n\t    value: function getFingerPrint(customFingerprint) {\n\t      var _this4 = this;\n\t\n\t      if (_transport.IS_NODE) {\n\t        return __webpack_require__(17).getMac(function (macAddress) {\n\t          _this4.fingerPrint = macAddress;\n\t        });\n\t      } else if (_transport.IS_BROKER) {\n\t        var Fingerprint2 = __webpack_require__(19);\n\t        return new Fingerprint2().get(function (fingerPrint) {\n\t          _this4.fingerPrint = Math.abs(__webpack_require__(20).encodeByteArray(fingerPrint)).toString();\n\t        });\n\t      } else if (customFingerprint) {\n\t        this.fingerPrint = customFingerprint;\n\t      } else {\n\t        throw new Error('FingerPrint not provided');\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getStun',\n\t    value: function getStun() {\n\t      var _this5 = this;\n\t\n\t      if (_transport.IS_NODE) {\n\t        __webpack_require__(21).getStun(function (data) {\n\t          _this5.stun = data;\n\t        });\n\t      }\n\t    }\n\t\n\t    /* eslint-disable no-param-reassign */\n\t\n\t  }, {\n\t    key: 'emitterPromise',\n\t    value: function emitterPromise(promise, callback) {\n\t      var _this6 = this;\n\t\n\t      promise.on = function (event, listener) {\n\t        _this6.eventEmitter.on(event, listener);\n\t        return promise;\n\t      };\n\t      promise.onAny = function (listener) {\n\t        _this6.eventEmitter.onAny(listener);\n\t        return promise;\n\t      };\n\t      promise.offAny = function (listener) {\n\t        _this6.eventEmitter.offAny(listener);\n\t        return promise;\n\t      };\n\t      promise.once = function (event, listener) {\n\t        _this6.eventEmitter.once(event, listener);\n\t        return promise;\n\t      };\n\t      promise.many = function (event, times, listener) {\n\t        _this6.eventEmitter.many(event, times, listener);\n\t        return promise;\n\t      };\n\t      promise.removeListener = function (event, listener) {\n\t        _this6.eventEmitter.removeListener(event, listener);\n\t        return promise;\n\t      };\n\t      promise.removeAllListeners = function (events) {\n\t        _this6.eventEmitter.removeAllListeners(events);\n\t        return promise;\n\t      };\n\t\n\t      return _nodeify2.default.extend(promise).nodeify(callback);\n\t    }\n\t    /* eslint-enable no-param-reassign */\n\t\n\t  }]);\n\t\n\t  return WebSocketTransport;\n\t}(_transport2.default);\n\t\n\texports.default = WebSocketTransport;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.IS_BROKER = exports.IS_NODE = undefined;\n\t\n\tvar _common = __webpack_require__(15);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n\t                                                                                                                                                           * BlinkTradeJS SDK\n\t                                                                                                                                                           * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                           *\n\t                                                                                                                                                           * This file is part of BlinkTradeJS\n\t                                                                                                                                                           *\n\t                                                                                                                                                           * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                           * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                           * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                           * (at your option) any later version.\n\t                                                                                                                                                          \n\t                                                                                                                                                           * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                           * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                           * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                           * GNU General Public License for more details.\n\t                                                                                                                                                          \n\t                                                                                                                                                           * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                           * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                           *\n\t                                                                                                                                                           * \n\t                                                                                                                                                           */\n\t\n\tvar IS_NODE = exports.IS_NODE = typeof window === 'undefined';\n\tvar IS_BROKER = exports.IS_BROKER = typeof document !== 'undefined';\n\t\n\tvar Transport =\n\t/*\n\t * url endpoint.\n\t */\n\tfunction Transport() {\n\t  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t  var env = arguments[1];\n\t\n\t  _classCallCheck(this, Transport);\n\t\n\t  /* eslint-disable indent */\n\t  var endpoint = params.url ? params.url : params.prod ? _common2.default.prod[env] : _common2.default.testnet[env];\n\t  /* eslint-enable indent */\n\t\n\t  this.endpoint = endpoint;\n\t  this.level = params.level || '2';\n\t};\n\t\n\texports.default = Transport;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  prod: {\n\t    ws: 'wss://ws.blinktrade.com/trade/',\n\t    rest: 'https://api.blinktrade.com/'\n\t  },\n\t  testnet: {\n\t    ws: 'wss://api_testnet.blinktrade.com/trade/',\n\t    rest: 'https://api_testnet.blinktrade.com/'\n\t  }\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ws\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getMac = getMac;\n\t\n\tvar _macaddress = __webpack_require__(18);\n\t\n\tvar _macaddress2 = _interopRequireDefault(_macaddress);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getMac(callback) {\n\t  _macaddress2.default.all(function (err, all) {\n\t    var hashCode = function hashCode(str) {\n\t      var hash = 0;\n\t      if (str.length === 0) return hash;\n\t      for (var i = 0; i < str.length; i++) {\n\t        hash = (hash << 5) - hash + str.charCodeAt(i);\n\t        hash = hash & hash; // Convert to 32bit integer\n\t      }\n\t      return hash;\n\t    };\n\t\n\t    var macAddresses = '';\n\t    Object.keys(all).forEach(function (iface) {\n\t      macAddresses += all[iface].mac;\n\t    });\n\t\n\t    var fingerPrint = hashCode(macAddresses);\n\t    if (fingerPrint < 0) {\n\t      fingerPrint *= -1;\n\t    }\n\t\n\t    callback(fingerPrint);\n\t  });\n\t} /**\n\t   * BlinkTradeJS SDK\n\t   * (c) 2016-present BlinkTrade, Inc.\n\t   *\n\t   * This file is part of BlinkTradeJS\n\t   *\n\t   * This program is free software: you can redistribute it and/or modify\n\t   * it under the terms of the GNU General Public License as published by\n\t   * the Free Software Foundation, either version 3 of the License, or\n\t   * (at your option) any later version.\n\t  \n\t   * This program is distributed in the hope that it will be useful,\n\t   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t   * GNU General Public License for more details.\n\t  \n\t   * You should have received a copy of the GNU General Public License\n\t   * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t   *\n\t   * \n\t   */\n\t\n\t/* eslint-disable operator-assignment */\n\t/* eslint-disable no-plusplus */\n\t/* eslint-disable import/prefer-default-export */\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"macaddress\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fingerprintjs2\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/* eslint-disable no-var */\n\t/* eslint-disable no-bitwise */\n\t/* eslint-disable no-param-reassign */\n\t/* eslint-disable no-fallthrough */\n\t/* eslint-disable no-underscore-dangle */\n\t/* eslint-disable default-case */\n\t/* eslint-disable prefer-destructuring */\n\t/*\n\t * ByteArray enconding from google-closure-library\n\t */\n\t\n\tvar SEED32 = 314159265;\n\tvar CONSTANT32 = -1640531527;\n\t\n\t/**\n\t * Performs an inplace mix of an object with the integer properties (a, b, c)\n\t * and returns the final value of c.\n\t * @param {Object} mix Object with properties, a, b, and c.\n\t * @return {number} The end c-value for the mixing.\n\t * @private\n\t */\n\tvar mix32_ = function mix32_(mix) {\n\t  var a = mix.a;\n\t  var b = mix.b;\n\t  var c = mix.c;\n\t  a -= b;\n\t  a -= c;\n\t  a ^= c >>> 13;\n\t  b -= c;\n\t  b -= a;\n\t  b ^= a << 8;\n\t  c -= a;\n\t  c -= b;\n\t  c ^= b >>> 13;\n\t  a -= b;\n\t  a -= c;\n\t  a ^= c >>> 12;\n\t  b -= c;\n\t  b -= a;\n\t  b ^= a << 16;\n\t  c -= a;\n\t  c -= b;\n\t  c ^= b >>> 5;\n\t  a -= b;\n\t  a -= c;\n\t  a ^= c >>> 3;\n\t  b -= c;\n\t  b -= a;\n\t  b ^= a << 10;\n\t  c -= a;\n\t  c -= b;\n\t  c ^= b >>> 15;\n\t  mix.a = a;\n\t  mix.b = b;\n\t  mix.c = c;\n\t  return c;\n\t};\n\t\n\t/**\n\t * Converts an unsigned \"byte\" to signed, that is, convert a value in the range\n\t * (0, 2^8-1) to (-2^7, 2^7-1) in order to be compatible with Java's byte type.\n\t * @param {number} n Unsigned \"byte\" value.\n\t * @return {number} Signed \"byte\" value.\n\t * @private\n\t */\n\tvar toSigned_ = function toSigned_(n) {\n\t  return n > 127 ? n - 256 : n;\n\t};\n\t\n\tvar wordAt_ = function wordAt_(bytes, offset) {\n\t  var a = toSigned_(bytes[offset + 0]);\n\t  var b = toSigned_(bytes[offset + 1]);\n\t  var c = toSigned_(bytes[offset + 2]);\n\t  var d = toSigned_(bytes[offset + 3]);\n\t  return a + (b << 8) + (c << 16) + (d << 24);\n\t};\n\t\n\t/**\n\t * Hashes a \"byte\" array to a 32-bit value using the supplied seed.\n\t */\n\tmodule.exports.encodeByteArray = function encodeByteArray(bytes) {\n\t  var offset = 0;\n\t  var length = bytes.length;\n\t  var seed = SEED32;\n\t\n\t  var mix = {\n\t    a: CONSTANT32,\n\t    b: CONSTANT32,\n\t    c: seed\n\t  };\n\t\n\t  var keylen;\n\t  for (keylen = length; keylen >= 12; keylen -= 12, offset += 12) {\n\t    mix.a += wordAt_(bytes, offset);\n\t    mix.b += wordAt_(bytes, offset + 4);\n\t    mix.c += wordAt_(bytes, offset + 8);\n\t    mix32_(mix);\n\t  }\n\t  // Hash any remaining bytes\n\t  mix.c += length;\n\t  switch (keylen) {// deal with rest.  Some cases fall through\n\t    case 11:\n\t      mix.c += bytes[offset + 10] << 24;\n\t    case 10:\n\t      mix.c += (bytes[offset + 9] & 0xff) << 16;\n\t    case 9:\n\t      mix.c += (bytes[offset + 8] & 0xff) << 8;\n\t    // the first byte of c is reserved for the length\n\t    case 8:\n\t      mix.b += wordAt_(bytes, offset + 4);\n\t      mix.a += wordAt_(bytes, offset);\n\t      break;\n\t    case 7:\n\t      mix.b += (bytes[offset + 6] & 0xff) << 16;\n\t    case 6:\n\t      mix.b += (bytes[offset + 5] & 0xff) << 8;\n\t    case 5:\n\t      mix.b += bytes[offset + 4] & 0xff;\n\t    case 4:\n\t      mix.a += wordAt_(bytes, offset);\n\t      break;\n\t    case 3:\n\t      mix.a += (bytes[offset + 2] & 0xff) << 16;\n\t    case 2:\n\t      mix.a += (bytes[offset + 1] & 0xff) << 8;\n\t    case 1:\n\t      mix.a += bytes[offset + 0] & 0xff;\n\t    // case 0 : nothing left to add\n\t  }\n\t  return mix32_(mix);\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\n\t\n\t/* eslint-disable no-param-reassign */\n\t/* eslint-disable no-plusplus */\n\t/* eslint-disable import/prefer-default-export */\n\t/* eslint-disable no-restricted-properties */\n\t/* eslint-disable no-buffer-constructor */\n\t\n\texports.getStun = getStun;\n\t\n\tvar _ip = __webpack_require__(22);\n\t\n\tvar _ip2 = _interopRequireDefault(_ip);\n\t\n\tvar _dgram = __webpack_require__(23);\n\t\n\tvar _dgram2 = _interopRequireDefault(_dgram);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar stunIp = { local: null, public: [] };\n\t\n\tfunction addIPAddress(ipAddress) {\n\t  if (ipAddress.match(/^(192\\.168\\.|169\\.254\\.|10\\.|172\\.(1[6-9]|2\\d|3[01]))/)) {\n\t    stunIp.local = ipAddress;\n\t  } else if (stunIp.public.indexOf(ipAddress) === -1) {\n\t    stunIp.public.push(ipAddress);\n\t  }\n\t}\n\t\n\tfunction getStun(callback) {\n\t  var socket = _dgram2.default.createSocket('udp4');\n\t\n\t  var STUN_HEADER_LENGTH = 20;\n\t  var stunRequest = new Buffer(STUN_HEADER_LENGTH);\n\t\n\t  var STUN_METHOD_REQUEST = 0x000;\n\t  var STUN_BINDING_CLASS = 0x0001;\n\t  var STUN_MAGIC_COOKIE = 0x2112A442;\n\t  var STUN_TID_MAX = Math.pow(2, 32);\n\t\n\t  var STUN_ATTR_MAPPED_ADDRESS = 0x0001;\n\t  var STUN_ATTR_XOR_MAPPED_ADDRESS = 0x8020;\n\t  var STUN_ATTR_XOR_MAPPED_ADDRESS_ALT = 0x0020;\n\t\n\t  var stunTxId = Math.random() * STUN_TID_MAX;\n\t\n\t  var stunServers = [[3478, 'stun.services.mozilla.com'], [19302, 'stun.l.google.com'], [3478, 'stun.stunprotocol.org'], [3478, 'stun.softjoys.com'], [3478, 'stun.samsungsmartcam.com'], [3478, 'stun.sonetel.com'], [3478, 'stun.tagan.ru'], [3478, 'stun.voipgain.com'], [3478, 'stunserver.org'], [3478, 'stun.advfn.com'], [3478, 'stun.annatel.net'], [3478, 'stun.freevoipdeal.com']];\n\t\n\t  stunRequest.writeUInt16BE((STUN_BINDING_CLASS | STUN_METHOD_REQUEST) & 0x3fff, 0);\n\t  stunRequest.writeUInt16BE(0, 2);\n\t  stunRequest.writeUInt32BE(STUN_MAGIC_COOKIE, 4);\n\t  stunRequest.writeUInt32BE(0, 8);\n\t  stunRequest.writeUInt32BE(0, 12);\n\t  stunRequest.writeUInt32BE(stunTxId, 16);\n\t\n\t  socket.on('message', function (msg) {\n\t    var xor = function xor(a, b) {\n\t      var data = [];\n\t      if (b.length > a.length) {\n\t        var tmp = a;\n\t        a = b;\n\t        b = tmp;\n\t      }\n\t      for (var i = 0, len = a.length; i < len; i++) {\n\t        data.push(a[i] ^ b[i]);\n\t      }\n\t\n\t      return new Buffer(data);\n\t    };\n\t\n\t    var block = msg.readUInt8(0);\n\t    var bit1 = block & 0x80;\n\t    var bit2 = block & 0x40;\n\t\n\t    if (!(bit1 === 0 && bit2 === 0)) {\n\t      return;\n\t    }\n\t\n\t    var msgHeader = msg.slice(0, STUN_HEADER_LENGTH);\n\t    var msgAttrs = msg.slice(STUN_HEADER_LENGTH, msg.length);\n\t\n\t    var offset = 0;\n\t\n\t    while (offset < msgAttrs.length) {\n\t      var attrType = msgAttrs.readUInt16BE(offset);\n\t      offset += 2;\n\t\n\t      var attrBuffLength = msgAttrs.readUInt16BE(offset);\n\t      var blockOut = attrBuffLength % 4;\n\t      if (blockOut > 0) {\n\t        attrBuffLength += 4 - blockOut;\n\t      }\n\t      offset += 2;\n\t\n\t      var value = msgAttrs.slice(offset, offset + attrBuffLength);\n\t      offset += attrBuffLength;\n\t\n\t      var family = void 0;\n\t      var address = void 0;\n\t      switch (attrType) {\n\t        case STUN_ATTR_MAPPED_ADDRESS:\n\t          family = value.readUInt16BE(0) === 0x02 ? 6 : 4;\n\t          address = _ip2.default.toString(value, 4, family);\n\t          addIPAddress(address);\n\t          break;\n\t\n\t        case STUN_ATTR_XOR_MAPPED_ADDRESS:\n\t        case STUN_ATTR_XOR_MAPPED_ADDRESS_ALT:\n\t          family = value.readUInt16BE(0) === 0x02 ? 6 : 4;\n\t          var magic = msgHeader.slice(4, 8);\n\t          var tid = msgHeader.slice(8, 20);\n\t          var xaddr = value.slice(4, family === 4 ? 8 : 20);\n\t          var addr = xor(xaddr, family === 4 ? magic : value.concat([magic, tid]));\n\t          address = _ip2.default.toString(addr, 0, family);\n\t          addIPAddress(address);\n\t          break;\n\t        default:\n\t      }\n\t    }\n\t\n\t    callback(stunIp);\n\t  });\n\t\n\t  stunServers.map(function (_ref) {\n\t    var _ref2 = _slicedToArray(_ref, 2),\n\t        port = _ref2[0],\n\t        host = _ref2[1];\n\t\n\t    return socket.send(stunRequest, 0, stunRequest.length, port, host, function () {});\n\t  });\n\t}\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ip\");\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"dgram\");\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"os\");\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _rest = __webpack_require__(26);\n\t\n\tvar _rest2 = _interopRequireDefault(_rest);\n\t\n\tvar _trade = __webpack_require__(12);\n\t\n\tvar _trade2 = _interopRequireDefault(_trade);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar BlinkTradeRest = function (_TradeBase) {\n\t  _inherits(BlinkTradeRest, _TradeBase);\n\t\n\t  function BlinkTradeRest(params) {\n\t    _classCallCheck(this, BlinkTradeRest);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BlinkTradeRest.__proto__ || Object.getPrototypeOf(BlinkTradeRest)).call(this, params));\n\t\n\t    _this.transport = params.transport || new _rest2.default(params);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BlinkTradeRest, [{\n\t    key: 'send',\n\t    value: function send(path) {\n\t      return this.transport.fetchTrade(path);\n\t    }\n\t  }, {\n\t    key: 'fetchPublic',\n\t    value: function fetchPublic(path) {\n\t      return this.transport.fetchPublic(path);\n\t    }\n\t  }, {\n\t    key: 'ticker',\n\t    value: function ticker(callback) {\n\t      return _nodeify2.default.extend(this.fetchPublic('ticker')).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'trades',\n\t    value: function trades() {\n\t      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref$limit = _ref.limit,\n\t          limit = _ref$limit === undefined ? 100 : _ref$limit,\n\t          _ref$since = _ref.since,\n\t          since = _ref$since === undefined ? 0 : _ref$since;\n\t\n\t      var callback = arguments[1];\n\t\n\t      return _nodeify2.default.extend(this.fetchPublic('trades?limit=' + limit + '&since=' + since)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'orderbook',\n\t    value: function orderbook(callback) {\n\t      return _nodeify2.default.extend(this.fetchPublic('orderbook')).nodeify(callback);\n\t    }\n\t  }]);\n\t\n\t  return BlinkTradeRest;\n\t}(_trade2.default);\n\t\n\texports.default = BlinkTradeRest;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _url = __webpack_require__(27);\n\t\n\tvar _url2 = _interopRequireDefault(_url);\n\t\n\tvar _sjcl = __webpack_require__(28);\n\t\n\tvar _sjcl2 = _interopRequireDefault(_sjcl);\n\t\n\tvar _fetchPonyfill2 = __webpack_require__(29);\n\t\n\tvar _fetchPonyfill3 = _interopRequireDefault(_fetchPonyfill2);\n\t\n\tvar _transport = __webpack_require__(14);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar _fetchPonyfill = (0, _fetchPonyfill3.default)(Promise),\n\t    _fetch = _fetchPonyfill.fetch;\n\t\n\tvar RestTransport = function (_Transport) {\n\t  _inherits(RestTransport, _Transport);\n\t\n\t  /**\n\t   * APISecret\n\t   */\n\t  function RestTransport(params) {\n\t    _classCallCheck(this, RestTransport);\n\t\n\t    var _this = _possibleConstructorReturn(this, (RestTransport.__proto__ || Object.getPrototypeOf(RestTransport)).call(this, params, 'rest'));\n\t\n\t    _this.key = params.key;\n\t    _this.secret = params.secret;\n\t    _this.currency = params.currency || 'USD';\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Exchanges currencies available.\n\t   */\n\t\n\t  /**\n\t   * APIKey\n\t   */\n\t\n\t\n\t  _createClass(RestTransport, [{\n\t    key: 'headers',\n\t    value: function headers(method, body) {\n\t      var timeStamp = Date.now().toString();\n\t      var hexKey = _sjcl2.default.codec.utf8String.toBits(this.secret);\n\t      var hmac = new _sjcl2.default.misc.hmac(hexKey, _sjcl2.default.hash.sha256);\n\t      var Signature = _sjcl2.default.codec.hex.fromBits(hmac.encrypt(timeStamp));\n\t      return {\n\t        method: method,\n\t        headers: {\n\t          'Content-Type': 'application/json',\n\t          Nonce: timeStamp,\n\t          APIKey: this.key,\n\t          Signature: Signature\n\t        },\n\t        body: JSON.stringify(body)\n\t      };\n\t    }\n\t  }, {\n\t    key: 'fetch',\n\t    value: function fetch(msg, api) {\n\t      var headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t      return _fetch(_url2.default.resolve(this.endpoint, api), headers).then(function (response) {\n\t        return response.json();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'fetchPublic',\n\t    value: function fetchPublic(api) {\n\t      return this.fetch({}, 'api/v1/' + this.currency + '/' + api);\n\t    }\n\t  }, {\n\t    key: 'fetchTrade',\n\t    value: function fetchTrade(msg) {\n\t      var headers = this.headers('POST', msg);\n\t      return this.fetch(msg, 'tapi/v1/message', headers).then(function (response) {\n\t        return response.Status === 500 ? Promise.reject(response) : response.Responses;\n\t      }).then(function (response) {\n\t        return response.length === 1 ? response[0] : response;\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return RestTransport;\n\t}(_transport2.default);\n\t\n\texports.default = RestTransport;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"url\");\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"sjcl\");\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fetch-ponyfill\");\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// blinktrade.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f31abeec93be24b5dbb2","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport Brokers from './constants/brokers';\nimport BlinkTradeWS from './ws';\nimport BlinkTradeRest from './rest';\n\nexport {\n  Brokers,\n  BlinkTradeWS,\n  BlinkTradeRest,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default {\n  SURBITCOIN: 1,\n  VBTC: 3,\n  FOXBIT: 4,\n  TESTNET: 5,\n  URDUBIT: 8,\n  CHILEBIT: 9,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/brokers.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\nimport {\n  registerListener,\n  generateRequestId,\n  registerEventEmitter,\n} from './listener';\n\nimport {\n  EVENTS,\n  BALANCE,\n  DEPOSIT_REFRESH,\n  WITHDRAW_REFRESH,\n  EXECUTION_REPORT,\n} from './constants/events';\n\nimport { ActionMsgReq } from './constants/messages';\nimport { formatOrderBook, formatTradeHistory } from './util/utils';\n\nimport TradeBase from './trade';\nimport WebSocketTransport from './transports/websocket';\nimport { IS_NODE } from './transports/transport';\n\nclass BlinkTradeWS extends TradeBase {\n  /**\n   * Session to store login information\n   */\n  session: Object;\n\n  transport: Object;\n\n  constructor(params?: BlinkTradeBase) {\n    super(params);\n\n    this.transport = params.transport || new WebSocketTransport(params);\n    this.session = {};\n  }\n\n  connect(callback?: Function) {\n    return this.transport.connect(callback);\n  }\n\n  disconnect() {\n    return this.transport.disconnect();\n  }\n\n  send(msg: Message): Promise<Object> {\n    return this.transport.sendMessageAsPromise(msg);\n  }\n\n  heartbeat(callback?: Function): Promise<Object> {\n    const d = new Date();\n    const msg: Object = {\n      MsgType: ActionMsgReq.HEARTBEAT,\n      TestReqID: d.getTime(),\n      SendTime: d.getTime(),\n    };\n\n    return nodeify.extend(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        return resolve({\n          ...data,\n          Latency: new Date(Date.now()) - data.SendTime,\n        });\n      }).catch(reject);\n    })).nodeify(callback);\n  }\n\n  login({ username, password, secondFactor, token, trustedDevice, brokerId }: {\n    username: string,\n    password: string,\n    token?: string,\n    secondFactor?: string,\n    brokerId?: number,\n    trustedDevice?: boolean,\n  }, callback?: Function): Promise<Object> {\n    let userAgent;\n    if (!IS_NODE) {\n      userAgent = {\n        UserAgent: window.navigator.userAgent,\n        UserAgentLanguage: window.navigator.language,\n        UserAgentPlatform: window.navigator.platform,\n        UserAgentTimezoneOffset: new Date().getTimezoneOffset(),\n      };\n    } else {\n      const os = require('os');\n      userAgent = {\n        UserAgent: `${os.type()} ${os.release()}`,\n        UserAgentLanguage: 'en_US',\n        UserAgentPlatform: `${os.platform()} (${os.arch()})`,\n        UserAgentTimezoneOffset: new Date().getTimezoneOffset(),\n      };\n    }\n\n    const msg: Object = {\n      MsgType: ActionMsgReq.LOGIN,\n      UserReqID: generateRequestId(),\n      BrokerID: brokerId || this.brokerId,\n      Username: username,\n      Password: password,\n      UserReqTyp: '1',\n      TrustedDevice: trustedDevice || false,\n      ...userAgent,\n    };\n\n    if (secondFactor) {\n      msg.SecondFactor = secondFactor;\n    }\n\n    if (token) {\n      msg.Token = token;\n    }\n\n    return nodeify.extend(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        if (data.UserStatus === 1) {\n          this.session = data;\n          return resolve(data);\n        }\n\n        return reject(data);\n      }).catch(reject);\n    })).nodeify(callback);\n  }\n\n  logout(callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.LOGOUT,\n      BrokerID: this.brokerId,\n      UserReqID: generateRequestId(),\n      Username: this.session.Username,\n      UserReqTyp: '2',\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  profile(callback?: Function): Promise<Object> {\n    const { VerificationData, ...profile } = this.session.Profile;\n    return nodeify.extend(Promise.resolve(profile)).nodeify(callback);\n  }\n\n  balance(callback?: Function): PromiseEmitter<Object> {\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return super.balance(callback).then((data) => {\n        registerListener(ActionMsgReq.BALANCE, (balance) => {\n          callback && callback(null, balance);\n          return this.transport.eventEmitter.emit(BALANCE, balance);\n        });\n        return resolve(data);\n      }).catch(reject);\n    }));\n  }\n\n  subscribeTicker(symbols: Array<string>, callback?: Function): PromiseEmitter<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n      SecurityStatusReqID: generateRequestId(),\n      SubscriptionRequestType: '1',\n      Instruments: symbols,\n    };\n\n    const formatTicker = (data) => {\n      return {\n        ...data,\n        SellVolume: data.SellVolume / 1e8,\n        LowPx: data.LowPx / 1e8,\n        LastPx: data.LastPx / 1e8,\n        BestAsk: data.BestAsk / 1e8,\n        HighPx: data.HighPx / 1e8,\n        BuyVolume: data.BuyVolume / 1e8,\n        BestBid: data.BestBid / 1e8,\n      };\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        resolve(formatTicker(data));\n        registerEventEmitter('SecurityStatusReqID', data.SecurityStatusReqID, (ticker) => {\n          callback && callback(null, formatTicker(ticker));\n          return this.transport.eventEmitter.emit(`${ticker.Market}:${ticker.Symbol}`, formatTicker(ticker));\n        });\n      }).catch(reject);\n    }), callback);\n  }\n\n  unSubscribeTicker(SecurityStatusReqID: number): number {\n    const msg = {\n      MsgType: ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n      SecurityStatusReqID,\n      SubscriptionRequestType: '2',\n    };\n\n    this.transport.sendMessage(msg);\n    return SecurityStatusReqID;\n  }\n\n  subscribeOrderbook(symbols: Array<string>, callback?: Function): PromiseEmitter<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.MD_FULL_REFRESH,\n      MDReqID: generateRequestId(),\n      SubscriptionRequestType: '1',\n      MarketDepth: 0,\n      MDUpdateType: '1', // Incremental refresh\n      MDEntryTypes: ['0', '1', '2'],\n      Instruments: symbols,\n    };\n\n    const subscribeEvent = (data) => {\n      if (data.MDBkTyp === '3') {\n        data.MDIncGrp.map(order => {\n          const dataOrder = {\n            index: order.MDEntryPositionNo,\n            price: order.MDEntryPx / 1e8,\n            size: order.MDEntrySize / 1e8,\n            side: order.MDEntryType === '0' ? 'buy' : 'sell',\n            userId: order.UserID,\n            orderId: order.OrderID,\n            symbol: order.Symbol,\n            time: new Date(`${order.MDEntryDate} ${order.MDEntryTime}`).toString(),\n          };\n\n          switch (order.MDEntryType) {\n            case '0':\n            case '1':\n              const orderbookEvent = `OB:${EVENTS.ORDERBOOK[order.MDUpdateAction]}`;\n              const bidOfferData = { ...dataOrder, type: orderbookEvent };\n\n              callback && callback(null, bidOfferData);\n              return this.transport.eventEmitter.emit(orderbookEvent, bidOfferData);\n            case '2':\n              const tradeEvent = `OB:${EVENTS.TRADES[order.MDUpdateAction]}`;\n              const tradeData = { ...dataOrder, type: tradeEvent };\n\n              callback && callback(null, tradeData);\n              return this.transport.eventEmitter.emit(tradeEvent, tradeData);\n            case '4':\n              break;\n            default:\n              return null;\n          }\n          return null;\n        });\n      }\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        registerEventEmitter('MDReqID', data.MDReqID, subscribeEvent);\n        return resolve(formatOrderBook(data, this.level));\n      }).catch(err => reject(err));\n    }), callback);\n  }\n\n  unSubscribeOrderbook(MDReqID: number): number {\n    const msg = {\n      MsgType: ActionMsgReq.MD_FULL_REFRESH,\n      MDReqID,\n      MarketDepth: 0,\n      SubscriptionRequestType: '2',\n    };\n\n    this.transport.sendMessage(msg);\n    return MDReqID;\n  }\n\n  executionReport(callback?: Function): EventEmitter {\n    registerListener('8', (data) => {\n      callback && callback(data);\n      const event = EVENTS.EXECUTION_REPORT[data.ExecType];\n      return this.transport.eventEmitter.emit(`${EXECUTION_REPORT}:${event}`, data);\n    });\n\n    return this.transport.eventEmitter;\n  }\n\n  tradeHistory({ since, filter, page: Page = 0, pageSize: PageSize = 80 }: {\n    since?: number,\n    filter?: Array<string>,\n    page?: number,\n    pageSize?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg: Object = {\n      MsgType: ActionMsgReq.TRADE_HISTORY,\n      TradeHistoryReqID: generateRequestId(),\n      Page,\n      PageSize,\n    };\n\n    if (filter && filter.length > 0) {\n      msg.Filter = filter;\n    }\n\n    if (since && typeof since === 'number') {\n      msg.Since = since;\n    }\n\n    const format = formatTradeHistory(this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestDeposit({ currency = 'BTC', value, depositMethodId }: {\n    value?: number,\n    currency?: string,\n    depositMethodId?: number,\n  } = {}, callback?: Function): PromiseEmitter<Object> {\n    const subscribeEvent = (deposit) => {\n      callback && callback(null, deposit);\n      return this.transport.eventEmitter.emit(DEPOSIT_REFRESH, deposit);\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return super.requestDeposit({ currency, value, depositMethodId }).then(deposit => {\n        registerEventEmitter('ClOrdID', deposit.ClOrdID, subscribeEvent);\n        return resolve(deposit);\n      }).catch(reject);\n    }), callback);\n  }\n\n  onDepositRefresh(callback?: Function): Promise<Object> {\n    return new Promise((resolve) => {\n      registerListener('U23', (deposit) => {\n        callback && callback(deposit);\n        return resolve(deposit);\n      });\n    });\n  }\n\n  requestWithdraw({ amount, data, currency = 'BTC', method = 'bitcoin' }: {\n    data: Object,\n    amount: number,\n    method?: string,\n    currency?: string,\n  }, callback?: Function): PromiseEmitter<Object> {\n    const subscribeEvent = (withdraw) => {\n      callback && callback(null, withdraw);\n      return this.transport.eventEmitter.emit(WITHDRAW_REFRESH, withdraw);\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return super.requestWithdraw({ amount, data, currency, method }).then(withdraw => {\n        registerEventEmitter('ClOrdID', withdraw.ClOrdID, subscribeEvent);\n        return resolve(withdraw);\n      }).catch(reject);\n    }), callback);\n  }\n\n  onWithdrawRefresh(callback?: Function): Promise<Object> {\n    return new Promise((resolve) => {\n      registerListener('U9', (withdraw) => {\n        callback && callback(withdraw);\n        return resolve(withdraw);\n      });\n    });\n  }\n}\n\nexport default BlinkTradeWS;\n\n\n\n// WEBPACK FOOTER //\n// ./src/ws.js","module.exports = require(\"nodeify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nodeify\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"eventemitter2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter2\"\n// module id = 4\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport { MsgActionReq, MsgActionRes } from './constants/messages';\n\nconst store = new Map();\nconst emitters = new Map();\nconst listeners = new Map();\n\nexport function getListeners() {\n  return listeners;\n}\n\nexport function generateRequestId(): number {\n  return parseInt(String(1e7 * Math.random()), 10);\n}\n\nexport function getListener(msgType: string): Function {\n  return listeners[msgType];\n}\n\nfunction getKey(messages: MsgTypes, msg: Object): string {\n  const key = messages[msg.MsgType][1];\n  const value = msg[key];\n  return key + ':' + value;\n}\n\nexport function getRequest(msg: Message): ?ResolveReject {\n  return store.get(getKey(MsgActionRes, msg));\n}\n\nexport function setRequest(msg: Message, promise: ResolveReject): void {\n  store.set(getKey(MsgActionReq, msg), promise);\n}\n\nexport function deleteRequest(msg: Message): void {\n  store.delete(getKey(MsgActionRes, msg));\n}\n\nexport function getEventEmitter(msg: Message): ?Function {\n  return emitters.get(getKey(MsgActionRes, msg));\n}\n\nexport function registerEventEmitter(key: string, value: number, callback: Function): Object {\n  emitters.set(key + ':' + value, callback);\n}\n\nexport function registerListener(msgType: string, callback: Function): void {\n  listeners.set(msgType, callback);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/listener.js","import { map, head, compose, invertObj } from 'ramda';\nimport * as reqs from './requestTypes';\nimport * as actions from './actionTypes';\n\nconst msgToAction = compose(invertObj, map(head));\n\nexport const MsgActionReq = {\n  1:   [actions.HEARTBEAT, reqs.TestReqID],\n  BE:  [actions.LOGIN, reqs.UserReqID],\n  V:   [actions.MD_FULL_REFRESH, reqs.MDReqID],\n  x:   [actions.SECURITY_LIST, reqs.SecurityReqID],\n  e:   [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n  D:   [actions.ORDER_SEND, reqs.ClOrdID],\n  F:   [actions.ORDER_CANCEL, reqs.ClOrdID],\n  U0:  [actions.SIGNUP, reqs.UserReqID],\n  U2:  [actions.BALANCE, reqs.BalanceReqID],\n  U6:  [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n  U4:  [actions.ORDER_HISTORY, reqs.OrdersReqID],\n  U18: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n  U20: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n  U24: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n  U26: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n  U28: [actions.BROKER_LIST, reqs.BrokerListReqID],\n  U30: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n  U32: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n  U34: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n  U38: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n  U50: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n  U52: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n  U54: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n  U70: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n  U78: [actions.WITHDRAW_COMMENT, reqs.WithdrawReqID],\n  B0:  [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n  B2:  [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n  B4:  [actions.KYC_REQUEST, reqs.CustomerReqID],\n  B6:  [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n  B8:  [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n};\n\nexport const MsgActionRes = {\n  0:   [actions.HEARTBEAT, reqs.TestReqID],\n  BF:  [actions.LOGIN, reqs.UserReqID],\n  W:   [actions.MD_FULL_REFRESH, reqs.MDReqID],\n  X:   [actions.MD_INCREMENT, reqs.MDReqID],\n  8:   [actions.EXECUTION_REPORT, reqs.ClOrdID],\n  y:   [actions.SECURITY_LIST, reqs.SecurityReqID],\n  f:   [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n  U3:  [actions.BALANCE, reqs.BalanceReqID],\n  U7:  [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n  U5:  [actions.ORDER_HISTORY, reqs.OrdersReqID],\n  U9:  [actions.WITHDRAW_REFRESH, reqs.WithdrawReqID],\n  U19: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n  U21: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n  U23: [actions.DEPOSIT_REFRESH, reqs.DepositReqID],\n  U25: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n  U27: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n  U29: [actions.BROKER_LIST, reqs.BrokerListReqID],\n  U31: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n  U33: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n  U35: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n  U39: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n  U51: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n  U53: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n  U55: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n  U71: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n  U79: [actions.WITHDRAW_COMMENT, reqs.WithdrawCancelReqID],\n  B1:  [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n  B3:  [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n  B5:  [actions.KYC_REQUEST, reqs.CustomerReqID],\n  B9:  [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n  B7:  [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n  B11: [actions.CUSTOMER_REFRESH],\n};\n\nexport const ActionMsgReq = msgToAction(MsgActionReq);\nexport const ActionMsgRes = msgToAction(MsgActionRes);\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/messages.js","module.exports = require(\"ramda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 7\n// module chunks = 0","export const ReqID = 'ReqID';\nexport const TestReqID = 'TestReqID';\nexport const UserReqID = 'UserReqID';\nexport const SecurityReqID = 'SecurityReqID';\nexport const ResetPasswordReqID = 'ResetPasswordReqID';\nexport const DepositReqID = 'DepositReqID';\nexport const WithdrawReqID = 'WithdrawReqID';\nexport const BalanceReqID = 'BalanceReqID';\nexport const OrdersReqID = 'OrdersReqID';\nexport const EnableTwoFactorReqID = 'EnableTwoFactorReqID';\nexport const DepositMethodReqID = 'DepositMethodReqID';\nexport const WithdrawListReqID = 'WithdrawListReqID';\nexport const WithdrawCancelReqID = 'WithdrawCancelReqID';\nexport const BrokerListReqID = 'BrokerListReqID';\nexport const DepositListReqID = 'DepositListReqID';\nexport const TradeHistoryReqID = 'TradeHistoryReqID';\nexport const LedgerListReqID = 'LedgerListReqID';\nexport const TradersRankReqID = 'TradersRankReqID';\nexport const UpdateReqID = 'UpdateReqID';\nexport const PositionReqID = 'PositionReqID';\nexport const SecurityStatusReqID = 'SecurityStatusReqID';\nexport const APIKeyListReqID = 'APIKeyListReqID';\nexport const APIKeyCreateReqID = 'APIKeyCreateReqID';\nexport const APIKeyRevokeReqID = 'APIKeyRevokeReqID';\nexport const ProcessDepositReqID = 'ProcessDepositReqID';\nexport const CustomerListReqID = 'CustomerListReqID';\nexport const CustomerReqID = 'CustomerReqID';\nexport const ProcessWithdrawReqID = 'ProcessWithdrawReqID';\nexport const VerifyCustomerReqID = 'VerifyCustomerReqID';\nexport const MDReqID = 'MDReqID';\nexport const ClOrdID = 'ClOrdID';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/requestTypes.js","export const HEARTBEAT = 'HEARTBEAT';\n\nexport const BROKER_LIST = 'BROKER_LIST';\n\nexport const SECURITY_LIST = 'SECURITY_LIST';\nexport const SECURITY_STATUS_UPDATE = 'SECURITY_STATUS_UPDATE';\nexport const SECURITY_STATUS_SUBSCRIBE = 'SECURITY_STATUS_SUBSCRIBE';\nexport const SECURITY_STATUS_UNSUBSCRIBE = 'SECURITY_STATUS_UNSUBSCRIBE';\n\nexport const MD_TRADES = 'MD_TRADES';\nexport const MD_TRADES_UNSUBSCRIBE = 'MD_TRADES_UNSUBSCRIBE';\nexport const MD_INCREMENT = 'MD_INCREMENT';\nexport const MD_FULL_REFRESH = 'MD_FULL_REFRESH';\nexport const MD_UNSUBSCRIBE = 'MD_UNSUBSCRIBE';\nexport const MD_OPENING = 'MD_OPENING';\n\nexport const OB_NEW_ORDER = 'OB_NEW_ORDER';\nexport const OB_UPDATE_ORDER = 'OB_UPDATE_ORDER';\nexport const OB_DELETE_ORDER = 'OB_DELETE_ORDER';\nexport const OB_DELETE_ORDERS_THRU = 'OB_DELETE_ORDERS_THRU';\n\nexport const EXECUTION_REPORT = 'EXECUTION_REPORT';\nexport const EXECUTION_REPORT_NEW = 'EXECUTION_REPORT_NEW';\nexport const EXECUTION_REPORT_PARTIAL = 'EXECUTION_REPORT_PARTIAL';\nexport const EXECUTION_REPORT_EXECUTION = 'EXECUTION_REPORT_EXECUTION';\nexport const EXECUTION_REPORT_CANCELED = 'EXECUTION_REPORT_CANCELED';\nexport const EXECUTION_REPORT_REJECTED = 'EXECUTION_REPORT_REJECTED';\n\nexport const ORDER_HISTORY = 'ORDER_HISTORY';\n\nexport const ORDER_SEND = 'ORDER_SEND';\nexport const ORDER_CANCEL = 'ORDER_CANCEL';\n\nexport const TRADE_NEW = 'TRADE_NEW';\nexport const TRADE_HISTORY = 'TRADE_HISTORY';\n\nexport const TRADES = 'TRADES';\n\nexport const SIGNUP = 'SIGNUP';\n\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const LOGIN_REQUIRED = 'LOGIN_REQUIRED';\nexport const LOGIN_CLOSE = 'LOGIN_CLOSE';\n\nexport const CHANGE_PASSWORD = 'CHANGE_PASSWORD';\n\nexport const BALANCE = 'BALANCE';\n\nexport const PROFILE_UPDATE = 'PROFILE_UPDATE';\n\nexport const WITHDRAW_LIST = 'WITHDRAW_LIST';\nexport const WITHDRAW_CANCEL = 'WITHDRAW_CANCEL';\nexport const WITHDRAW_FILTER = 'WITHDRAW_FILTER';\nexport const WITHDRAW_REFRESH = 'WITHDRAW_REFRESH';\nexport const WITHDRAW_PROCESS = 'WITHDRAW_PROCESS';\nexport const WITHDRAW_CONFIRM = 'WITHDRAW_CONFIRM';\nexport const WITHDRAW_COMMENT = 'WITHDRAW_COMMENT';\nexport const WITHDRAW_REQUEST = 'WITHDRAW_REQUEST';\nexport const WITHDRAW_SET_NEW_VISIBLE = 'WITHDRAW_SET_NEW_VISIBLE';\n\nexport const DEPOSIT_LIST = 'DEPOSIT_LIST';\nexport const DEPOSIT_FILTER = 'DEPOSIT_FILTER';\nexport const DEPOSIT_REFRESH = 'DEPOSIT_REFRESH';\nexport const DEPOSIT_PROCESS = 'DEPOSIT_PROCESS';\nexport const DEPOSIT_REQUEST = 'DEPOSIT_REQUEST';\nexport const DEPOSIT_METHODS = 'DEPOSIT_METHODS';\nexport const DEPOSIT_SET_NEW_VISIBLE = 'DEPOSIT_SET_NEW_VISIBLE';\n\nexport const LEDGER_LIST = 'LEDGER_LIST';\nexport const LEDGER_FILTER = 'LEDGER_FILTER';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.js","export const ORDER_BOOK_TRADE_NEW = 'TRADE_NEW';\nexport const ORDER_BOOK_NEW_ORDER = 'NEW_ORDER';\nexport const ORDER_BOOK_UPDATE_ORDER = 'UPDATE_ORDER';\nexport const ORDER_BOOK_DELETE_ORDER = 'DELETE_ORDER';\nexport const ORDER_BOOK_DELETE_ORDERS_THRU = 'DELETE_ORDERS_THRU';\n\nexport const EXECUTION_REPORT = 'EXECUTION_REPORT';\nexport const EXECUTION_REPORT_NEW = 'NEW';\nexport const EXECUTION_REPORT_PARTIAL = 'PARTIAL';\nexport const EXECUTION_REPORT_EXECUTION = 'EXECUTION';\nexport const EXECUTION_REPORT_CANCELED = 'CANCELED';\nexport const EXECUTION_REPORT_REJECTED = 'REJECTED';\n\n/* eslint-disable quote-props */\nexport const EVENTS = {\n  ORDERBOOK: {\n    '0': ORDER_BOOK_NEW_ORDER,\n    '1': ORDER_BOOK_UPDATE_ORDER,\n    '2': ORDER_BOOK_DELETE_ORDER,\n    '3': ORDER_BOOK_DELETE_ORDERS_THRU,\n  },\n  TRADES: {\n    '0': ORDER_BOOK_TRADE_NEW,\n  },\n  EXECUTION_REPORT: {\n    '0': EXECUTION_REPORT_NEW,\n    '1': EXECUTION_REPORT_PARTIAL,\n    '2': EXECUTION_REPORT_EXECUTION,\n    '4': EXECUTION_REPORT_CANCELED,\n    '8': EXECUTION_REPORT_REJECTED,\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/events.js","import { map, compose, groupBy, prop, zipObj } from 'ramda';\n\nexport const formatColumns = (field, level) => (data) => {\n  if (level === 2) {\n    const list = map(zipObj(data.Columns), data[field]);\n    return Promise.resolve({ ...data, [field]: list });\n  }\n\n  return Promise.resolve(data);\n};\n\nexport const formatTradeHistory = (level) => (data) => {\n  if (level === 2) {\n    const TradeHistoryGrp = compose(\n      groupBy(prop('Market')),\n      map(zipObj(data.Columns)),\n    )(data.TradeHistoryGrp);\n\n    return Promise.resolve({ ...data, TradeHistoryGrp });\n  }\n\n  return Promise.resolve(data);\n};\n\nexport const formatOrderBook = (data, level) => {\n  if (level === 2) {\n    const { bids, asks } = data.MDFullGrp\n      .filter(order => order.MDEntryType === '0' || order.MDEntryType === '1')\n      .reduce((prev, order) => {\n        const side = order.MDEntryType === '0' ? 'bids' : 'asks';\n        (prev[side] || (prev[side] = [])).push([\n          order.MDEntryPx / 1e8,\n          order.MDEntrySize / 1e8,\n          order.UserID,\n          order.OrderID,\n        ]);\n        return prev;\n      }, []);\n\n    return {\n      ...data,\n      MDFullGrp: {\n        [data.Symbol]: {\n          bids,\n          asks,\n        },\n      },\n    };\n  }\n\n  return data;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/utils.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { ActionMsgReq } from './constants/messages';\nimport { formatColumns } from './util/utils';\nimport { generateRequestId } from './listener';\n\ntype StatusListType = '1' | '2' | '4' | '8';\n\nclass TradeBase {\n  env: BlinkTradeEnv;\n\n  send: (msg: Object) => Promise<Object>;\n\n  +fetchTrade: (msg: Object) => Promise<Object>;\n\n  +sendMessageAsPromise: (msg: Object) => Promise<Object>;\n\n  constructor(params?: BlinkTradeBase) {\n    this.level = params.level;\n    this.brokerId = params.brokerId;\n  }\n\n  changeBrokerId(brokerId: number) {\n    this.brokerId = brokerId;\n  }\n\n  balance(clientId, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.BALANCE,\n      BalanceReqID: generateRequestId(),\n    };\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  myOrders({\n    page: Page = 0,\n    pageSize: PageSize = 40,\n    filter,\n  }: {\n    page?: number,\n    pageSize?: number,\n    filter: Array<string>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.ORDER_HISTORY,\n      OrdersReqID: generateRequestId(),\n      Page,\n      PageSize,\n    };\n\n    if (filter) {\n      msg.Filter = filter;\n    }\n\n    const format = formatColumns('OrdListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  sendOrder({ side, amount, price, symbol }: {\n    side: '1' | '2',\n    price: number,\n    amount: number,\n    symbol: string,\n  }, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.ORDER_SEND,\n      ClOrdID: generateRequestId(),\n      Symbol: symbol,\n      Side: side,\n      OrdType: '2',\n      Price: price,\n      OrderQty: amount,\n      BrokerID: this.brokerId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  cancelOrder(param?: number | {\n    orderId?: number,\n    clientId?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const orderId = param.orderId ? param.orderId : param;\n    const msg: Object = {\n      MsgType: ActionMsgReq.ORDER_CANCEL,\n    };\n\n    if (param.clientId) {\n      msg.ClOrdID = param.clientId;\n    }\n\n    if (param.orderId) {\n      msg.OrderID = orderId;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  /**\n   * status: 1-Pending, 2-In Progress, 4-Completed, 8-Cancelled\n   */\n  requestWithdrawList({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    status: StatusList = ['1', '2', '4', '8'],\n    filter,\n    clientId,\n  }: {\n    page?: number,\n    pageSize?: number,\n    clientId: string,\n    filter?: Array<string>,\n    status?: Array<StatusListType>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.WITHDRAW_LIST,\n      WithdrawListReqID: generateRequestId(),\n      Page,\n      PageSize,\n      StatusList,\n    };\n\n    if (filter && filter.length) {\n      msg.Filter = filter;\n    }\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('WithdrawListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestWithdraw({ amount, data, currency = 'BTC', method = 'bitcoin' }: {\n    data: Object,\n    amount: number,\n    method?: string,\n    currency?: string,\n  }, callback?: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg = {\n      MsgType: ActionMsgReq.WITHDRAW_REQUEST,\n      WithdrawReqID: reqId,\n      ClOrdID: reqId,\n      Method: method,\n      Amount: amount,\n      Currency: currency,\n      Data: data,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  confirmWithdraw({ withdrawId: WithdrawID, confirmationToken, secondFactor }: {\n    withdrawId: string,\n    confirmationToken?: string,\n    secondFactor?: string,\n  }, callback: Function): Promise<Object> {\n    const msg: Object = {\n      MsgType: ActionMsgReq.CONFIRM_WITHDRAW,\n      WithdrawReqID: generateRequestId(),\n      WithdrawID,\n    };\n\n    if (confirmationToken) {\n      msg.ConfirmationToken = confirmationToken;\n    }\n\n    if (secondFactor) {\n      msg.SecondFactor = secondFactor;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  cancelWithdraw(withdrawId: string, callback: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg = {\n      MsgType: ActionMsgReq.CANCEL_WITHDRAW,\n      WithdrawCancelReqID: reqId,\n      ClOrdID: reqId,\n      WithdrawID: withdrawId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestDepositList({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    status: StatusList = ['1', '2', '4', '8'],\n    filter,\n    clientId,\n  }: {\n    page: number,\n    pageSize: number,\n    status: Array<StatusListType>,\n    filter?: Array<string>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.DEPOSIT_LIST,\n      DepositListReqID: generateRequestId(),\n      Page,\n      PageSize,\n      StatusList,\n    };\n\n    if (filter && filter.length) {\n      msg.Filter = filter;\n    }\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('DepositListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestDeposit({ currency = 'BTC', value, depositMethodId }: {\n    value?: number,\n    currency?: string,\n    depositMethodId?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg: Object = {\n      MsgType: ActionMsgReq.DEPOSIT_REQUEST,\n      DepositReqID: reqId,\n      ClOrdID: reqId,\n      Currency: currency,\n      BrokerID: this.brokerId,\n    };\n\n    if (currency !== 'BTC') {\n      msg.DepositMethodID = depositMethodId;\n      msg.Value = value;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestDepositMethods(callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.DEPOSIT_METHODS,\n      DepositMethodReqID: generateRequestId(),\n      BrokerID: this.brokerId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestLedger({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    brokerId,\n    clientId,\n    currency,\n  }: {\n    page: number,\n    pageSize: number,\n    currency: string,\n    brokerId?: number,\n    clientId?: string,\n  } = {}, callback?: Function) {\n    const msg: Object = {\n      MsgType: ActionMsgReq.LEDGER_LIST,\n      LedgerListReqID: generateRequestId(),\n      BrokerID: this.brokerId,\n      Page,\n      PageSize,\n    };\n\n    if (brokerId) {\n      msg.BrokerID = brokerId;\n    }\n    if (currency) {\n      msg.Currency = currency;\n    }\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('LedgerListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n}\n\nexport default TradeBase;\n\n\n\n// WEBPACK FOOTER //\n// ./src/trade.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\n\nimport Transport, { IS_NODE, IS_BROKER } from './transport';\n\nimport {\n  getRequest,\n  setRequest,\n  deleteRequest,\n  getListener,\n  getEventEmitter,\n} from '../listener';\n\nclass WebSocketTransport extends Transport {\n  /*\n   * WebSocket Instance\n   */\n  socket: WebSocket;\n\n  /*\n   * FingerPrint\n   */\n  fingerPrint: string;\n\n  /*\n   * Stun object\n   */\n  stuntip: Stun;\n\n  /*\n   * Transport Promise\n   */\n  request: Request;\n\n  /*\n   * Event emitter to dispatch websocket updates\n   */\n  eventEmitter: EventEmitter;\n\n  headers: Object;\n\n  constructor(params?: BlinkTradeWS = {}) {\n    super(params, 'ws');\n\n    this.stun = { local: null, public: [] };\n\n    this.getStun();\n    this.getFingerPrint(params.fingerPrint);\n    this.headers = params.headers;\n\n    this.eventEmitter = new EventEmitter({ wildcard: true, delimiter: ':' });\n  }\n\n  connect(callback?: Function): Promise<Object> {\n    return nodeify.extend(new Promise((resolve, reject) => {\n      this.request = { resolve, reject };\n\n      const WebSocket = IS_NODE ? require('ws') : window.WebSocket;\n\n      this.socket = new WebSocket(this.endpoint, null, this.headers);\n      this.socket.onopen = this.onOpen.bind(this);\n      this.socket.onclose = this.onClose.bind(this);\n      this.socket.onerror = this.onError.bind(this);\n      this.socket.onmessage = this.onMessage.bind(this);\n    })).nodeify(callback);\n  }\n\n  disconnect(): void {\n    this.socket.close();\n  }\n\n  onOpen(): void {\n    this.request.resolve({ connected: true });\n  }\n\n  onClose(): void {\n  }\n\n  onError(error: any): void {\n    this.request.reject(error);\n  }\n\n  sendMessage(msg: Object): void {\n    if (this.socket.readyState === 1) {\n      const data = msg;\n\n      data.STUNTIP = this.stun;\n      data.FingerPrint = this.fingerPrint;\n\n      this.socket.send(JSON.stringify(data));\n    }\n  }\n\n  sendMessageAsPromise(msg: Object): Promise<Object> {\n    return new Promise((resolve, reject) => {\n      const promise = { resolve, reject };\n      setRequest(msg, { resolve, reject });\n      // We are passing the promise as a parameter to spy it in our tests\n      this.sendMessage(msg, promise);\n    });\n  }\n\n  onMessage(msg: Object): void {\n    const data = JSON.parse(msg.data);\n    if (data.MsgType === 'ERROR') {\n      throw new Error(`Error: ${data.Detail} ${data.Description}`);\n    }\n\n    const request = getRequest(data);\n    const emitter = getEventEmitter(data);\n    const listener = getListener(data.MsgType);\n\n    this.dispatchPromise(request, data);\n    this.dispatchEventEmitters(emitter, data);\n    this.dispatchListeners(listener, data);\n  }\n\n  dispatchPromise(request: ?Request, data: Object): any {\n    if (request && request.resolve) {\n      deleteRequest(data);\n      return request.resolve(data);\n    }\n  }\n\n  dispatchEventEmitters(emitter, data: Object): any {\n    if (emitter) {\n      return emitter(data);\n    }\n  }\n\n  dispatchListeners(listener: Function, data: Object): void {\n    return listener && listener(data);\n  }\n\n  getFingerPrint(customFingerprint?: string): void {\n    if (IS_NODE) {\n      return require('../util/macaddress').getMac(macAddress => {\n        this.fingerPrint = macAddress;\n      });\n    } else if (IS_BROKER) {\n      const Fingerprint2 = require('fingerprintjs2');\n      return new Fingerprint2().get(fingerPrint => {\n        this.fingerPrint = Math.abs(require('../util/hash32').encodeByteArray(fingerPrint)).toString();\n      });\n    } else if (customFingerprint) {\n      this.fingerPrint = customFingerprint;\n    } else {\n      throw new Error('FingerPrint not provided');\n    }\n  }\n\n  getStun(): void {\n    if (IS_NODE) {\n      require('../util/stun').getStun(data => {\n        this.stun = data;\n      });\n    }\n  }\n\n  /* eslint-disable no-param-reassign */\n  emitterPromise<T>(promise: Object, callback?: Function): PromiseEmitter<T> {\n    promise.on = (event: string, listener: Function) => {\n      this.eventEmitter.on(event, listener);\n      return promise;\n    };\n    promise.onAny = (listener: Function) => {\n      this.eventEmitter.onAny(listener);\n      return promise;\n    };\n    promise.offAny = (listener: Function) => {\n      this.eventEmitter.offAny(listener);\n      return promise;\n    };\n    promise.once = (event: string, listener: Function) => {\n      this.eventEmitter.once(event, listener);\n      return promise;\n    };\n    promise.many = (event: string, times: number, listener: Function) => {\n      this.eventEmitter.many(event, times, listener);\n      return promise;\n    };\n    promise.removeListener = (event: string, listener: Function) => {\n      this.eventEmitter.removeListener(event, listener);\n      return promise;\n    };\n    promise.removeAllListeners = (events: Array<string>) => {\n      this.eventEmitter.removeAllListeners(events);\n      return promise;\n    };\n\n    return nodeify.extend(promise).nodeify(callback);\n  }\n  /* eslint-enable no-param-reassign */\n}\n\nexport default WebSocketTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/websocket.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport common from '../constants/common';\n\nexport const IS_NODE = typeof window === 'undefined';\nexport const IS_BROKER = typeof document !== 'undefined';\n\nclass Transport {\n  /*\n   * url endpoint.\n   */\n  endpoint: string;\n\n  level: '1' | '2';\n\n  constructor(params: BlinkTradeBase = {}, env: BlinkTradeEnv) {\n    /* eslint-disable indent */\n    const endpoint =\n        params.url  ? params.url\n      : params.prod ? common.prod[env]\n      :               common.testnet[env];\n    /* eslint-enable indent */\n\n    this.endpoint = endpoint;\n    this.level = params.level || '2';\n  }\n}\n\nexport default Transport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/transport.js","export default {\n  prod: {\n    ws: 'wss://ws.blinktrade.com/trade/',\n    rest: 'https://api.blinktrade.com/',\n  },\n  testnet: {\n    ws: 'wss://api_testnet.blinktrade.com/trade/',\n    rest: 'https://api_testnet.blinktrade.com/',\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/common.js","module.exports = require(\"ws\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ws\"\n// module id = 16\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\n/* eslint-disable operator-assignment */\n/* eslint-disable no-plusplus */\n/* eslint-disable import/prefer-default-export */\n\nimport macaddress from 'macaddress';\n\nexport function getMac(callback: Function): void {\n  macaddress.all((err, all) => {\n    const hashCode = (str) => {\n      let hash = 0;\n      if (str.length === 0) return hash;\n      for (let i = 0; i < str.length; i++) {\n        hash = ((hash << 5) - hash) + str.charCodeAt(i);\n        hash = hash & hash; // Convert to 32bit integer\n      }\n      return hash;\n    };\n\n    let macAddresses = '';\n    Object.keys(all).forEach(iface => {\n      macAddresses += all[iface].mac;\n    });\n\n    let fingerPrint = hashCode(macAddresses);\n    if (fingerPrint < 0) {\n      fingerPrint *= -1;\n    }\n\n    callback(fingerPrint);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/macaddress.js","module.exports = require(\"macaddress\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"macaddress\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"fingerprintjs2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fingerprintjs2\"\n// module id = 19\n// module chunks = 0","/* eslint-disable no-var */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-fallthrough */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable default-case */\n/* eslint-disable prefer-destructuring */\n/*\n * ByteArray enconding from google-closure-library\n */\n\nconst SEED32 = 314159265;\nconst CONSTANT32 = -1640531527;\n\n/**\n * Performs an inplace mix of an object with the integer properties (a, b, c)\n * and returns the final value of c.\n * @param {Object} mix Object with properties, a, b, and c.\n * @return {number} The end c-value for the mixing.\n * @private\n */\nconst mix32_ = (mix) => {\n  var a = mix.a;\n  var b = mix.b;\n  var c = mix.c;\n  a -= b;\n  a -= c;\n  a ^= c >>> 13;\n  b -= c;\n  b -= a;\n  b ^= a << 8;\n  c -= a;\n  c -= b;\n  c ^= b >>> 13;\n  a -= b;\n  a -= c;\n  a ^= c >>> 12;\n  b -= c;\n  b -= a;\n  b ^= a << 16;\n  c -= a;\n  c -= b;\n  c ^= b >>> 5;\n  a -= b;\n  a -= c;\n  a ^= c >>> 3;\n  b -= c;\n  b -= a;\n  b ^= a << 10;\n  c -= a;\n  c -= b;\n  c ^= b >>> 15;\n  mix.a = a;\n  mix.b = b;\n  mix.c = c;\n  return c;\n};\n\n/**\n * Converts an unsigned \"byte\" to signed, that is, convert a value in the range\n * (0, 2^8-1) to (-2^7, 2^7-1) in order to be compatible with Java's byte type.\n * @param {number} n Unsigned \"byte\" value.\n * @return {number} Signed \"byte\" value.\n * @private\n */\nconst toSigned_ = (n) => {\n  return n > 127 ? n - 256 : n;\n};\n\nconst wordAt_ = (bytes, offset) => {\n  var a = toSigned_(bytes[offset + 0]);\n  var b = toSigned_(bytes[offset + 1]);\n  var c = toSigned_(bytes[offset + 2]);\n  var d = toSigned_(bytes[offset + 3]);\n  return a + (b << 8) + (c << 16) + (d << 24);\n};\n\n/**\n * Hashes a \"byte\" array to a 32-bit value using the supplied seed.\n */\nmodule.exports.encodeByteArray = function encodeByteArray(bytes) {\n  var offset = 0;\n  var length = bytes.length;\n  var seed = SEED32;\n\n  var mix = {\n    a: CONSTANT32,\n    b: CONSTANT32,\n    c: seed,\n  };\n\n  var keylen;\n  for (keylen = length; keylen >= 12; keylen -= 12, offset += 12) {\n    mix.a += wordAt_(bytes, offset);\n    mix.b += wordAt_(bytes, offset + 4);\n    mix.c += wordAt_(bytes, offset + 8);\n    mix32_(mix);\n  }\n  // Hash any remaining bytes\n  mix.c += length;\n  switch (keylen) {  // deal with rest.  Some cases fall through\n    case 11:\n      mix.c += (bytes[offset + 10]) << 24;\n    case 10:\n      mix.c += (bytes[offset + 9] & 0xff) << 16;\n    case 9:\n      mix.c += (bytes[offset + 8] & 0xff) << 8;\n    // the first byte of c is reserved for the length\n    case 8:\n      mix.b += wordAt_(bytes, offset + 4);\n      mix.a += wordAt_(bytes, offset);\n      break;\n    case 7:\n      mix.b += (bytes[offset + 6] & 0xff) << 16;\n    case 6:\n      mix.b += (bytes[offset + 5] & 0xff) << 8;\n    case 5:\n      mix.b += (bytes[offset + 4] & 0xff);\n    case 4:\n      mix.a += wordAt_(bytes, offset);\n      break;\n    case 3:\n      mix.a += (bytes[offset + 2] & 0xff) << 16;\n    case 2:\n      mix.a += (bytes[offset + 1] & 0xff) << 8;\n    case 1:\n      mix.a += (bytes[offset + 0] & 0xff);\n      // case 0 : nothing left to add\n  }\n  return mix32_(mix);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/hash32.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-plusplus */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-restricted-properties */\n/* eslint-disable no-buffer-constructor */\n\nimport ip from 'ip';\nimport dgram from 'dgram';\n\nconst stunIp = { local: null, public: [] };\n\nfunction addIPAddress(ipAddress) {\n  if (ipAddress.match(/^(192\\.168\\.|169\\.254\\.|10\\.|172\\.(1[6-9]|2\\d|3[01]))/)) {\n    stunIp.local = ipAddress;\n  } else if (stunIp.public.indexOf(ipAddress) === -1) {\n    stunIp.public.push(ipAddress);\n  }\n}\n\nexport function getStun(callback) {\n  const socket = dgram.createSocket('udp4');\n\n  const STUN_HEADER_LENGTH = 20;\n  const stunRequest = new Buffer(STUN_HEADER_LENGTH);\n\n  const STUN_METHOD_REQUEST = 0x000;\n  const STUN_BINDING_CLASS = 0x0001;\n  const STUN_MAGIC_COOKIE = 0x2112A442;\n  const STUN_TID_MAX = Math.pow(2, 32);\n\n  const STUN_ATTR_MAPPED_ADDRESS = 0x0001;\n  const STUN_ATTR_XOR_MAPPED_ADDRESS = 0x8020;\n  const STUN_ATTR_XOR_MAPPED_ADDRESS_ALT = 0x0020;\n\n  const stunTxId = (Math.random() * STUN_TID_MAX);\n\n  const stunServers = [\n    [3478, 'stun.services.mozilla.com'],\n    [19302, 'stun.l.google.com'],\n    [3478, 'stun.stunprotocol.org'],\n    [3478, 'stun.softjoys.com'],\n    [3478, 'stun.samsungsmartcam.com'],\n    [3478, 'stun.sonetel.com'],\n    [3478, 'stun.tagan.ru'],\n    [3478, 'stun.voipgain.com'],\n    [3478, 'stunserver.org'],\n    [3478, 'stun.advfn.com'],\n    [3478, 'stun.annatel.net'],\n    [3478, 'stun.freevoipdeal.com'],\n  ];\n\n  stunRequest.writeUInt16BE(((STUN_BINDING_CLASS | STUN_METHOD_REQUEST) & 0x3fff), 0);\n  stunRequest.writeUInt16BE(0, 2);\n  stunRequest.writeUInt32BE(STUN_MAGIC_COOKIE, 4);\n  stunRequest.writeUInt32BE(0, 8);\n  stunRequest.writeUInt32BE(0, 12);\n  stunRequest.writeUInt32BE(stunTxId, 16);\n\n  socket.on('message', (msg) => {\n    const xor = (a, b) => {\n      const data = [];\n      if (b.length > a.length) {\n        const tmp = a;\n        a = b;\n        b = tmp;\n      }\n      for (let i = 0, len = a.length; i < len; i++) {\n        data.push(a[i] ^ b[i]);\n      }\n\n      return new Buffer(data);\n    };\n\n    const block = msg.readUInt8(0);\n    const bit1 = block & 0x80;\n    const bit2 = block & 0x40;\n\n    if (!(bit1 === 0 && bit2 === 0)) {\n      return;\n    }\n\n    const msgHeader = msg.slice(0, STUN_HEADER_LENGTH);\n    const msgAttrs = msg.slice(STUN_HEADER_LENGTH, msg.length);\n\n    let offset = 0;\n\n    while (offset < msgAttrs.length) {\n      const attrType = msgAttrs.readUInt16BE(offset);\n      offset += 2;\n\n      let attrBuffLength = msgAttrs.readUInt16BE(offset);\n      const blockOut = attrBuffLength % 4;\n      if (blockOut > 0) {\n        attrBuffLength += 4 - blockOut;\n      }\n      offset += 2;\n\n      const value = msgAttrs.slice(offset, offset + attrBuffLength);\n      offset += attrBuffLength;\n\n      let family;\n      let address;\n      switch (attrType) {\n        case STUN_ATTR_MAPPED_ADDRESS:\n          family = (value.readUInt16BE(0) === 0x02) ? 6 : 4;\n          address = ip.toString(value, 4, family);\n          addIPAddress(address);\n          break;\n\n        case STUN_ATTR_XOR_MAPPED_ADDRESS:\n        case STUN_ATTR_XOR_MAPPED_ADDRESS_ALT:\n          family = (value.readUInt16BE(0) === 0x02) ? 6 : 4;\n          const magic = msgHeader.slice(4, 8);\n          const tid = msgHeader.slice(8, 20);\n          const xaddr = value.slice(4, family === 4 ? 8 : 20);\n          const addr = xor(xaddr, family === 4 ? magic : value.concat([magic, tid]));\n          address = ip.toString(addr, 0, family);\n          addIPAddress(address);\n          break;\n        default:\n      }\n    }\n\n    callback(stunIp);\n  });\n\n  stunServers.map(([port, host]) => socket.send(stunRequest, 0, stunRequest.length, port, host, () => {}));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/stun.js","module.exports = require(\"ip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ip\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"dgram\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dgram\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 24\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport RestTransport from './transports/rest';\nimport TradeBase from './trade';\n\nclass BlinkTradeRest extends TradeBase {\n  constructor(params?: BlinkTradeBase) {\n    super(params);\n    this.transport = params.transport || new RestTransport(params);\n  }\n\n  send(path) {\n    return this.transport.fetchTrade(path);\n  }\n\n  fetchPublic(path) {\n    return this.transport.fetchPublic(path);\n  }\n\n  ticker(callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic('ticker')).nodeify(callback);\n  }\n\n  trades({ limit = 100, since = 0 }: {\n    limit: number,\n    since: number,\n  } = {}, callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic(`trades?limit=${limit}&since=${since}`)).nodeify(callback);\n  }\n\n  orderbook(callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic('orderbook')).nodeify(callback);\n  }\n}\n\nexport default BlinkTradeRest;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rest.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport url from 'url';\nimport sjcl from 'sjcl';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nimport Transport from './transport';\n\nconst { fetch } = fetchPonyfill(Promise);\n\nclass RestTransport extends Transport {\n  /**\n   * APIKey\n   */\n  key: string;\n\n  /**\n   * APISecret\n   */\n  secret: string;\n\n  /**\n   * Exchanges currencies available.\n   */\n  currency: 'USD' | 'BRL' | 'VEF' | 'CLP' | 'VND' | 'PKR';\n\n  constructor(params: BlinkTradeRest) {\n    super(params, 'rest');\n\n    this.key = params.key;\n    this.secret = params.secret;\n    this.currency = params.currency || 'USD';\n  }\n\n  headers(method: string, body: Object): Object {\n    const timeStamp = Date.now().toString();\n    const hexKey = sjcl.codec.utf8String.toBits(this.secret);\n    const hmac = new sjcl.misc.hmac(hexKey, sjcl.hash.sha256);\n    const Signature = sjcl.codec.hex.fromBits(hmac.encrypt(timeStamp));\n    return {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n        Nonce: timeStamp,\n        APIKey: this.key,\n        Signature,\n      },\n      body: JSON.stringify(body),\n    };\n  }\n\n  fetch(msg: Object, api: string, headers?: Object = {}): Promise<Object> {\n    return fetch(url.resolve(this.endpoint, api), headers)\n      .then(response => response.json());\n  }\n\n  fetchPublic(api: string): Promise<Object> {\n    return this.fetch({}, `api/v1/${this.currency}/${api}`);\n  }\n\n  fetchTrade(msg: Object): Promise<Object> {\n    const headers = this.headers('POST', msg);\n    return this.fetch(msg, 'tapi/v1/message', headers)\n      .then(response => (response.Status === 500 ? Promise.reject(response) : response.Responses))\n      .then(response => (response.length === 1 ? response[0] : response));\n  }\n}\n\nexport default RestTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/rest.js","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"sjcl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sjcl\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"fetch-ponyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fetch-ponyfill\"\n// module id = 29\n// module chunks = 0"],"sourceRoot":""}